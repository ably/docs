<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 40121 -->
<!-- Generated: 2025-08-21T17-17-40-434Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document token revocation feature gating with clear enablement path -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 40121: Token revocation not enabled

## What Happened

You attempted to use token revocation features that are not enabled for your Ably application or account.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 40121 | 401 or 400 | Client Error (Authentication) | No - requires configuration change |

## Quick Fix

- Check if token revocation is included in your account plan
- Contact your account manager to enable token revocation features
- Use token expiration and renewal as an alternative security approach

## Error Messages

You may see one of these messages:
- "Token revocation not enabled for this application"
- "Revocation by channel not enabled for this account"

## Common Causes

1. **Token revocation not enabled for application** (most common)
   - Your application hasn't been configured with revocation channels
   - Token revocation feature not activated for your application
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-analysis.md lines 16-22 -->

2. **Channel-based revocation not enabled** 
   - Attempting to revoke tokens by channel without the feature flag
   - Account doesn't have `revocationByChannel` feature enabled
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-analysis.md lines 24-30 -->

3. **Plan limitations**
   - Current account plan doesn't include token revocation features
   - Advanced security features require plan upgrade
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 25-28 -->

## Resolution Steps

1. **Check your account features**
   - Review your current Ably plan to see if token revocation is included
   - Visit your [Ably dashboard](https://ably.com/dashboard) to check account features
   - Review [Ably pricing plans](https://ably.com/pricing) for feature availability
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 36-38 -->

2. **Enable token revocation for your account**
   - Contact Ably support to enable token revocation features
   - Your account manager can help activate advanced security features
   - Once enabled, configure revocation settings in your application dashboard
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 40-43 -->

3. **Configure application settings**
   - Set up revocation configuration in your app settings
   - Enable channel-based revocation if needed for your use case
   - Ensure revocation channels are properly configured
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 45-48 -->

4. **Use alternative security approaches**
   - Implement shorter token expiration times (TTL)
   - Use capability-based access control to restrict token permissions
   - Set up token refresh mechanisms for better security
   - Monitor token usage patterns for anomaly detection
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 50-54, 62-67 -->

## Automatic Handling

This is a configuration error that will not be automatically retried. You must enable the feature or use alternative approaches before the operation will succeed.

## Prevention

- Review account features and limitations during application planning
- Understand security requirements before implementation  
- Consider token lifecycle management in your application design
- Plan for appropriate account tier based on security needs
<!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 56-60 -->

## Related Resources

- [Token Authentication documentation](https://ably.com/docs/auth/token)
- [Authentication Guide](https://ably.com/docs/auth)
- [Ably Pricing Plans](https://ably.com/pricing)
- Related errors: [40101](https://help.ably.io/error/40101), [40102](https://help.ably.io/error/40102)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 40121
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 40121)
- Existing Documentation: None found
- Repository Overviews: Not needed for this error
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Knowledge file guidance on workarounds from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 62-67
- Content Excluded: Detailed code implementation examples (lines 46-60 from analysis) as not relevant for customer-facing docs
- Recommendations Source: All resolution steps based on knowledge file recommendations
- Code Examples Rationale: No code examples included as this is a configuration error, not an implementation issue
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on analysis findings in https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-analysis.md lines 16-22
  - Cause 2: From analysis at https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-analysis.md lines 24-30
  - Cause 3: From knowledge file at https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 25-28
- Resolution Steps: 
  - Step 1: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 36-38
  - Step 2: Knowledge advice from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 40-43
  - Step 3: Configuration guidance from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 45-48
  - Step 4: Alternative approaches from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 50-54 and 62-67
- Prevention: Based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/40121-knowledge.md lines 56-60
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 40121
2. Regenerate: Run `./bin/ably-os errors document-error-codes 40121 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->