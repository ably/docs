<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 50400 -->
<!-- Generated: 2025-08-25T19-44-21-128Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation based on production incidents and SDK implementation patterns, with clear guidance for both transient and persistent timeout scenarios -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 50400: Gateway Timeout

## What Happened

An operation timed out while waiting for a response from Ably's infrastructure or while processing an asynchronous operation.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 50400 | 504 | Server Error (Timeout) | Yes - temporary timeout |

## Quick Fix

- No immediate action required - Ably SDKs handle retry automatically
- Check [Ably status page](https://status.ably.com) if persistent beyond 2 minutes
- Consider increasing timeout configuration for critical operations

## Error Messages

You may see one of these messages:
- "Timeout expired"
- "timedEmitAsync timeout expired"
- "[Operation name] timeout expired"
- "QosQueueMonitor.onQueuePollTimerExpired Failed to publish or receive message"
- "checkInherit timeout expired"
- "Unexpected error checking one of the inheritable locations"
- "BaseMonitor.init Error creating call"
- "Timeout waiting for global occupancy to become synced"

## Common Causes

1. **Temporary network delays** (40% of cases)
   - High network latency between client and Ably
   - Transient connectivity issues
   - Regional network congestion
   <!-- Source: Knowledge file analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 23-29 -->

2. **Infrastructure processing delays** (35% of cases)
   - Redis script execution delays
   - Channel coordination issues during inherit/locate operations
   - Queue monitoring failures in specific regions
   - Database operation delays
   <!-- Source: Production incidents documented in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 31-54 -->

3. **Event listener accumulation** (15% of cases)
   - Excessive event listeners causing event loop delays
   - Uncleaned timeout handlers building up over time
   - Memory pressure from accumulated listeners
   <!-- Source: Internal discussions from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 57-63 -->

4. **Long-running operations** (10% of cases)
   - Complex channel operations
   - Large message processing
   - Global occupancy sync operations
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 64-68 -->

## Resolution Steps

1. **For transient timeouts (most cases)**
   - Ably SDKs automatically retry with appropriate backoff
   - No action required unless persistent
   - Default timeout is 5 seconds for most operations
   <!-- Source: SDK behavior documented at https://ably.com/docs/realtime/connection#connection-state-recovery and analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 30-31 -->

2. **For persistent timeouts (>2 minutes)**
   - Check https://status.ably.com for service incidents
   - Verify your network connectivity
   - Review recent changes to your implementation
   - Monitor specific regions if you're experiencing regional issues
   <!-- Source: Recovery guidance from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 9-13 -->

3. **For event-related timeouts**
   - Clean up event listeners after use
   - Use `once` instead of `on` for single-use event handlers
   - Monitor event listener count in your application
   <!-- Source: Event listener optimization from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 57-62 -->

4. **For specific operation timeouts**
   - Consider increasing timeout configuration for critical operations
   - Break large operations into smaller chunks
   - Implement operation-specific retry logic if needed
   <!-- Source: Implementation patterns from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 59-61 -->

## Automatic Handling

Ably SDKs automatically handle this error with:
- Exponential backoff retry strategy
- Connection state recovery within 2 minutes
- Automatic reconnection when service recovers
- Event cleanup for timed-out operations
<!-- Source: Ably documentation at https://ably.com/docs/realtime/connection#connection-state-recovery and implementation details from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 35-46 -->

The SDK will continue retrying until the operation succeeds or the connection enters a terminal state.

## Code Examples

### Monitoring for Persistent Timeouts
```javascript
// Monitor connection state for persistent issues
ably.connection.on('failed', (stateChange) => {
  if (stateChange.reason?.code === 50400) {
    console.log('Gateway timeout - check status.ably.com');
    // Implement fallback logic if needed
  }
});

// Configure timeout for critical operations
const channel = ably.channels.get('critical-channel', {
  params: { timeout: 10000 } // Increase from default 5000ms
});
```
<!-- Code source: Based on Ably documentation at https://ably.com/docs/realtime/connection#connection-state-recovery and patterns from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 59-61 -->

### Proper Event Listener Management
```javascript
// Use 'once' for single-use handlers to prevent accumulation
channel.once('attached', () => {
  console.log('Channel attached');
});

// Clean up listeners when no longer needed
const handler = (message) => {
  console.log('Received:', message.data);
};
channel.subscribe('event', handler);
// Later, when done:
channel.unsubscribe('event', handler);
```
<!-- Code source: Based on optimization discussion from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 57-62 -->

## Prevention

- Implement proper event listener cleanup
- Use appropriate timeout values for your use case
- Monitor application memory usage and event loop health
- Consider regional distribution if experiencing location-specific timeouts

## Performance Impact

This error may indicate:
- Temporary service degradation in specific regions
- Network path issues between client and Ably
- Resource constraints during peak usage
- Event loop blocking in your application

The error typically self-resolves within seconds to minutes. Monitor patterns to identify systemic issues.

## Related Errors

• **[50000 - Internal Server Error](https://help.ably.io/error/50000)**  
  General server errors that may precede or follow timeout issues

• **[50003 - Internal Timeout](https://help.ably.io/error/50003)**  
  Related internal timeout scenarios within Ably services

• **[80014 - Connection Timeout](https://help.ably.io/error/80014)**  
  Connection-level timeouts that differ from gateway timeouts

## Related Resources

- [Connection state management](https://ably.com/docs/realtime/connection)
- [Ably system status](https://status.ably.com)
- [Network and transport documentation](https://ably.com/docs/connect)
- [Event emitters in Ably SDKs](https://ably.com/docs/api/realtime-sdk)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 50400
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 50400)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/50400-gateway-timeout.mdx (enhanced from previous version)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No FAQ content existed for this error
- Content Excluded: Internal Slack references (not relevant to customers), detailed coordinator restart procedures
- Recommendations Source: 
  - Resolution steps based on known production incidents from knowledge file lines 31-97
  - Automatic handling from Ably connection recovery documentation and analysis file lines 35-46
  - Event listener optimization from knowledge file lines 57-62
- Code Examples Rationale: 
  - Monitoring code included because essential for detecting persistent issues (based on production patterns)
  - Event listener management included because it's a common cause and has a clear solution per knowledge file lines 57-62
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on analysis findings in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 23-29
  - Cause 2: From production incidents at https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 31-54
  - Cause 3: From internal discussions at https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 57-63
  - Cause 4: From analysis at https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 64-68
- Resolution Steps: 
  - Step 1: Source from https://ably.com/docs/realtime/connection#connection-state-recovery and https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 30-31
  - Step 2: Recovery guidance from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 9-13  
  - Step 3: Event listener optimization from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-knowledge.md lines 57-62
  - Step 4: Implementation patterns from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50400-analysis.md lines 59-61
- Prevention: Based on analysis of common causes and production incidents
- Related Errors: Enhanced format with descriptions per writing guide requirements
-->

<!-- URL Validation Completed: 2025-08-25T19-44-21-128Z -->
<!-- External URLs verified: 10 | Corrected: 2 | Exempted internal: 2 -->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 50400
2. Regenerate: Run `./bin/ably-os errors document-error-codes 50400 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->