---
title: Presence
meta_description: ""
---

The `Presence` interface is used to enter and subscribe to the presence set of a chat room.

Access it via `room.presence`.

---

## Enter the presence set <a id="enter"/>

`room.presence.enter()`

Enters the client into the presence set. Will emit an `enter` event to all subscribers. Repeat calls will trigger `update` events.

`enter(data?: unknown): Promise<void>`

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `data` | *Optional* The user's data, a JSON serializable object that will be sent to all subscribers. | Unknown |

### Returns

Returns a promise. On success, the promise is fulfilled. On failure, the promise is rejected with an [`ErrorInfo`](/docs/chat/api/javascript/error-info).

Throws if:

* The room is not in the `attached` or `attaching` state.

<Code>
```javascript
await room.presence.enter({status: 'online', activity: 'viewing'});
```
</Code>

---

## Update presence data <a id="update"/>

`room.presence.update()`

Updates a client's presence `data`. Will emit an `update` event to all subscribers. If the client is not already in the presence set, it will be treated as an [`enter`](LINK) event.

`update(data?: unknown): Promise<void>`

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `data` | *Optional* The user's data, a JSON serializable object that will be sent to all subscribers. | Unknown |

### Returns

Returns a promise. On success, the promise is fulfilled. On failure, the promise is rejected with an [`ErrorInfo`](/docs/chat/api/javascript/error-info).

Throws if:

* The room is not in the `attached` or `attaching` state.

<Code>
```javascript
await room.presence.update({status: 'away', lastSeen: new Date()});
```
</Code>

---

## Leave the presence set <a id="leave"/>

`room.presence.leave()`

Removes the client from the presence set. Will emit a `leave` event to all subscribers. If the client is not already part of the presence set, it will be treated as a no-op.

`leave(data?: unknown): Promise<void>`

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `data` | *Optional* The user's data, a JSON serializable object that will be sent to all subscribers. | Unknown |

### Returns

Returns a promise. On success, the promise is fulfilled. On failure, the promise is rejected with an [`ErrorInfo`](/docs/chat/api/javascript/error-info).

Throws if:

* The room is not in the `attached` or `attaching` state.

<Code>
```javascript
await room.presence.leave({reason: 'User logged out'});
```
</Code>

---

## Get current presence members <a id="get"/>

`room.presence.get()`

Get a list of the current users in the presence set by returning the latest presence message for each.

`get(params?: RealtimePresenceParams): Promise<PresenceMember[]>`

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `params` | *Optional* Parameters that control how the presence set is retrieved. | [`RealtimePresenceParams`](#realtimepresenceparams) |

#### RealtimePresenceParams

Parameters for retrieving presence members.

It has the following properties:

| Properties | Description | Type |
| ---------- | ----------- | ---- |
| `waitForSync` | *Optional* Whether to wait for a full presence set synchronization between Ably and the clients on the channel before returning the results. Synchronization begins as soon as the channel is attached. When set to `true`, the results will be returned as soon as the sync is complete. When set to `false`, the current list of members will be returned without the sync completing. The default is `true`. | Boolean |
| `clientId` | *Optional* Filters the array of returned presence members for a specific client using its ID. | String |
| `connectionId` | *Optional* Filters the array of returned presence members for a specific connection. | String |

### Returns

Returns a promise. On success, the promise is fulfilled with an array of [`PresenceMember`](#presencemember). On failure, the promise is rejected with an [`ErrorInfo`](/docs/chat/api/javascript/error-info).

#### PresenceMember

Represents a member in the presence set.

It has the following properties:

| Properties | Description | Type |
| ---------- | ----------- | ---- |
| `clientId` | The client ID of the presence member. | String |
| `data` | The data associated with the presence member. | Unknown |
| `extras` | The extras associated with the presence member. | Unknown |
| `updatedAt` | The timestamp when this presence member was last updated. | Number |

<Code>
```javascript
const members = await room.presence.get();
console.log(`${members.length} users present`);
```
</Code>

---

## Check if a user is present <a id="isUserPresent"/>

`room.presence.isUserPresent()`

Check if a user is part of the presence set using their `clientId`.

`isUserPresent(clientId: string): Promise<boolean>`

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `clientId` | The client ID to check if it is present in the room. | String |

### Returns

Returns a promise. On success, the promise is fulfilled with a boolean indicating whether the user is present. On failure, the promise is rejected with an [`ErrorInfo`](/docs/chat/api/javascript/error-info).

Throws if:

* The room is not in the `attached` or `attaching` state.

<Code>
```javascript
const isPresent = await room.presence.isUserPresent('user123');
if (isPresent) {
  console.log('User is currently in the room');
}
```
</Code>

---

## Subscribe to specific presence events <a id="subscribe"/>

`room.presence.subscribe()`

Subscribe the provided listener to a list of presence events.

Note: This requires presence events to be enabled via the `enableEvents` option in the [`PresenceOptions`](LINK) provided to the room. If this is not enabled, an error will be thrown.

`subscribe(eventOrEvents: PresenceEventType | PresenceEventType[], listener?: PresenceListener): Subscription`

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `eventOrEvents` | Single event name or array of events to subscribe to. | [`PresenceEventType`](#presenceeventtype) \| `PresenceEventType`[] |
| `listener` | *Optional* Listener to register. | [`PresenceListener`](#presencelistener) |

#### PresenceEventType

An enum that represents the types of presence events.

It has the following members:

| Member | Description |
| ------ | ----------- |
| `Enter` | A member has entered the presence set. |
| `Leave` | A member has left the presence set. |
| `Update` | A member has updated their presence data. |
| `Present` | Get the current presence set when subscribing. |

#### PresenceListener

A listener that listens for presence events.

`PresenceListener: (event: PresenceEvent) => void`

It uses the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `event` | A presence event. | [`PresenceEvent`](#presenceevent) |

#### PresenceEvent

Represents a presence event.

It has the following properties:

| Properties | Description | Type |
| ---------- | ----------- | ---- |
| `type` | The type of presence event. | [`PresenceEventType`](#presenceeventtype) |
| `member` | The presence member associated with the event. | [`PresenceMember`](#presencemember) |

### Returns

Returns a [`Subscription`](#subscription) object.

Throws an [`ErrorInfo`](/docs/chat/api/javascript/error-info) with `code` 40000 if:

* Presence events are not enabled.

<Code>
```javascript
const subscription = room.presence.subscribe(['enter', 'leave'], (presenceEvent) => {
  console.log(`${presenceEvent.member.clientId} ${presenceEvent.type} the room`);
});

// Unsubscribe when done
subscription.unsubscribe();
```
</Code>

#### Subscription

A response object that allows you to control the subscription.

It has the following properties:

| Property | Description | Type |
| -------- | ----------- | ---- |
| `unsubscribe` | A method to unsubscribe from room presence events. | `() => Promise<void>` |

---

## Subscribe to all presence events <a id="subscribeAll"/>

`subscribe(listener?: PresenceListener): Subscription`

Subscribe the provided listener to all presence events.

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `listener` | *Optional* Listener to subscribe. | [`PresenceListener`](#presencelistener) |

#### Returns

Returns a [`Subscription`](#subscription) object.

Throws an [`ErrorInfo`](/docs/chat/api/javascript/error-info) with code 40000 if:

* Presence events are not enabled.

<Code>
```javascript
const subscription = room.presence.subscribe((presenceEvent) => {
  console.log('Presence event:', presenceEvent.type, presenceEvent.member);
});
```
</Code>
