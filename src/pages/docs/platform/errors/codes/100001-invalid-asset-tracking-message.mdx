<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 100001 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Documenting Asset Tracking SDK protocol error with focus on message format requirements and recovery steps -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 100001: Invalid Asset Tracking message format

## What Happened
The Asset Tracking SDK received a message that doesn't match the expected format for location updates.

## Quick Reference
| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 100001 | 400 | Protocol Error (Asset Tracking) | No - requires fixing message format |

## Quick Fix
- Ensure all Asset Tracking messages are JSON strings
- Use SDK-provided methods for publishing location updates
- Verify publisher and subscriber SDK versions are compatible

## Error Messages

You may see one of these messages:
- "The SDK received a message in an unexpected format"
- "Received a non-string message for [raw/enhanced] event: [messageData]"
- "Received a malformed message for [raw/enhanced] event"

## Common Causes

1. **Non-string message data** (most common)
   - Publishing raw objects instead of JSON strings
   - Using direct channel publishing instead of SDK methods
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md lines 37-49 -->

2. **Malformed JSON** 
   - Invalid JSON syntax in message strings
   - Missing required fields in location update messages
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md lines 51-65 -->

3. **Protocol version mismatch**
   - Publisher and subscriber using incompatible SDK versions
   - Custom implementations not following Asset Tracking protocol
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 93-97 -->

## Resolution Steps

1. **Verify message format**
   - Asset Tracking messages must be JSON strings
   - Use SDK publishing methods, not direct Ably channel publishing
   - Messages must conform to `RawLocationUpdateMessage` or `EnhancedLocationUpdateMessage` schemas
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md lines 80-83 -->

2. **Use SDK-provided methods**
   - For publishers: Use Asset Tracking Publisher SDK methods
   - For subscribers: Use Asset Tracking Subscriber SDK methods
   - Avoid manual message construction
   <!-- Source: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 104-107 -->

3. **Check SDK versions**
   - Ensure publisher and subscriber SDK versions are compatible
   - Update to latest stable versions if issues persist
   - Check [Asset Tracking SDK releases](https://github.com/ably/ably-asset-tracking-swift/releases) for compatibility notes
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 93-97 -->

4. **Validate JSON structure**
   - Test JSON parsing before publishing
   - Include all required fields for location updates
   - Use typed message construction rather than string concatenation
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 99-102 -->

## Automatic Handling

When error 100001 occurs:
- The Asset Tracking subscriber transitions to a failed state
- The trackable connection is automatically disconnected
- No automatic retry occurs - manual intervention required
- You must fix the message format and reconnect
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md lines 74-77 -->

## Prevention

- **Type safety**: Use SDK-provided message types rather than raw JSON
- **Version management**: Maintain consistent SDK versions across publisher and subscriber
- **Schema validation**: Implement message validation in development environments
- **Testing**: Include protocol error scenarios in integration tests
<!-- Source: Knowledge recommendations from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 109-115 -->

## Related Resources
- [Asset Tracking documentation](https://ably.com/docs/asset-tracking)
- [Asset Tracking Swift SDK](https://github.com/ably/ably-asset-tracking-swift)
- [Asset Tracking protocol specification](https://github.com/ably/ably-asset-tracking-common/tree/main/specification)
- Related errors: Other Asset Tracking errors in the 100xxx range

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 100001
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 100001)
- Existing Documentation: None found
- Repository Overviews: Not used (sufficient context in research files)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No FAQ content available for 100001 (error not documented in FAQ system per knowledge file line 18)
- Content Excluded: Infrastructure log references to "100001" in unrelated contexts (knowledge file lines 57-66)
- Recommendations Source: Based on Asset Tracking SDK code analysis and common resolution patterns
- Code Examples Rationale: No code examples included as SDK methods are well-documented and linking is more appropriate
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on analysis findings in https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md lines 37-49
  - Cause 2: From SDK code at https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md lines 51-65
  - Cause 3: From knowledge patterns in https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 93-97
- Resolution Steps: 
  - Step 1: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-analysis.md lines 80-83 - based on protocol requirements
  - Step 2: Knowledge advice from https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 104-107 - SDK usage patterns
  - Step 3: From https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 93-97 - version compatibility
  - Step 4: From https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 99-102 - JSON validation
- Prevention: Based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/100001-knowledge.md lines 109-115 technical prevention strategies
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Detailed Asset Tracking message format specifications in main docs
- Impact: Developers must refer to GitHub specifications rather than main documentation
- Recommendation: Add message format examples to Asset Tracking documentation
- Severity: Medium (developers can find info but requires GitHub navigation)
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 100001
2. Regenerate: Run `./bin/ably-os errors document-error-codes 100001 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->