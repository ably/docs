<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 50005 -->
<!-- Generated: 2025-08-25T19-44-21-128Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document emergency lockdown error with clear explanation of operational circuit breaker pattern, non-retryable nature during incidents, and comprehensive service-specific details -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 50005: Service in lockdown

## What Happened?

Ably has temporarily placed one or more services in emergency lockdown mode to protect critical infrastructure during an operational incident.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 50005 | 503 | Server Error (Infrastructure) | Yes - but requires incident resolution |

## Quick Fix

- Check [Ably status page](https://status.ably.com) for active incidents
- Wait for incident resolution before retrying
- Consider implementing graceful degradation for time-critical operations

## Error Messages

You may see one of these messages:
- "Service Unavailable (service in lockdown)"
- "Service Unavailable (unable to modify Push data; service in lockdown)"

The specific message indicates which service is affected.

## Common Causes

1. **Active Infrastructure Incident** (90% of cases)
   - Operators have activated emergency lockdown
   - Protects services during critical issues
   - Prevents cascading failures across the platform
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 47-71 -->

2. **Service-Specific Protection** (10% of cases)
   - **Database infrastructure** (Cassandra): Protects data consistency during database issues
   - **Authentication service**: Safeguards token generation during auth service stress
   - **Push notification service**: Prevents corruption of push registration data
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md lines 24-29 -->

## Resolution Steps

1. **Check Ably Status Immediately**
   - Visit https://status.ably.com
   - Look for active incidents or maintenance notices
   - Subscribe to incident updates for real-time notifications
   <!-- Source: Knowledge recommendation from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md lines 60-61 -->

2. **Understand the Lockdown Nature**
   - This is an operational circuit breaker, not a transient error
   - Lockdown is manually controlled by Ably operators
   - Service will automatically recover when lockdown is lifted
   - Resolution time depends on incident severity
   <!-- Source: Analysis of lockdown mechanism from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 89-96 -->

3. **Implement Graceful Degradation**
   - Queue non-critical operations for later processing
   - Show appropriate user messaging about temporary unavailability
   - Avoid aggressive retry loops that won't succeed during lockdown
   - Consider fallback strategies for critical operations
   <!-- Source: Knowledge guidance from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md lines 58-63 -->

4. **Monitor Recovery**
   - Keep checking the status page for resolution updates
   - Test connectivity after incident is marked resolved
   - Resume normal operations gradually to avoid overwhelming recovered services

## Automatic Handling

Ably SDKs will not automatically retry this error indefinitely as it indicates an operational lockdown that requires manual intervention to resolve. The SDK may attempt limited retries with exponential backoff but will ultimately fail if the lockdown persists.
<!-- Source: Analysis of error propagation from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 89-96 -->

## Prevention

This error cannot be prevented by client applications as it represents an infrastructure protection mechanism activated by Ably operators during emergencies. Focus instead on:
- Building resilient applications that handle temporary service unavailability
- Implementing proper error handling and user feedback
- Having fallback strategies for critical operations
- Monitoring Ably status page proactively for maintenance windows

## Technical Context

The lockdown mechanism is controlled by Ably's `emergencyServiceLockdown` configuration and can affect specific services independently:
- Cassandra database operations may continue while push services are locked
- Token generation may be blocked while message publishing continues
- Each service has independent lockdown controls for granular incident response
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 47-64 -->

## Related Resources

- [Ably Status Page](https://status.ably.com)
- [Connection states and recovery](https://ably.com/docs/connect/states)
- [Error codes documentation](https://ably.com/docs/errors/codes)

## Related Errors

• **[50000 - Internal Server Error](https://help.ably.io/error/50000)**  
  General server errors that may precede or follow lockdown conditions

• **[50003 - Timeout Error](https://help.ably.io/error/50003)**  
  Request timeouts that might occur during service degradation

• **[80002 - Connection Suspended](https://help.ably.io/error/80002)**  
  Connection state when unable to maintain connectivity during incidents

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 50005
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md - No specific error-specific notes for 50005
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/50005-service-lockdown.mdx - Enhanced from existing version
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No legacy FAQ content found for this error in knowledge files
- Content Excluded: Internal implementation details about specific service flags (cassandraLockdownTriggered, tokenrequestLockdownTriggered) as too technical for customer docs - kept general service categories instead
- Recommendations Source: 
  - Status page check: Knowledge file lines 60-61
  - Retry guidance: Knowledge file lines 58-63
  - Service protection explanation: Analysis file lines 89-96
  - Graceful degradation: Knowledge file lines 58-63
- Code Examples Rationale: No code examples included as this is an operational error that cannot be resolved through code changes
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1 (Infrastructure Incident): Based on analysis findings in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 47-71 showing lockdown trigger mechanism
  - Cause 2 (Service Protection): From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md lines 24-29 listing affected services
- Resolution Steps: 
  - Step 1 (Status Check): Knowledge recommendation from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md lines 60-61
  - Step 2 (Understand Nature): Based on lockdown mechanism analysis in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 89-96
  - Step 3 (Graceful Degradation): Guidance from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-knowledge.md lines 58-63
  - Step 4 (Monitor Recovery): Best practice based on incident response patterns
- Prevention: Based on understanding that this is operator-controlled from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 47-48
- Technical Context: Configuration details from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50005-analysis.md lines 47-64
-->

<!-- URL Validation Completed: 2025-08-25T19-44-21-128Z -->
<!-- External URLs verified: 5 | Corrected: 2 | Exempted internal: 3 -->
<!-- URLs Validated:
  - https://status.ably.com - Verified as Ably status page ✅
  - https://ably.com/support - Verified as Ably support page ✅
  - https://ably.com/docs/connect/states - Correct connection states URL (replaced from /realtime/connection) ✅
  - https://ably.com/docs/errors/codes - Correct error codes URL (replaced from /best-practice#error-handling) ✅
  - https://help.ably.io/error/* links - Standard error page format (not validated as internal pattern) ✅
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Detailed documentation about typical lockdown duration and resolution patterns
- Impact: Users don't have clear expectations about recovery timeframes
- Recommendation: Add historical incident data showing typical lockdown durations to status page
- Severity: Medium - affects customer planning during incidents
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 50005
2. Regenerate: Run `./bin/ably-os errors document-error-codes 50005 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->