---
title: Using the REST API
intro: "LiveObjects provides a comprehensive REST API that enables you to directly work with objects without using a client SDK."
meta_description: "Learn how to work with Ably LiveObjects using the REST API"
---

<Aside data-type='experimental'>
LiveObjects is currently Experimental. Its features are still in development and subject to rapid change.

**Building with LiveObjects?** Help shape its future by [sharing your use case](https://44qpp.share.hsforms.com/2fZobHQA1ToyRfB9xqZYQmQ).
</Aside>

## Authentication <a id="authentication"/>

View the REST API [authentication](/docs/api/rest-api#authentication) documentation for details on how to authenticate your requests.

To use LiveObjects, an API key must have at least the `object-subscribe` capability. With only this capability, clients will have read-only access, preventing them from publishing operations.

In order to create or update objects, make sure your API key includes both `object-subscribe` and `object-publish` [capabilities](/docs/auth/capabilities) to allow full read and write access.

## Data values <a id="data-values"/>

When working with objects via the REST API, [primitive types](/docs/liveobjects/concepts/objects#primitive-types) and [object references](/docs/liveobjects/concepts/objects#composability) are included in request and response bodies under `data` fields.

The key in the `data` object indicates the type of the value:

<Code>
```json
{ "data": { "number": 42 } }
{ "data": { "string": "LiveObjects is awesome" } }
{ "data": { "boolean": true } }
{ "data": { "bytes": "TGl2ZU9iamVjdHMgaXMgYXdlc29tZQo=" } }
{ "data": { "objectId": "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669" } }
```
</Code>

<Aside data-type='note'>
`bytes` values use base64 string encoding in JSON request and response bodies.
</Aside>

## Fetch the channel object <a id="fetch-object"/>

### Get the entire object <a id="fetching-object-get"/>

The following request returns the entire channel object.

<Code>
```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}}
```
</Code>

This endpoint returns the compact representation of the channel object.

<Code>
  ```json
  {
    "votes": {
      "down": 10,
      "up": 5,
    }
  }
  ```
</Code>

Each instance of an [object type](/docs/liveobjects/concepts/objects#object-types) included is the response is counted as one billable message.

#### Get the entire object with metadata <a id="fetching-object"/>

You can optionally include additional object [metadata](/docs/liveobjects/concepts/objects#metadata) in the response by specifying the `compact=false` query option:
<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object?compact=false" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "objectId": "root",
    "map": {
      "semantics": "LWW",
      "entries": {
        "votes": {
          "data": {
            "objectId": "map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692",
            "map": {
              "semantics": "LWW",
              "entries": {
                "down": {
                  "data": {
                    "objectId": "counter:Yj1F_aEX3T2rRkTkra7Aifmlr8PxUWSR3kO3MzxtQto@1760448653393",
                    "counter": {
                      "data": {
                        "number": 5
                      }
                    }
                  }
                },
                "up": {
                  "data": {
                    "objectId": "counter:ibxddWpDjH8R3cvXWWacfe4IVd3DxT_oqkAafhaS68s@1760448646413",
                    "counter": {
                      "data": {
                        "number": 10
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
}

  ```
</Code>

### Query the object by path <a id="fetch-object-with-path"/>

You can return a subset of the channel object by specifying the `path` query param. For example, to return just the `votes` `LiveMap` instance from the root object:

<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object?path=votes" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "down": 5,
    "up": 10
  }
  ```
</Code>

Each instance of an [object type](/docs/liveobjects/concepts/objects#object-types) included is the response is counted as one billable message.

### Get an object by id <a id="fetch-object-get-by-id"/>

To fetch a specific instance of an object type on the channel you can specify the object ID in the URL path:

<Code>
```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object/map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692" \
    -u {{API_KEY}}
```
</Code>

This endpoint supports the `path` and `compact` query options. Note that the path is evaluated relative to the specified object instance.

<Code>
  ```json
  {
    "down": 5,
    "up": 10
  }
  ```
</Code>

The full object response can be retrieved by providing the `compact=false` query param.

<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object/map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692?compact=false" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "objectId": "map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692",
    "map": {
      "semantics": "LWW",
      "entries": {
        "down": {
          "data": {
            "objectId": "counter:Yj1F_aEX3T2rRkTkra7Aifmlr8PxUWSR3kO3MzxtQto@1760448653393",
            "counter": {
              "data": {
                "number": 5
              }
            }
          }
        },
        "up": {
          "data": {
            "objectId": "counter:ibxddWpDjH8R3cvXWWacfe4IVd3DxT_oqkAafhaS68s@1760448646413",
            "counter": {
              "data": {
                "number": 10
              }
            }
          }
        }
      }
    }
  }
  ```
</Code>


The `path` param can also be provided here to return a subset of the channel object starting from the specified object ID.

<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object/map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692?path=votes" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "down": 5,
    "up": 10
  }
  ```
</Code>

Each instance of an [object type](/docs/liveobjects/concepts/objects#object-types) included is the response is counted as one billable message.

### Cyclic references <a id="fetching-objects-get-cycles"/>

For both the full object and the compact response formats cyclic references in the channel object will be included as a
reference to the object ID rather than including the same object instance in the response more than once.

For example, if we created a cycle in the channel object by adding a reference to the root object in the `votes` `LiveMap` instance with the following operation:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_SET",
      "objectId": "map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692",
      "data": {"key": "myRoot", "value": {"objectId": "root"}}
    }'
```
</Code>

The response will handle the cyclic reference by including the `myRoot` key in the response as a reference to the object ID of the root object:

<Code>
```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}}
```
</Code>

<Code>
  ```json
  {
    "votes": {
      "down": 5,
      "up": 10
      "myRoot": {
        "objectId": "root"
      },
    }
  }
  ```
</Code>

## Publishing operations <a id="publishing-operations"/>

All operations are published to the same endpoint. The request body specifies:

* The type of operation to publish
* The object(s) to which the operation should be applied
* The operation payload

The request body is of the form:

<Code>
```json
{
  "operation": "<operationType>",
  "objectId": "<objectId>",
  "path": "<path>",
  "data": "<data>"
}
```
</Code>

Example setting a key on the channel object:

<Code>
  ```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_SET",
      "path": "",
      "data": {
        "key" : "myKey",
        "value": {"string": "myValue"}
      }
    }'
  ```
</Code>


The `operationType` is a string that specifies the type of operation to publish and must be one of:

| Operation | Description |
| --------- | ----------- |
| `MAP_CREATE` | Creates LiveMap object. |
| `MAP_SET` | Set the value of a key in a LiveMap object. |
| `MAP_REMOVE` | Tombstone a key in a LiveMap object. |
| `COUNTER_CREATE` | Creates a LiveCounter object. |
| `COUNTER_INC` | Increments or decrements the value of a LiveCounter object. |

<Aside data-type='note'>
There is no explicit `COUNTER_DEC` operation. To decrement a counter, use the `COUNTER_INC` operation with a negative number.
</Aside>

Either the `objectId` or `path` fields are used to specify the target object(s) for the operation.

The operation payload is provided in the `data` in accordance with the specified operation type.

Each published operation counts as one billable message.

### Update a specific object instance <a id="updating-objects-by-id"/>

To perform operations on a specific object instance, you need to provide its object ID in the request body:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
      "data": {"number":1}
    }'
```
</Code>

The response includes the ID of the published operation message, the channel and a list of object IDs that were affected by the operation:

<Code>
```json
{
  "messageId": "TJPWHhMTrF:0",
  "channel": "my-channel",
  "objectIds": ["counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269"]
}
```
</Code>

### Update an object by path <a id="updating-objects-by-path"/>

Path operations provide a convenient way to target objects based on their location in the channel object.

Paths are expressed relative to the structure of the object as defined by the [compact](#fetching-object-get) view of the channel object.

For example, given the following compact view of the channel object:

The following example increments the `LiveCounter` instance stored at the `up` key on the `votes` `LiveMap` object:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "votes.up",
      "data": { "number": 1 }
    }'
```
</Code>

<Aside data-type='important'>
When using path operations, the `objectId`s of the target objects are resolved by the server at the time the request is received.

The operation is applied to these specific object instances. If the object instances located at that specified path change before the operation is processed, due to concurrent updates from other clients, the operation will not be applied to the new object instances.
</Aside>

You can use wildcards in paths to target multiple objects at once. To increment all `LiveCounter` instances in the `votes` `LiveMap` instance:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "votes.*",
      "data": { "number": 1 }
    }'
```
</Code>

The response includes the IDs of each of the affected object instances:

<Code>
```json
{
  "messageId": "0Q1w-LpA11:0",
  "channel": "my-channel",
  "objectIds": [
    "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
    "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669"
  ]
}
```
</Code>

Wildcards can be included at the end or in the middle of paths and will match exactly one level in the channel object. For example, given the following compact view of the channel object:

<Code>
```json
{
  "posts": {
    "post1": {
      "votes": {
        "up": 5,
        "down": 10
      }
    },
    "post2": {
      "votes": {
        "up": 5,
        "down": 10
      }
    }
  }
}
```
</Code>

The following example increments the upvote `LiveCounter` instances for all posts in the `posts` `LiveMap` instance:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "posts.*.votes.up",
      "data": { "number": 1 }
    }'
```
</Code>

If your `LiveMap` keys contain periods, you can escape them with a backslash. The following example increments the upvote `LiveCounter` instance for a post with the key `post.123`:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "posts.post\.123.votes.up",
      "data": { "number": 1 }
    }'
```
</Code>

### Creating objects <a id="creating-objects"/>

Use the `MAP_CREATE` and `COUNTER_CREATE` operations to create new objects. You can optionally specify an initial value for the object in the `data` field when creating it.

For `MAP_CREATE`, the `data` field should be a JSON object that contains the initial entries for the `LiveMap` instance:

<Code>
```json
{
  "operation": "MAP_CREATE",
  "data": {
    "title": {"string": "LiveObjects is awesome"},
    "createdAt": {"number": 1745835181122},
    "isPublished": {"boolean": true}
  }
}
```
</Code>

For `COUNTER_CREATE`, the `data` field should be a JSON object that contains the initial value for the `LiveCounter` instance:

<Code>
```json
{
  "operation": "COUNTER_CREATE",
  "data": { "number": 5 }
}
```
</Code>

When you create a new object it is important that the new object instance is assigned to the channel object so that it is [reachable](/docs/liveobjects/concepts/object#reachability).

The simplest way to do this is to use the `path` field in the request body. The path is relative to the root object and specifies where in the channel object the new object should be created.

The following example creates a new `LiveMap` instance and assigns it to the `posts` `LiveMap` instance on the root object under the key `post1`:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_CREATE",
      "path": "posts.post1",
      "data": {
        "title": {"string": "LiveObjects is awesome"},
        "createdAt": {"number": 1745835181122},
        "isPublished": {"boolean": true}
      }
    }'
```
</Code>

The following example shows how to update a key and value in a `LiveMap`:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_SET",
      "path": "posts.post1",
      "data": {
        "key" : "title",
        "value": {"string": "LiveObjects is still awesome"}
      }
    }'
```
</Code>

When using the `path` specifier with a `COUNTER_CREATE` or `MAP_CREATE` operation, the server constructs *two* operations which are published as a [batch](#batch-operations):

* A `MAP_CREATE` or `COUNTER_CREATE` operation used to create the new object
* A `MAP_SET` operation used to assign the new object to the `LiveMap` instance specified by the `path`

Therefore the response will include the object IDs of all objects affected by the resulting set of operations:

<Code>
```json
{
  "messageId": "mkfjWU2jju:0",
  "channel": "my-channel",
  "objectIds": [
    "map:cRCKx-eev7Tl66jGfl1SkZh_uEMo6F5jyV0B7mUn4Zs@1745835549101",
    "map:a_oQqPYUGxi95_Cn0pWcsoeBlHZZtVW5xKIw0hnJCZs@1745835547258"
  ]
}
```
</Code>

### Removing objects <a id="removing-objects"/>

There is no explicit delete operation for objects themselves. Objects that are not reachable from the root map will be eligible for garbage collection.

Remove a reference to a nested object in a `LiveMap` instance using the `MAP_REMOVE` operation:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_REMOVE",
      "objectId": "root",
      "data": {"key": "posts"}
    }'
```
</Code>

If no other references to the object exist, it will no longer be reachable from the root object and will be eligible for garbage collection.

<Aside data-type='note'>
Removing the nested object may also make any nested child objects unreachable from the root object. These objects will also be eligible for garbage collection.
</Aside>

### Batch operations <a id="batch-operations"/>

You can group several operations into a single request by sending an array of operations.

All operations inside the array form a [batch operation](/docs/liveobjects/concepts/operations#batch-operations) which is published as a single message. All operations in the batch are processed as a single atomic unit. Batch operations therefore count as one billable message.

The following example shows how to increment two distinct `LiveCounter` instances in a single batch operation:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '[
      {
        "operation": "COUNTER_INC",
        "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
        "data": {"number": 1}
      },
      {
        "operation": "COUNTER_INC",
        "objectId": "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669",
        "data": {"number": 1}
      }
    ]'
```
</Code>

### Idempotent operations <a id="idempotent-operations"/>

Publish operations idempotently in the same way as for [idempotent message publishing](/docs/api/rest-api#idempotent-publish) by specifying an `id` for the operation message:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "id": "my-idempotency-key",
      "operation": "COUNTER_INC",
      "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
      "data": {"number": 1}
    }'
```
</Code>

For batch operations, use the format `<baseId>:<index>` where the index is the zero-based index of the operation in the array:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '[
      {
        "id": "my-idempotency-key:0",
        "operation": "COUNTER_INC",
        "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
        "data": {"number": 1}
      },
      {
        "id": "my-idempotency-key:1",
        "operation": "COUNTER_INC",
        "objectId": "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669",
        "data": {"number": 1}
      }
    ]'
```
</Code>
