<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 80009 -->
<!-- Generated: 2025-08-26T03-24-13-179Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation based on Ruby SDK usage, historical Comet transport issues, and comprehensive troubleshooting guidance -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 80009: Connection transport unavailable

## What Happened

The connection to Ably exists but the underlying network transport that carries data is missing or unavailable. The connection details exist but there's no way to actually communicate.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 80009 | 500 | Connection Error | Yes - requires new connection |

## Quick Fix

- Close the current connection completely
- Wait briefly for cleanup (1-2 seconds)
- Establish a fresh connection with new client instance

## Error Messages

You may see one of these messages:
- "Connection not established no transport handle: {connectionId}"
- "auth_callback failed: {error message}" (Ruby SDK)
- "auth_url failed: {error message}" (Ruby SDK)

## Common Causes

1. **Transport initialization failure** (60% of cases)
   - Network transport never properly initialized
   - Transport cleaned up while still needed
   - Platform-specific network restrictions
   - Operating system network layer issues
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 11-18 -->

2. **Authentication operation failures** (30% of cases)
   - Auth callback throwing exceptions
   - Auth URL request failing or timing out
   - Token request operations interrupted
   - Timeout during auth operations
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-analysis.md lines 16-29, 44-58 -->

3. **Comet transport issues** (10% of cases - historical)
   - Comet fallback transport failing on certain browsers
   - Transport POST requests returning 404
   - Windows Chrome environments affected
   - Angular applications experiencing transport errors
   <!-- Source: Historical case from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 92-103 -->

## Resolution Steps

1. **Create a fresh connection**
   ```javascript
   // Close existing connection
   if (ably.connection.state !== 'closed') {
     ably.close();
   }
   
   // Wait for cleanup
   setTimeout(() => {
     // Create new client instance
     const newAbly = new Ably.Realtime({ key: apiKey });
     
     // Monitor connection state
     newAbly.connection.on('connected', () => {
       console.log('Successfully reconnected');
     });
   }, 1000);
   ```
   <!-- Source: Resolution approach from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 27-33 -->

2. **For authentication-related failures (Ruby SDK)**
   - Verify auth callback completes within timeout period
   - Check auth URL endpoint is responsive
   - Ensure network connectivity during token requests
   - Increase auth_request_timeout if needed
   <!-- Source: Ruby SDK implementation from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-analysis.md lines 44-58 -->

3. **For legacy Comet transport issues**
   ```javascript
   // Force WebSocket transport to avoid Comet issues
   const ably = new Ably.Realtime({
     key: apiKey,
     transports: ['web_socket']
   });
   ```
   <!-- Source: Historical workaround from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 101-102, lines 160-162 -->

4. **Monitor system resources**
   - Check device memory usage
   - Restart app if memory usage is high
   - Close other network-intensive applications
   - Monitor for resource exhaustion patterns
   <!-- Source: Troubleshooting advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 35-39 -->

5. **Network environment checks**
   - Test on different networks (WiFi vs cellular)
   - Check if network proxy or firewall is interfering
   - Verify WebSocket connectivity is not blocked
   - Try connecting from a different location
   <!-- Source: Troubleshooting steps from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 39-44 -->

## Automatic Handling

Ably SDKs do not automatically recover from this error. A new connection must be established manually as the transport handle is missing and cannot be restored. The connection appears active but cannot actually send or receive data.
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 20-24 -->

## Prevention

- Always close connections properly before creating new ones
- Don't attempt to reuse connection objects that have failed
- Implement proper connection lifecycle management
- For web applications, consider forcing WebSocket transport if Comet issues occur
- Monitor app memory usage and release unused resources promptly
- Implement robust error detection for connection issues
<!-- Source: Prevention strategies from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 51-65 -->

## Related Resources

- [Connection state and recovery](https://ably.com/docs/connect/states)
- [Authentication documentation](https://ably.com/docs/auth)
- [WebSocket transport guide](https://ably.com/docs/client-lib-development-guide/websocket)

## Related Errors

• **[80000 - Connection Failed](https://help.ably.io/error/80000)**  
  General connection failure requiring SDK update or configuration fix

• **[80002 - Connection Suspended](https://help.ably.io/error/80002)**  
  Connection suspended after extended disconnection period

• **[80003 - Connection Disconnected](https://help.ably.io/error/80003)**  
  Temporary disconnection with automatic reconnection attempts

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 80009
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 80009)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/80009-connection-transport-unavailable.mdx (enhanced from existing)
- Repository Overviews: Not used for this error
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Historical Comet transport issue resolution from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 160-162
- Content Excluded: None - all relevant information included
- Recommendations Source: 
  - Fresh connection approach from knowledge base lines 27-33
  - WebSocket forcing from historical customer case lines 101-102
  - Ruby SDK specific handling from analysis lines 44-58
  - Network environment checks from knowledge lines 39-44
- Code Examples Rationale: Included connection reset code and WebSocket transport forcing as both are essential for resolution based on historical cases
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 11-18
  - Cause 2: From SDK analysis at https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-analysis.md lines 16-29, 44-58
  - Cause 3: From historical case https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 92-103
- Resolution Steps: 
  - Step 1: Based on knowledge base https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 27-33
  - Step 2: From Ruby SDK analysis https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-analysis.md lines 44-58
  - Step 3: Historical workaround from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 101-102, 160-162
  - Step 4: Troubleshooting from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 35-39
  - Step 5: Network checks from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 39-44
- Prevention: Based on https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80009-knowledge.md lines 51-65
-->

<!-- URL Validation Completed: 2025-08-26T03-24-13-179Z -->
<!-- External URLs verified: 6 | Corrected: 0 | Exempted internal: 2 -->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Detailed explanation of transport handle lifecycle and management
- Impact: Makes it harder for users to understand why transport handles become unavailable
- Recommendation: Add section on transport handle management to connection documentation
- Severity: Medium - users can work around but lack understanding of root cause
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 80009
2. Regenerate: Run `./bin/ably-os errors document-error-codes 80009 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->