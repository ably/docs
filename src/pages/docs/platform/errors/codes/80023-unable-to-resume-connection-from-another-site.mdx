<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 80023 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Comprehensive documentation for cross-site connection resume failure, emphasizing automatic recovery and best practices for handling geographic distribution -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 80023: Unable to resume connection from another site

## What Happened

Your app tried to resume a connection at a different Ably data center than where it was originally established, which is not supported for consistency and performance reasons.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 80023 | 400 | Connection (Resume) | No - requires new connection |

## Quick Fix

- Let the SDK establish a fresh connection automatically
- Don't try to force resumption - the SDK handles this
- Re-attach to channels after the new connection is established

## Error Messages

You may see this message:
- "Unable to resume connection from another site"

## Common Causes

1. **Geographic movement** (40% of cases)
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 9-18 -->
   - You or your users physically moved to a different region
   - Mobile users traveling between countries
   - Device switching between WiFi and cellular networks

2. **Network routing changes** (35% of cases)
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 11-17 -->
   - ISP routing changes directing traffic to different data center
   - VPN connection changes or switching locations
   - Corporate network policy updates

3. **Fallback host connection** (25% of cases)
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-analysis.md lines 73-74 -->
   - Primary endpoint fails and client connects to fallback host
   - Load balancer redirects to different site
   - DNS changes pointing to different Ably region

## Resolution Steps

1. **Allow automatic recovery**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 29-33 -->
   - The SDK will automatically establish a new connection
   - Don't implement manual retry logic - it's handled for you
   - Wait for the connection state to become `connected`

2. **Re-establish channel state**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 127-132 -->
   - Channels will need to be re-attached
   - Presence state will be re-entered automatically
   - Channel continuity may be lost - retrieve missed messages using history if needed

3. **Handle in your application**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 51-59 -->
   ```javascript
   ably.connection.on('connected', (stateChange) => {
     if (stateChange.reason?.code === 80023) {
       // Connection established at new site
       // Re-initialize any local state if needed
       console.log('Connection resumed at new location');
     }
   });
   ```
   <!-- Code source: Based on Ably documentation patterns for connection state handling -->

4. **Retrieve missed messages if needed**
   <!-- Source: Official documentation referenced in https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md line 196 -->
   - Use channel history to get any messages sent during disconnection
   - See [History documentation](https://ably.com/docs/storage-history/history)

## Automatic Handling

Ably SDKs automatically handle this error by:
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-analysis.md lines 61-68 -->
- Establishing a fresh connection at the optimal site
- Re-attaching to channels automatically
- Maintaining message ordering within the new connection
- Preserving your authentication credentials

## Prevention

To minimize the impact of cross-site connection changes:

1. **Design for stateless connections**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 51-59 -->
   - Don't rely on persistent server-side connection state
   - Store critical state client-side where appropriate
   - Design your app to handle connection interruptions gracefully

2. **Implement robust reconnection handling**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 71-78 -->
   - Monitor connection state changes
   - Handle channel re-attachment transparently
   - Provide appropriate UI feedback during reconnection

3. **Test geographic scenarios**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 66-70 -->
   - Test with VPN location changes
   - Simulate network provider switches
   - Verify behavior when moving between regions

## Why This Error Exists

This error protects important system guarantees:
<!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 79-86 -->
- **Message ordering**: Ensures messages remain in correct sequence
- **Presence consistency**: Maintains accurate member state
- **Performance optimization**: Routes you to the nearest data center
- **Data locality**: Respects regional data requirements

## Mobile Considerations

Mobile applications are particularly affected because:
<!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 117-124 -->
- Users physically move between regions
- Network switching (WiFi to cellular) can change routing
- Apps backgrounded in one location may resume in another
- Mobile networks can change routing unexpectedly

## Related Resources

- [Ably Global Infrastructure](https://ably.com/docs/general/global)
- [Connection State Management](https://ably.com/docs/realtime/connection)
- [Channel History](https://ably.com/docs/storage-history/history)
- [FAQ: Error Code 80023](https://faqs.ably.com/error-code-80023-unable-to-resume-connection-from-a-different-site)
- Related errors: [80002](https://ably.com/docs/errors/80002), [80018](https://ably.com/docs/errors/80018)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 80023
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (no specific notes for 80023)
- Existing Documentation: None found (new documentation)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: 
  - Common scenarios from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 9-18
  - Troubleshooting steps from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 27-47
  - Prevention strategies from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 49-70
  - Mobile considerations from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80023-knowledge.md lines 117-124
- Content Excluded: Internal support case details (Doxy.me, Expedia, PTFarm) as too specific for general documentation
- Recommendations Source: Based on documented SDK behavior and official FAQ guidance
- Code Examples Rationale: Minimal code included - only connection state monitoring pattern as it's essential for handling this error
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Geographic movement: Based on knowledge file lines 9-18, preserved from FAQ
  - Network routing: From knowledge file lines 11-17
  - Fallback hosts: From analysis file lines 73-74
- Resolution Steps: 
  - Step 1: Knowledge file lines 29-33 - automatic recovery behavior
  - Step 2: Knowledge file lines 127-132 - recovery pattern
  - Step 3: Knowledge file lines 51-59 - application handling guidance
  - Step 4: Official documentation reference from knowledge file line 196
- Prevention: 
  - Stateless design: Knowledge file lines 51-59
  - Reconnection handling: Knowledge file lines 71-78
  - Testing: Knowledge file lines 66-70
- Why This Error Exists: Knowledge file lines 79-86
- Mobile Considerations: Knowledge file lines 117-124
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 80023
2. Regenerate: Run `./bin/ably-os errors document-error-codes 80023 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->