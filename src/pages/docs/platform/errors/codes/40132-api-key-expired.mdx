<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 40132 -->
<!-- Generated: 2025-08-21T17-17-40-434Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Comprehensive resolution steps for expired API keys with emphasis on prevention, key rotation best practices, and monitoring -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 40132: API key expired

## What Happened

Your API key has reached its expiration date and can no longer be used for authentication with Ably services.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 40132 | 401 | Authentication (Key Management) | No - requires new API key |

## Quick Fix

- Generate a new API key in your Ably dashboard
- Replace the expired key in all applications and services
- Verify connections work with the new key

## Error Messages

You may see this error message:
- "Key expired"

## Common Causes

1. **Scheduled expiration** (80% of cases)
   - Key reached its predetermined expiration date
   - Time-based security policies automatically enforced
   - Automated key lifecycle management triggered expiration
   <!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 13-17 -->

2. **Forgotten renewal** (15% of cases)
   - Key expiration date not tracked or monitored
   - Manual renewal process overlooked
   - No calendar reminders or monitoring alerts configured
   <!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 19-23 -->

3. **Policy changes** (5% of cases)
   - Security compliance requirements shortened key lifetimes
   - Organizational key management policies updated
   - Retroactive policy changes affecting existing keys
   <!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 25-29 -->

## Resolution Steps

1. **Verify the expiration in your dashboard**
   - Log into your [Ably dashboard](https://ably.com/dashboard)
   - Navigate to your app â†’ "API Keys" tab
   - Identify the expired key and confirm its expiration date
   <!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 35-39 -->

2. **Generate a replacement API key**
   - Click "Create a new API key" in the dashboard
   - Configure the same capabilities as your expired key
   - Set an appropriate expiration date for the new key
   - Copy the complete key (including the app ID prefix)
   - Store the new key securely
   <!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 41-45 -->

3. **Update your applications**
   - Replace the expired key in all client applications
   - Update configuration files and environment variables
   - Deploy changes to all environments (development, staging, production)
   - Document the key change in your deployment logs
   <!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 47-51 -->

4. **Test the new key**
   - Verify connections work with the new key
   - Test all affected applications and services
   - Monitor for any authentication errors
   - Check that all integrations are functioning correctly
   <!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 53-57 -->

## Automatic Handling

This is an authentication error that will not be automatically retried by Ably SDKs. The connection will close when this error occurs, and you must provide a new, valid API key before attempting to reconnect. The SDK will not attempt to recover automatically as the key expiration is a permanent condition requiring manual intervention.
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-analysis.md lines 72-79 -->

## Prevention

To avoid API key expiration issues:

- **Set up monitoring**: Configure alerts for upcoming key expirations (30-60 days in advance)
- **Use calendar reminders**: Create recurring reminders before expiration dates
- **Implement key rotation**: Establish a regular key renewal schedule
- **Document expiration dates**: Maintain centralized records of all key expiration dates
- **Consider longer expiration periods**: Balance security requirements with operational convenience
- **Automate where possible**: Use automation tools for key rotation in non-production environments
<!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 59-65 -->

### Best Practices for Key Rotation

1. **Plan ahead**: Renew keys 30-60 days before expiration
2. **Stage deployments**: Update non-production environments first
3. **Monitor during rotation**: Watch for authentication errors during the transition
4. **Keep backup keys**: Have replacement keys ready for immediate use
5. **Update documentation**: Ensure all key references are updated
6. **Test thoroughly**: Verify all services after key rotation
<!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 67-75 -->

## Long-Running Applications

For applications that run continuously:
- Implement key refresh mechanisms before expiration
- Monitor for authentication errors proactively
- Set up automated restart procedures for key updates
- Consider using token authentication with automatic renewal for better key management
- Plan maintenance windows for key rotation if necessary
<!-- Source: Knowledge research finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 77-81 -->

## Connection State Impact

When this error occurs:
- The connection enters the `failed` state
- Automatic reconnection will NOT occur
- All channel subscriptions are terminated
- Presence members are removed
- You must create a new connection with valid credentials

Monitor connection state to detect this error:
```javascript
ably.connection.on('failed', (stateChange) => {
  if (stateChange.reason?.code === 40132) {
    console.log('API key expired - update credentials');
    // Implement key refresh logic
  }
});
```
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-analysis.md lines 72-79 -->

## Related Resources

- [API Key Management](https://ably.com/docs/auth/api-key)
- [Authentication Guide](https://ably.com/docs/auth)
- [Token Authentication](https://ably.com/docs/auth/token) (alternative to API keys)
- [Connection State Management](https://ably.com/docs/realtime/connection)
- Related errors: [40131 - Key revoked](./40131-key-revoked), [40133 - Key disabled](./40133-key-disabled)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 40132
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 40132)
- Existing Documentation: Enhanced from https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/40132-api-key-expired.mdx
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Key expiration monitoring and rotation best practices from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 59-81
- Content Excluded: Internal implementation details about KeyMap class and Logger.reportable() calls (lines 89-102 of knowledge file) - not relevant for customer resolution
- Content Excluded: Slack discussion references (lines 114-136 of knowledge file) - internal context only
- Recommendations Source: 
  - Resolution steps based on knowledge file lines 35-57
  - Prevention strategies from knowledge file lines 59-65
  - Key rotation best practices from knowledge file lines 67-75
  - Long-running application guidance from knowledge file lines 77-81
- Code Examples Rationale: Minimal code example included only for connection state monitoring (essential for detecting the error), linked to documentation for implementation details
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge file https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 13-17
  - Cause 2: From knowledge file https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 19-23
  - Cause 3: From knowledge file https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 25-29
- Resolution Steps: 
  - Step 1: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 35-39
  - Step 2: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 41-45
  - Step 3: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 47-51
  - Step 4: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 53-57
- Prevention: Based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-knowledge.md lines 59-81
- Automatic Handling: Based on integration test evidence from https://github.com/ably/ably-os/blob/main/output/error-codes/research/40132-analysis.md lines 72-79
- Connection State Impact: New section added based on analysis file findings about connection closure
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 40132
2. Regenerate: Run `./bin/ably-os errors document-error-codes 40132 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->