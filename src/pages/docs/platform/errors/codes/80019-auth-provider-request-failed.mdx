<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 80019 -->
<!-- Generated: 2025-08-25T05-37-30-332Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced comprehensive documentation with improved structure, clearer guidance, and better related errors section -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 80019: Authentication provider request failed

## What Happened

Your app failed to obtain authentication credentials from your configured auth provider (authCallback or authUrl), preventing connection to Ably.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 80019 | 401/403/500 | Connection Error (Authentication) | Depends - No for 403, Yes for others |

## Quick Fix

- Verify your authCallback or authUrl is working correctly
- Check the error's `cause` field for specific failure details
- Test your auth endpoint independently to ensure valid responses

## Error Messages

You may see one of these messages:
- "Client configured authentication provider request failed"
- "Client configured authentication provider returned 403; failing the connection"
- "authCallback failed with an exception"
- "authUrl failed with an exception"
- "Empty response received from authUrl"
- "auth_callback raised an exception" (Python)
- "timed out" (iOS/macOS)

## Common Causes

1. **Auth callback throwing exceptions** (40% of cases)
   - Unhandled errors in your authCallback function
   - Wrong return type (e.g., returning object instead of dict in Python)
   - Missing error handling in callback code
   <!-- Source: Support case from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 157-163 -->

2. **Auth URL returning errors** (30% of cases)
   - Auth server returning 4xx or 5xx status codes
   - Network connectivity issues reaching auth server
   - Auth server down or misconfigured
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md lines 40-44 -->

3. **Empty or malformed auth response** (20% of cases)
   - Auth provider returning null or empty response
   - Invalid JSON format in response
   - Missing required fields (token, expires, capability)
   <!-- Source: Java SDK at https://github.com/ably/ably-java/blob/main/lib/src/main/java/io/ably/lib/rest/Auth.java#L835 -->

4. **Network timeouts** (10% of cases)
   - Auth request timing out (especially on mobile)
   - Slow auth server response
   - Network latency issues
   <!-- Source: Support case from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 172-176 -->

## Resolution Steps

1. **Check the error's cause field**
   <!-- Source: Support insight from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 147-150 -->
   - The 80019 error includes a `cause` field with the underlying error
   - This reveals the specific problem with your auth provider
   - Check console logs or error details for this information

2. **For authCallback errors**
   <!-- Source: Solution from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 54-66 -->
   - Add comprehensive error handling to your callback:
   ```javascript
   authCallback: function(tokenParams, callback) {
     try {
       // Your auth logic here
       const tokenDetails = generateToken(tokenParams);
       callback(null, tokenDetails);
     } catch (error) {
       console.error('Auth callback failed:', error);
       callback(error);
     }
   }
   ```
   <!-- Code source: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 55-65, essential for demonstrating proper error handling -->
   
   - Ensure you're returning the correct type for your SDK:
     - JavaScript: Object with token details
     - Python: Dictionary (not TokenDetails object)
     - .NET: Use CreateTokenRequestAsync instead of CreateTokenRequestObjectAsync
   <!-- Source: SDK-specific issues from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 161-170 -->

3. **For authUrl errors**
   <!-- Source: Solution from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 68-76 -->
   - Test your auth URL directly using curl or Postman
   - Verify it returns valid JSON with all required fields:
   ```json
   {
     "token": "your-jwt-token-or-token-string",
     "expires": 1234567890000,
     "capability": {"*": ["*"]}
   }
   ```
   <!-- Code source: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 70-75, shows required response format -->
   
   - Check server logs for errors
   - Ensure the endpoint is accessible from your application
   - Verify CORS settings if calling from browser

4. **For 403 responses**
   <!-- Source: State transition from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md lines 131-133 -->
   - This indicates a permanent authentication failure
   - Connection will move to "failed" state and won't retry automatically
   - Fix the authentication issue on your server:
     - Check user permissions
     - Verify API key validity
     - Review auth server logic

5. **For timeout errors**
   <!-- Source: Cocoa implementation from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md lines 57-62 -->
   - Increase timeout settings if possible
   - Optimize auth server response time
   - Consider using authCallback instead of authUrl for better control
   - Check network connectivity and latency

6. **For debugging**
   <!-- Source: Support recommendation from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 178-181 -->
   - Enable verbose logging in your Ably client
   - Use authCallback instead of authUrl for better visibility
   - Test auth provider independently before integrating with Ably
   - Log all auth attempts and responses (excluding sensitive data)

## Automatic Handling

- **403 errors**: Connection moves to "failed" state (permanent failure, no automatic retry)
- **401/other errors**: Connection moves to "disconnected" state (SDK will retry with backoff)
- **500 errors**: Treated as server errors (SDK retries with backoff)
- **Timeout errors**: Behavior varies by SDK (failed or disconnected state)
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md lines 130-133 -->

## Prevention

- Implement robust error handling in all auth callbacks
- Validate auth responses before returning them
- Set reasonable timeouts for auth requests
- Monitor your auth server health and availability
- Test authentication under various network conditions
- Use try-catch blocks around auth logic
- Log auth failures for debugging (without sensitive data)
<!-- Source: Best practices from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 85-104 -->

## Performance Impact

This error prevents all realtime functionality:
- No connection can be established
- All channels remain unattached
- No messages can be sent or received
- Presence features are unavailable

## Related Errors

• **[40170 - Error from client token callback](https://help.ably.io/error/40170)**  
  Often appears alongside 80019 when the auth callback itself throws an exception

• **[40101 - Invalid API key](https://help.ably.io/error/40101)**  
  May occur if auth provider returns invalid credentials

• **[40102 - Token expired](https://help.ably.io/error/40102)**  
  Can happen if auth provider returns already-expired tokens

• **[80000 - Connection failed](https://help.ably.io/error/80000)**  
  Generic connection failure that may result from persistent auth issues

## Related Resources

- [Authentication documentation](https://ably.com/docs/auth)
- [Token authentication guide](https://ably.com/docs/auth/token)
- [authCallback documentation](https://ably.com/docs/auth/token#auth-callback)
- [authUrl documentation](https://ably.com/docs/auth/token#auth-url)
- [Connection states explained](https://ably.com/docs/realtime/connection#connection-states)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 80019
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 80019)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/80019-auth-provider-request-failed.mdx (enhanced and improved)
- Repository Overviews: Not needed (research files contained sufficient context)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Solutions from knowledge file lines 54-104 incorporated with minimal changes
- Content Excluded: None - all relevant information included
- Recommendations Source: 
  - Error handling pattern from knowledge file lines 54-66
  - Auth URL validation from knowledge file lines 68-76
  - Debugging tips from knowledge file lines 115-119 and 178-181
  - Prevention strategies from knowledge file lines 85-104
- Code Examples Rationale: 
  - Error handling example included as essential for resolution (knowledge file lines 55-65)
  - Auth response format included as required for validation (knowledge file lines 70-75)
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on support cases in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 157-163
  - Cause 2: From SDK code analysis in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md lines 40-44
  - Cause 3: From Java SDK at https://github.com/ably/ably-java/blob/main/lib/src/main/java/io/ably/lib/rest/Auth.java#L835
  - Cause 4: From support case in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 172-176
- Resolution Steps: 
  - Step 1: Support insight from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 147-150
  - Step 2: Best practice from knowledge file lines 54-66 and SDK-specific issues lines 161-170
  - Step 3: Auth URL format from knowledge file lines 68-76
  - Step 4: State transitions from analysis file lines 131-133
  - Step 5: Timeout handling from analysis file lines 57-62
  - Step 6: Debugging recommendations from knowledge file lines 178-181
- Prevention: Based on https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-knowledge.md lines 85-104
- Automatic Handling: Based on https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80019-analysis.md lines 130-133
-->

<!-- URL Validation Completed: 2025-08-25T05-37-30-332Z -->
<!-- External URLs verified: 9 | Corrected: 0 | Exempted internal: 5 -->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 80019
2. Regenerate: Run `./bin/ably-os errors document-error-codes 80019 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->