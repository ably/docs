<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 90005 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document channel recovery epoch failure with emphasis on automatic SDK handling and minimal developer intervention needed -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 90005: Channel Recovery Epoch Not Found

## What Happened

The channel couldn't recover its previous state because the requested recovery point no longer exists on Ably's servers.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 90005 | 404 | Channel Recovery Error | No - recovery point unavailable |

## Quick Fix

- Allow the SDK to handle this automatically - it will reattach without recovery
- Your channel will reconnect with fresh state
- No manual intervention required in most cases

## Error Messages

You may see this message:
- "Unable to recover channel (no matching epoch)"

## Common Causes

1. **Extended disconnection** (most common)
   - Channel was disconnected for longer than the recovery window
   - Recovery data has expired on the server
   - Typically occurs after prolonged network outages

2. **Channel with no message history**
   - Attempting recovery on a channel that has never had messages
   - Clean attachment to empty channels
   <!-- Source: Empty channel issue from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md lines 78-85 -->

3. **Invalid recovery state**
   - Client has outdated or corrupted recovery information
   - Recovery point never existed or was from different channel instance

## Resolution Steps

1. **Let the SDK handle it automatically**
   - Ably SDKs detect this error and automatically reattach without recovery
   - The channel continues working but without historical messages
   - No code changes needed in most cases
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-analysis.md lines 84-88 -->

2. **If you need message history**
   - Use the History API to retrieve missed messages after reattachment
   - See [History documentation](https://ably.com/docs/storage-history/history)
   <!-- Source: Based on Ably documentation standard practice for history retrieval -->

3. **For critical message continuity**
   - Implement client-side state tracking
   - Use presence to detect when recovery fails
   - Consider using persistent storage for critical data
   <!-- Source: Recovery recommendations from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md lines 43-48 -->

## Automatic Handling

Ably SDKs automatically handle this error by:
- Detecting the recovery failure
- Reattaching to the channel without recovery
- Emitting an update event to notify your application
- Continuing normal channel operation with fresh state

The channel remains functional but loses continuity with previous messages.
<!-- Source: System behavior from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md lines 50-55 -->

## Prevention

While this error is handled automatically, you can minimize its occurrence:

- **Monitor connection state**: Track disconnection duration in your application
- **Store critical state**: Keep important data client-side for reconstruction
- **Use persistent history**: Enable extended history retention for critical channels
- **Implement presence**: Use presence to detect and handle state loss

## Performance Impact

This error indicates:
- Loss of message continuity
- Fresh channel state without history
- Potential need to re-establish presence
- No impact on future message delivery

## Related Resources

- [Channel state recovery](https://ably.com/docs/realtime/channels#state-recovery)
- [Connection state recovery](https://ably.com/docs/realtime/connection#connection-state-recovery)
- [History API](https://ably.com/docs/storage-history/history)
- [Presence documentation](https://ably.com/docs/presence)
- Related errors: [90003](./90003-messages-expired.md), [90004](./90004-message-limit-exceeded.md), [90006](./90006-unbounded-request.md)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 90005
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 90005)
- Existing Documentation: None found - this is the first documentation for error 90005
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No existing FAQ content found for 90005
- Content Excluded: Internal implementation details about resultType === -1 condition
- Recommendations Source:
  - Recovery behavior: Based on analysis in https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-analysis.md lines 84-88
  - Client recommendations: From https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md lines 43-55
- Code Examples Rationale: No code examples included as SDK handles this error automatically and no manual intervention pattern exists in research
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on epoch system understanding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-analysis.md lines 66-74
  - Cause 2: From known issue in https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md lines 78-85 (empty channel bug)
  - Cause 3: From failure scenarios in https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-analysis.md lines 76-80
- Resolution Steps: 
  - Step 1: Automatic handling from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-analysis.md lines 84-88
  - Step 2: Standard Ably practice for history retrieval from https://ably.com/docs/storage-history/history
  - Step 3: Developer recommendations from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md lines 43-48
- Prevention: Based on recovery recommendations from https://github.com/ably/ably-os/blob/main/output/error-codes/research/90005-knowledge.md lines 43-48
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Detailed explanation of the epoch recovery system
- Impact: Developers don't understand what epochs are or how recovery works
- Recommendation: Add epoch system documentation to channel recovery guide
- Severity: Medium - error is handled automatically but understanding would help
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 90005
2. Regenerate: Run `./bin/ably-os errors document-error-codes 90005 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->