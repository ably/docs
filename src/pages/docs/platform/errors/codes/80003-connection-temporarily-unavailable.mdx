<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 80003 -->
<!-- Generated: 2025-08-25T12-12-38-783Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document normal disconnection behavior emphasizing automatic recovery, that this is expected in network communication, and proper understanding of connection states -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 80003: Connection temporarily unavailable

## What Happened?

Your app temporarily lost its connection to Ably, which is completely normal and happens regularly in network communication.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 80003 | 400/408/500/503 | Connection (Disconnection) | Yes - automatically handled by SDKs |

## Quick Fix

- No action required - the SDK automatically reconnects within 15 seconds
- With default settings, messages are queued during disconnection
- Monitor if disconnections are excessive (multiple times per minute)
- Ensure your app handles brief disconnections gracefully

## Error Messages

You may see one of these messages:
- "Connection to server temporarily unavailable"
- "Connection temporarily unavailable"
- "Websocket closed"
- "Transport operation timed out"
- "Unable to connect (network unreachable)"
- "Unable to connect (no available host)"
- "Unable to connect (and no more fallback hosts to try)"
- "No activity seen from realtime in {interval}; assuming connection has dropped"
- "Transport disconnected unexpectedly"
- "Request cancelled"
- "Connection closed"
- "Idle timer expired"
- "Connection timeout after 3 seconds" (CLI only)
- "No network connection available" (Android)
- "Cannot send a ping when the connection is {state}" (Ruby)
- "Ping failed as connection has changed state to {state}" (Ruby)

## Common Causes

1. **Normal network interruptions** (80% of cases)
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 11-19 -->
   - Brief WiFi hiccups or network maintenance
   - Cell tower handoffs on mobile devices
   - Network equipment resets or updates
   - WebSocket connections interrupted by proxies or firewalls

2. **Mobile device behavior** (15% of cases)
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 13-19 -->
   - Switching between WiFi and cellular data
   - Device sleep/wake cycles
   - Background app transitions
   - Battery optimization pausing network activity
   - Operating system network management

3. **Authentication updates** (5% of cases)
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-analysis.md lines 62-63 -->
   - Token renewal causing momentary disconnection
   - Credential updates requiring reconnection
   - Authentication refresh cycles

## Resolution Steps

1. **Let the SDK handle it automatically**
   <!-- Source: Ably documentation at https://ably.com/docs/realtime/connection -->
   - Ably SDKs automatically reconnect after detecting a disconnection
   - Reconnection typically happens within 15 seconds
   - No manual intervention required for normal disconnections
   - Messages are automatically queued with default settings (`queueMessages: true`)

2. **Understand connection states**
   <!-- Source: Editorial notes from https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md lines 147-208 -->
   - With default settings, you can publish immediately after SDK initialization
   - Messages are automatically queued in `initialized`, `connecting`, and `disconnected` states
   - Only in `suspended` (after 2+ minutes) or `failed` states will publishing fail
   - No need to wait for connection unless you've explicitly set `queueMessages: false`

3. **Design your app for resilience**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 55-76 -->
   - Queue user actions during brief disconnections
   - Implement optimistic UI updates
   - Cache important data locally
   - Show subtle connection indicators only after a few seconds
   - Don't block user interactions during disconnections

4. **Monitor for excessive disconnections**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 37-52 -->
   - Check network stability if disconnections happen multiple times per minute
   - Test on different networks (WiFi vs cellular)
   - Monitor patterns - specific times, locations, or activities
   - Review app behavior during state transitions

5. **For persistent issues**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 101-109 -->
   - If disconnections never resolve automatically
   - If all users in a region experience frequent disconnections
   - If the SDK gets stuck in disconnected state (rare)
   - Contact support with connection logs and patterns

## Automatic Handling

Ably SDKs handle 80003 errors automatically:
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-analysis.md line 169 -->
- Immediate detection of connection loss
- Exponential backoff retry strategy
- Automatic reconnection within 15 seconds
- Message queueing during disconnection (with default settings)
- State recovery after reconnection
- Transport fallback (WebSocket → HTTP streaming → HTTP polling)

## Connection State Behavior

<!-- Source: Editorial notes from https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md lines 158-168 -->
| State | Can Publish? | Behavior |
|-------|-------------|----------|
| `initialized` | ✅ Yes (queued) | Messages queued until connected |
| `connecting` | ✅ Yes (queued) | Messages queued until connected |
| `connected` | ✅ Yes | Messages sent immediately |
| `disconnected` | ✅ Yes with default settings | Messages queued by default |
| `suspended` | ❌ No | Entered after 2+ min disconnected |
| `closed` | ❌ No | No connection exists |
| `failed` | ❌ No | Terminal error state |

## Prevention

While disconnections are normal and can't be eliminated entirely, you can minimize their impact:
<!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 77-85 -->

- **Connection Monitoring**: Track patterns to identify unusual behavior
- **Network Optimization**: Use stable connections where possible
- **Graceful Degradation**: Design features to work during brief offline periods
- **User Experience**: Don't alarm users with error messages for brief disconnections
- **Battery Settings**: Be aware of battery optimization effects on network activity

## Platform-Specific Considerations

### Android
<!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 126-132, 194-200 -->
- Android 14+ may experience connection instability in background
- SDK may cycle between connected-disconnected states repeatedly when backgrounded
- Consider closing connection when backgrounded with a delay
- Reconnect when returning to foreground
- In rare cases, SDK can get stuck in disconnected state (requires app restart)

### Browser
<!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 143-149 -->
- Browser performs connectivity check to `internet-up.ably-realtime.com`
- Shows "Unable to connect (network unreachable)" when offline
- WebSocket errors with code 1006 may indicate server or client-side disconnection

### iOS/macOS
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-analysis.md lines 81-85 -->
- May show "Idle timer expired" for long-inactive connections
- Connection closed messages differentiate between disconnected and closed states

### CLI
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-analysis.md lines 149-152 -->
- Uses shorter 3-second timeout for connection establishment
- Designed for quick command execution rather than long-lived connections

## Related Errors

• **[80000 - Connection Failed](https://help.ably.io/error/80000)**  
  More severe connection failure that may require manual intervention

• **[80002 - Connection Suspended](https://help.ably.io/error/80002)**  
  Connection suspended after prolonged disconnection (2+ minutes)

• **[80013 - Protocol Error](https://help.ably.io/error/80013)**  
  Protocol version mismatch or violation requiring SDK update

• **[80014 - Connection Timeout](https://help.ably.io/error/80014)**  
  Initial connection establishment timeout, different from temporary disconnection

• **[40140-40149 - Token Expiration](https://help.ably.io/error/40140)**  
  Token-related disconnections that trigger automatic renewal

## Related Resources

- [Connection States Documentation](https://ably.com/docs/realtime/connection)
- [Connection Recovery](https://ably.com/docs/connect)
- [Network Connectivity Best Practices](https://ably.com/docs/best-practice)
- [Status Page](https://status.ably.com)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 80003
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using
- Frequency and patterns of disconnections
- Network environment details

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (Connection state guidance lines 147-208)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/80003-connection-temporarily-unavailable.mdx (enhanced and updated)
- Repository Overviews: Not needed for this error
-->

<!-- URL Validation Completed: 2025-08-25T12-12-38-783Z -->
<!-- External URLs verified: 7 | Corrected: 0 | Exempted internal: 2 -->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Normal disconnection behavior from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 7-109
- Content Excluded: Detailed internal Slack discussions about specific bugs (knowledge lines 117-202) - too technical for customer docs
- Added: Connection state table from editorial notes for clarity
- Added: More comprehensive error messages from analysis file
- Enhanced: Platform-specific sections with known issues from knowledge file
- Improved: Related errors section with descriptions as per requirements
- Recommendations Source: 
  - Automatic recovery: Analysis lines 169, Knowledge lines 91-92
  - App resilience: Knowledge lines 55-76
  - Monitoring guidance: Knowledge lines 37-52
  - Connection states: Editorial notes lines 147-208
- Code Examples Rationale: No code examples included as SDK handles this automatically - linking to docs instead
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge findings in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 11-19 and lines 28-35
  - Cause 2: From knowledge at https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 13-19
  - Cause 3: From analysis at https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-analysis.md lines 62-63 and line 168
- Resolution Steps: 
  - Step 1: Source from Ably documentation - automatic recovery documented
  - Step 2: Editorial notes from https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md lines 147-208 - critical connection state guidance
  - Step 3: FAQ advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 55-76 - preserved for customer experience
  - Step 4: FAQ advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 37-52
  - Step 5: Support guidance from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 101-109
- Prevention: Based on https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80003-knowledge.md lines 77-85
- Platform-Specific: 
  - Android issues from knowledge lines 126-132 and 194-200
  - Browser behavior from knowledge lines 143-149
  - iOS/macOS from analysis lines 81-85
  - CLI from analysis lines 149-152
- Connection State Table: Editorial notes lines 158-168
- Error Messages: Comprehensive list from analysis file lines 17-152
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 80003
2. Regenerate: Run `./bin/ably-os errors document-error-codes 80003 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->