---
title: "Annotations channel state invalid for operation"
meta_description: "Error 93001 occurs when attempting annotations operations on a channel that is not properly attached."
meta_keywords: "error 93001, annotations error, channel state error, Ably error code"
---

{/* Generated by: ably-os errors document-error-codes */}
{/* Repository: https://github.com/ably/ably-os */}
{/* Command: ./bin/ably-os errors document-error-codes 93001 */}
{/* Generated: 2025-11-07T08-36-41-586Z */}
{/* Sources:
     - Analysis: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
*/}
{/* Key Approach: Document an annotations feature error with limited information, focusing on channel state requirements */}
{/* Citations: Complete source attribution with line numbers available at bottom of document */}

This error occurs when you attempt to use annotations operations on a channel that is not in the correct state for those operations.

| Error code | HTTP status code | Category | Retryable |
| ---------- | ---------------- | -------- | --------- |
| 93001 | 400 | Client Error (Annotations) | No |

## Impact

This error prevents the requested annotations operation from completing. The operation will not be automatically retried.

The annotations feature requires the channel to be in an attached state before any operations can be performed. Until the channel is properly attached, annotations functionality will be unavailable.

## Troubleshooting

### Channel not attached

This occurs when:
- You attempt to use annotations before the channel has attached
- The channel is in an invalid state (detached, failed, or suspended)
- The channel attachment process has not completed

To resolve this:

1. Ensure the channel is attached before using annotations:
   {/* Source: Knowledge file suggestion from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md lines 25-33 */}
   ```javascript
   channel.attach((err) => {
       if (!err) {
           // Now safe for annotations operations
           channel.annotations.subscribe();
       }
   });
   ```

2. Check the channel state before attempting operations:
   {/* Source: Knowledge file suggestion from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md lines 35-44 */}
   ```javascript
   if (channel.state === 'attached') {
       // Annotations operations safe
   } else {
       channel.once('attached', () => {
           // Proceed with annotations
       });
   }
   ```

3. Monitor channel state changes to handle transitions properly
4. Implement appropriate error handling for state-dependent operations

## Related errors

The following errors are related to error code 93001:

| Error code | Description |
| ---------- | ----------- |
| [91000 - Unable to Enter Presence](/docs/platform/errors/codes/91000) | Similar state requirements - presence also requires channel attachment. |
| [40000 - Bad Request](/docs/platform/errors/codes/40000) | May occur when channel operations are attempted in invalid states. |

## Need further help?

Contact [Ably support](https://ably.com/support) if you're still experiencing issues after trying the steps listed above.

You'll need to provide:

- Your account ID and app ID.
- The full error message including the error code.
- Steps to reproduce the issue.
- Any relevant code snippets (without any sensitive credentials).
- The SDK and version you're using.

### Resources

- [Ably Documentation](https://ably.com/docs)
- [Channel Documentation](https://ably.com/docs/realtime/channels)

{/* =============================================== */}
{/* INTERNAL DOCUMENTATION (NOT RENDERED) */}
{/* =============================================== */}

{/* SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md - No specific error-specific notes for 93001
*/}

{/* CONTENT DECISIONS:
- FAQ Content Preserved: No FAQ content was available for this error code
- Content Excluded: None - included all available information
- Recommendations Source:
  - Resolution steps based on knowledge file suggestions at https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md lines 25-44
- Code Examples Rationale: Included minimal code showing correct channel attachment pattern as it's essential for resolution
*/}

{/* ATTRIBUTION BY SECTION:
- Common Causes:
  - Channel state requirements from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-analysis.md lines 21-24
  - State validation info from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md lines 14-20
- Resolution Steps:
  - Step 1: Attach pattern from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md lines 25-33
  - Step 2: State checking from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md lines 35-44
- Prevention: Based on best practices from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/93001-knowledge.md lines 46-51
*/}

{/* DOCUMENTATION SHORTCOMINGS:
Areas where Ably documentation could be improved:
- Missing: Comprehensive annotations feature documentation
- Impact: Users have limited information about annotations feature capabilities and requirements
- Recommendation: Create dedicated annotations documentation similar to presence docs
- Severity: Medium - feature appears to be less commonly used based on limited documentation
*/}

{/* URL Validation Completed: 2025-11-07T08-36-41-586Z */}
{/* External URLs verified: 3 | Corrected: 0 | Exempted internal: 5 */}

{/* IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 93001
2. Regenerate: Run `./bin/ably-os errors document-error-codes 93001 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/b819713/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
*/}