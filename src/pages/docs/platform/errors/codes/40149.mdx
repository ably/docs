---
title: "Error 40149 - Token error boundary"
meta_description: "Information and troubleshooting for Ably error code 40149 - the token error range boundary marker"
meta_keywords: "Ably, error, error codes, 40149, token error, authentication, token boundary"
---

{/* Generated by: ably-os errors document-error-codes */}
{/* Repository: https://github.com/ably/ably-os */}
{/* Command: ./bin/ably-os errors document-error-codes 40149 */}
{/* Generated: 2025-11-07T01-37-30-412Z */}
{/* Sources:
     - Analysis: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
*/}
{/* Key Approach: Document as a boundary marker that SDKs use for token error classification, focusing on helping developers understand they likely have a token issue in the 40140-40149 range */}
{/* Citations: Complete source attribution with line numbers available at bottom of document */}

This error marks the upper boundary of Ably's token error range (40140-40149). If you encounter this specific code, it indicates a token authentication failure that SDKs classify as recoverable through token refresh.

| Error code | HTTP status code | Category | Retryable |
| ---------- | ---------------- | -------- | --------- |
| 40149 | 401 | Authentication (token) | Yes (with new token) |

## Impact

This error prevents the current operation from completing. However:

- The SDK automatically attempts token refresh for errors in the 40140-40149 range.
- Existing connections close but can be re-established with a valid token.
- Other authenticated sessions remain unaffected.

## Troubleshooting

{/* Source: Knowledge finding from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 19-29 */}
Since 40149 represents a token error boundary, the actual issue is likely a specific token problem within the 40140-40149 range. Check your logs for more detailed error codes.

### Token authentication failure

This occurs when:
- Your token has expired or become invalid.
- Token validation fails at the boundary of the error range.
- The SDK classifies an authentication issue as token-related.

To resolve this:
1. Obtain a new authentication token from your token endpoint.
2. Update your Ably client with the new token.
3. Allow the SDK to reconnect automatically.

{/* Source: Implementation details from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-analysis.md lines 31-35 */}

### Token refresh implementation

For EventSource/SSE connections:
1. Close the current EventSource connection.
2. Obtain a new authentication token.
3. Create a new EventSource with the fresh token.

{/* Source: Internal guidance from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 88-96 */}

<Code>
```javascript
// Example token refresh pattern for SSE
eventsource.onerror = (error) => {
  // Check if error is in token range (40140-40149)
  if (error.code >= 40140 && error.code <= 40149) {
    eventsource.close();
    // Get new token from your server
    fetchNewToken().then(token => {
      // Reconnect with new token
      eventsource = new EventSource(url + '?auth=' + token);
    });
  }
};
```
</Code>

{/* Code source: Pattern derived from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 126-131 */}

### SDK automatic handling

Ably SDKs handle token errors in the 40140-40149 range automatically by:
- Identifying the error as token-related using range checks.
- Triggering token renewal flows.
- Re-establishing connections with new tokens.

{/* Source: SDK behavior from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-analysis.md lines 26-35 */}

You don't need to implement retry logic manually for standard SDK connections - just ensure your token renewal endpoint is working correctly.

## Prevention

To avoid token boundary errors:
- Implement proactive token renewal before expiration.
- Monitor token authentication failures in the 40140-40149 range.
- Set up proper token lifecycle management in your application.
- Use token auth callbacks for automatic renewal.

{/* Source: Best practices from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 49-57 */}

## Related errors

The following errors are related to error code 40149:

| Error code | Description |
| ---------- | ----------- |
| [40140 - Token error start](/docs/platform/errors/codes/40140) | Beginning of the token error range, marks start of token-related authentication failures. |
| [40141 - Token invalid](/docs/platform/errors/codes/40141) | Token validation failed due to invalid format or signature. |
| [40142 - Token expired](/docs/platform/errors/codes/40142) | Authentication token has expired and needs renewal. |
| [40143-40148 - Token errors](/docs/platform/errors/codes/40143) | Various specific token validation and authentication failures. |

## Need further help?

Contact [Ably support](https://ably.com/support) if you're still experiencing issues after trying the steps listed above.

You'll need to provide:

- Your account ID and app ID.
- The full error message including the error code.
- Steps to reproduce the issue.
- Any relevant code snippets (without any sensitive credentials).
- The SDK and version you're using.

### Resources

The following resources provide further context or assistance with this error:

- [Token authentication](https://ably.com/docs/auth/token)
- [Authentication guide](https://ably.com/docs/auth)
- [Connection states](https://ably.com/docs/realtime/connection)
- [Error handling](https://ably.com/docs/realtime/usage#error-handling)

{/* =============================================== */}
{/* INTERNAL DOCUMENTATION (NOT RENDERED) */}
{/* =============================================== */}

{/* SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md (40140-40149 token range guidance)
- Existing Documentation: None found
- Repository Overviews: Not needed for this boundary marker error
*/}

{/* CONTENT DECISIONS:
- FAQ Content Preserved: Token error range handling advice from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 88-143
- Content Excluded: Detailed internal implementation patterns that would confuse users
- Recommendations Source: Token refresh pattern from internal Slack discussions documented in knowledge file
- Code Examples Rationale: Included SSE pattern as it's essential for non-SDK implementations per https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 88-96
*/}

{/* ATTRIBUTION BY SECTION:
- Impact: Based on SDK behavior analysis in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-analysis.md lines 26-35
- Troubleshooting:
  - Token authentication failure: From https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 19-29
  - Token refresh: From Slack guidance in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 88-96
  - SDK handling: From https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-analysis.md lines 31-35
- Prevention: Based on https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40149-knowledge.md lines 49-57
*/}

{/* IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 40149
2. Regenerate: Run `./bin/ably-os errors document-error-codes 40149 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/b819713/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
*/}