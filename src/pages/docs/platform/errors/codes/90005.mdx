---
title: "Error 90005 - Unable to recover channel (no matching epoch)"
meta_description: "Information and troubleshooting for Ably error code 90005 - Unable to recover channel due to no matching epoch"
meta_keywords: "Ably, error, error codes, 90005, channel recovery, epoch, message recovery"
---

{/* Generated by: ably-os errors document-error-codes */}
{/* Repository: https://github.com/ably/ably-os */}
{/* Command: ./bin/ably-os errors document-error-codes 90005 */}
{/* Generated: 2025-11-07T08-36-41-586Z */}
{/* Sources:
     - Analysis: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
*/}
{/* Key Approach: Document the epoch-based recovery system failure with focus on reattachment without recovery as the primary solution */}
{/* Citations: Complete source attribution with line numbers available at bottom of document */}
{/* URL Validation Completed: 2025-11-07T08-40-00-000Z */}
{/* External URLs verified: 4 | Corrected: 2 | Exempted internal: 7 */}

This error occurs when a channel attempts to recover messages after disconnection but the requested recovery point (epoch) doesn't exist or match the server's records.

| Error code | HTTP status code | Category | Retryable |
| ---------- | ---------------- | -------- | --------- |
| 90005 | 404 | Channel recovery error | No |

## Impact

This error prevents message recovery for the affected channel. The impact includes:

- Historical messages from before disconnection cannot be recovered.
- Channel attachment proceeds but starts with a fresh state.
- Message continuity is lost - any messages sent during disconnection may be missed.
- Presence state may need to be re-established.

The SDK will not automatically retry recovery as the requested epoch is invalid. The channel will attach without recovery, providing a clean state moving forward.

## Troubleshooting

{/* Source: Analysis finding from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md lines 23-34 */}
This error indicates the channel's recovery point (epoch) is invalid or unavailable. The channel will attach successfully but without recovering historical messages.

### Invalid or expired epoch

This occurs when:

- The client requests recovery with an epoch that never existed.
- The epoch has been removed from server history.
- The client's stored epoch doesn't match the server's channel state.
- The channel has no message history yet (empty channel scenario).

{/* Source: Based on recovery behavior from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md lines 82-86 */}
To resolve this:

- Allow the channel to attach without recovery (this happens automatically).
- Implement application-level state synchronization if message continuity is critical.
- Use presence or other mechanisms to detect and handle missed messages.
- Store critical application state client-side for reconstruction after recovery failures.

### Handling recovery failures in your application

{/* Source: Recovery recommendations from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-knowledge.md lines 43-55 */}
When this error occurs, implement fallback logic to handle the loss of message continuity:

<Code>
```javascript
channel.on('attached', (stateChange) => {
  if (stateChange.hasBacklog === false) {
    // Recovery failed - channel attached without recovering messages
    // Implement your fallback logic here
    console.log('Channel attached without recovery - refreshing state');

    // Re-request current state from your application
    refreshApplicationState();

    // Re-establish presence if needed
    channel.presence.enter();
  }
});

channel.on('failed', (stateChange) => {
  if (stateChange.reason.code === 90005) {
    console.log('Channel recovery failed - epoch not found');
    // Channel will reattach automatically without recovery
  }
});
```
</Code>
{/* Source: Code pattern based on Ably documentation at https://ably.com/docs/realtime/channels#state-change-events */}

## Prevention

To minimize recovery failures:

- Keep connections stable to avoid frequent recovery attempts.
- Implement client-side state caching for critical data.
- Use Ably's history API to retrieve missed messages when recovery fails.
- Monitor for this error and implement appropriate fallback strategies.

## Related errors

The following errors are related to error code 90005:

| Error code | Description |
| ---------- | ----------- |
| [90003 - Unable to recover channel (messages expired)](/docs/platform/errors/codes/90003) | Recovery fails when messages have expired from history. Both errors prevent message recovery. |
| [90004 - Unable to recover channel (message limit exceeded)](/docs/platform/errors/codes/90004) | Recovery fails due to too many messages. Unlike 90005, this may allow partial recovery. |
| [90006 - Unable to recover channel (unbounded request)](/docs/platform/errors/codes/90006) | Recovery request is unbounded. Part of the same recovery failure family. |
| [80008 - Unable to recover connection](/docs/platform/errors/codes/80008) | Connection-level recovery failure, conceptually similar to 90005 but at connection level. |

{/* Source: Related errors from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md lines 56-61 and https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-knowledge.md lines 106-111 */}

## Need further help?

Contact [Ably support](https://ably.com/support) if you're still experiencing issues after trying the steps listed above.

You'll need to provide:

- Your account ID and app ID.
- The full error message including the error code.
- Steps to reproduce the issue.
- Any relevant code snippets (without any sensitive credentials).
- The SDK and version you're using.

### Resources

The following resources provide further context or assistance with this error:

- [Channel states](https://ably.com/docs/channels/states)
- [Connection state and recovery](https://ably.com/docs/connect/states)
- [Message history](https://ably.com/docs/storage-history/history)
- [Presence](https://ably.com/docs/presence-occupancy/presence)

{/* =============================================== */}
{/* INTERNAL DOCUMENTATION (NOT RENDERED) */}
{/* =============================================== */}

{/* SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
- Writing Guide: https://github.com/ably/ably-os/blob/b819713/src/prompts/shared-resources/error-code-doc-writing-guide.md
*/}

{/* CONTENT DECISIONS:
- FAQ Content Preserved: No existing FAQ content was available for this error code
- Content Excluded: Excluded specific implementation details about resultType === -1 as too technical for customer docs
- Recommendations Source:
  - Recovery handling: Based on https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-knowledge.md lines 43-55
  - Fallback strategies: Based on analysis of fatal recovery behavior in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md lines 82-86
- Code Examples Rationale: Included channel state handling example as it's essential for developers to understand how to detect and handle recovery failures
*/}

{/* ATTRIBUTION BY SECTION:
- Common Causes:
  - Invalid epoch scenarios: Based on analysis findings in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md lines 75-80
  - Empty channel issue: From https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-knowledge.md lines 87-99
- Resolution Steps:
  - Automatic attachment: Source from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md lines 84-86
  - State synchronization: Based on recovery recommendations in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-knowledge.md lines 43-48
  - Code example: Pattern from https://ably.com/docs/realtime/channels#state-change-events adapted for recovery failure handling
- Prevention: Based on best practices derived from the fatal nature of the error as described in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/90005-analysis.md lines 82-83
*/}

{/* DOCUMENTATION SHORTCOMINGS:
Areas where Ably documentation could be improved:
- Missing: Detailed explanation of the epoch system and how it works in channel recovery
- Impact: Developers don't understand why epochs become invalid or how to prevent issues
- Recommendation: Add comprehensive documentation about the epoch-based recovery system
- Severity: Medium - affects understanding but workarounds exist
*/}

{/* IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 90005
2. Regenerate: Run `./bin/ably-os errors document-error-codes 90005 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/b819713/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
*/}