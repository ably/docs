<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 90005 -->
<!-- Generated: 2025-08-25T05-37-30-332Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation with empty channel bug information and error relationships, building upon existing documentation -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 90005: Channel Recovery Epoch Not Found

## What Happened

The channel couldn't recover its previous state because the requested recovery point (epoch) no longer exists or doesn't match Ably's server records.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 90005 | 404 | Channel Recovery Error | No - recovery point unavailable |

## Quick Fix

- Allow the SDK to handle this automatically - it will reattach without recovery
- Your channel will continue working with fresh state
- If attaching to an empty channel, this may be a known issue that doesn't affect functionality

## Error Messages

You may see this message:
- "Unable to recover channel (no matching epoch)"

## Common Causes

1. **Extended disconnection** (most common)
   - Channel was disconnected for longer than the recovery window
   - Recovery data has expired on the server
   - Typically occurs after prolonged network outages
   <!-- Source: Epoch system understanding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 66-74 -->

2. **Empty channel attachment** (known issue)
   - Attempting to attach to a channel that has never had messages
   - Clean attachment incorrectly triggers this error
   - This is a known bug that doesn't affect channel functionality
   <!-- Source: Empty channel bug from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 78-85, 99-104 -->

3. **Invalid recovery state**
   - Client has outdated or corrupted recovery information
   - Recovery epoch never existed or was from a different channel instance
   - Mismatch between client and server epoch records
   <!-- Source: Failure scenarios from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 76-80 -->

## Resolution Steps

1. **Let the SDK handle it automatically**
   - Ably SDKs detect this error and automatically reattach without recovery
   - The channel continues working but without historical messages
   - No code changes needed in most cases
   <!-- Source: Automatic handling from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 84-88 -->

2. **For empty channels (if applicable)**
   - If attaching to a new or empty channel, this error can be safely ignored
   - The channel will function normally despite the error
   - This is a known issue that may trigger unnecessary master queries
   <!-- Source: Empty channel issue from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 99-104 -->

3. **If you need message history**
   - Use the History API to retrieve missed messages after reattachment
   - Implement client-side state tracking for critical data
   - Consider using presence to detect when recovery fails
   <!-- Source: Recovery recommendations from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 43-48 -->

## Automatic Handling

Ably SDKs automatically handle this error by:
- Detecting the recovery failure (fatal error with `resultType === -1`)
- Reattaching to the channel without recovery
- Emitting an update event to notify your application
- Continuing normal channel operation with fresh state

The channel remains functional but loses continuity with previous messages.
<!-- Source: System behavior from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 50-55 and https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 27-31 -->

## Prevention

While this error is handled automatically, you can minimize its occurrence:

- **Monitor connection state**: Track disconnection duration in your application
- **Store critical state**: Keep important data client-side for reconstruction
- **Use persistent history**: Enable extended history retention for critical channels
- **Implement presence**: Use presence to detect and handle state loss
- **Be aware of empty channel behavior**: First attachment to empty channels may trigger this error harmlessly

## Performance Impact

This error indicates:
- Loss of message continuity (except for empty channels)
- Fresh channel state without history
- Potential need to re-establish presence
- No impact on future message delivery
- May cause unnecessary master RPC queries for empty channels

## Related Errors

• **[80008 - Connection Recovery Failed](https://help.ably.io/error/80008)**  
  Connection-level equivalent of this error - both represent "epoch not found" conditions
  <!-- Source: Error equivalence from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 74-77, 108-111 -->

• **[90003 - Messages Expired](https://help.ably.io/error/90003)**  
  Recovery fails because messages have expired from the server

• **[90004 - Message Limit Exceeded](https://help.ably.io/error/90004)**  
  Non-fatal recovery error allowing partial recovery, unlike 90005

• **[90006 - Unbounded Request](https://help.ably.io/error/90006)**  
  Recovery request was too broad or unbounded

## Related Resources

- [Ably Documentation](https://ably.com/docs)
- [Support Portal](https://ably.com/support)
- Related errors in the 9000x recovery family

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 90005
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using
- Whether this occurs on empty channels or channels with message history

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 90005)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/90005-channel-recovery-epoch-not-found.mdx (enhanced from previous version)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No existing FAQ content found for 90005 at https://faqs.ably.com/error-code-90005
- Content Added: Empty channel bug information from Slack discussions and GitHub issue #2478
- Content Added: Error 80008 relationship showing connection vs channel recovery equivalence
- Content Excluded: Internal implementation details about resultType === -1 condition (kept minimal reference)
- Recommendations Source:
  - Recovery behavior: Based on analysis in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 81-86
  - Client recommendations: From https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 43-55
  - Empty channel issue: From https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 79-85, 99-104
- Code Examples Rationale: No code examples included as SDK handles this error automatically and no manual intervention pattern exists in research
-->

<!-- URL Validation Completed: 2025-08-25T05-37-30-332Z -->
<!-- External URLs verified: 1 (https://ably.com/support) | Corrected: 4 | Exempted internal: 5 -->
<!-- Note: Several documentation URLs were simplified to point to main docs and support pages due to 404 responses on specific paths -->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on epoch system understanding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 66-74
  - Cause 2: From known issue in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 78-85 (empty channel bug from GitHub issue #2478)
  - Cause 3: From failure scenarios in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 76-80
- Resolution Steps: 
  - Step 1: Automatic handling from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-analysis.md lines 81-86
  - Step 2: Empty channel guidance from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 99-104
  - Step 3: Developer recommendations from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 43-48
- Prevention: Based on recovery recommendations from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 43-48
- Related Errors: Error 80008 equivalence from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/90005-knowledge.md lines 74-77, 108-111
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Detailed explanation of the epoch recovery system
- Missing: Public documentation about the empty channel bug
- Impact: Developers don't understand what epochs are or why empty channels trigger this error
- Recommendation: Add epoch system documentation to channel recovery guide and document known empty channel behavior
- Severity: Medium - error is handled automatically but understanding would help developers
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 90005
2. Regenerate: Run `./bin/ably-os errors document-error-codes 90005 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->