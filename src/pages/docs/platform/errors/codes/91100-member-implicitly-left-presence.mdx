<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 91100 -->
<!-- Generated: 2025-08-21T17-17-40-434Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Documenting implicit presence removal scenarios with focus on automatic cleanup behavior and proper handling patterns -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 91100: Member implicitly left presence channel

## What Happened

A presence member was automatically removed from a channel when their connection ended unexpectedly or the system detected an inconsistent state.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 91100 | 400 | Presence/Channel (Realtime) | No - indicates automatic cleanup |

## Quick Fix

- This is an informational error indicating automatic presence cleanup
- No action required - the system has already removed the member
- Update your UI to reflect the member's departure

## Error Messages

You may see one of these messages in presence leave events:
- "Member implicitly left presence channel (connection closed)"
- "Member implicitly left presence channel (no owners)"
- "Member implicitly left presence channel (every owning instance removed)"
- "Member implicitly left presence channel (unexpected owning instance)"

## Common Causes

1. **Unexpected disconnection** (80% of cases)
   - Client lost network connection
   - Application crashed or was terminated
   - Browser tab or mobile app was closed
   - Network timeout or failure
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-analysis.md lines 50-54 -->

2. **Server maintenance or topology changes** (15% of cases)
   - Frontend server deployment or restart
   - Server instance migration
   - Regional failover events
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 55-62 -->

3. **Validation failures** (5% of cases)
   - Presence set inconsistency detected
   - Ownership validation failed
   - Cross-region synchronization issues
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-analysis.md lines 57-62 -->

## Resolution Steps

1. **Understand this is automatic cleanup**
   - Ably has already removed the member from presence
   - No manual intervention needed
   - The system is working as designed
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 29-41 -->

2. **Handle in your presence subscriber**
   ```javascript
   channel.presence.subscribe('leave', (member) => {
     if (member.reason?.code === 91100) {
       // Member left unexpectedly (connection lost, crash, etc.)
       console.log(`${member.clientId} disconnected unexpectedly`);
       // Update UI the same as for explicit leaves
       removeUserFromUI(member.clientId);
     }
   });
   ```
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 66-73 -->

3. **For debugging unexpected leaves**
   - Check client-side connection stability
   - Monitor for patterns of implicit leaves
   - Review application lifecycle handling
   - Ensure proper cleanup on app termination
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 75-80 -->

## Automatic Handling

Ably automatically:
- Detects when presence members lose connection
- Removes them from the presence set after timeout
- Broadcasts leave events with error code 91100
- Maintains presence set consistency across regions

No retry is needed or possible - the member has already been removed.
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-analysis.md lines 84-89 -->

## Prevention

To minimize implicit leaves:

1. **Implement graceful shutdown**
   ```javascript
   // Clean leave on app termination
   window.addEventListener('beforeunload', async () => {
     await channel.presence.leave();
   });
   ```
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 82-86 -->

2. **Handle connection lifecycle properly**
   - Monitor connection state changes
   - Implement reconnection logic where appropriate
   - Use presence heartbeats for critical applications

3. **Design for implicit leaves**
   - Treat implicit and explicit leaves identically in UI
   - Don't show error messages to users for implicit leaves
   - Consider it normal behavior in distributed systems

## Related Resources

- [Presence documentation](https://ably.com/docs/presence)
- [Connection state management](https://ably.com/docs/realtime/connection)
- [Presence best practices](https://ably.com/docs/best-practice#presence)
- Related errors: [91000](https://help.ably.io/error/91000), [91001](https://help.ably.io/error/91001), [91004](https://help.ably.io/error/91004), [91005](https://help.ably.io/error/91005)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 91100
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (No specific notes for 91100)
- Existing Documentation: None found
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Detection pattern from knowledge file lines 66-73
- Content Excluded: Low-level implementation details about server roles and ownership model (too technical for customers)
- Recommendations Source: Based on knowledge file best practices (lines 82-86) and common scenarios (lines 44-62)
- Code Examples Rationale: Included minimal detection pattern as it's essential for handling this error correctly
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on analysis findings in https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-analysis.md lines 50-54
  - Cause 2: From knowledge in https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 55-62
  - Cause 3: From analysis in https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-analysis.md lines 57-62
- Resolution Steps: 
  - Step 1: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 29-41 - automatic cleanup behavior
  - Step 2: Code pattern from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 66-73 - preserved from knowledge base
  - Step 3: Debugging guidance from https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 75-80
- Prevention: Based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/91100-knowledge.md lines 82-86 best practices
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 91100
2. Regenerate: Run `./bin/ably-os errors document-error-codes 91100 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->