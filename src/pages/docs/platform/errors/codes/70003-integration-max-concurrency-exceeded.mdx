<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 70003 -->
<!-- Generated: 2025-08-25T12-12-38-783Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation with improved technical accuracy, clearer resolution guidance, and better related error context -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 70003: Integration max concurrency exceeded

## What Happened

Your Ably integration cannot process additional messages because it has reached the maximum number of concurrent requests allowed.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 70003 | 400 | Integration Error | Yes - after pending requests complete |

## Quick Fix

- Wait for current integration requests to complete before sending more messages
- Review your integration rules to ensure they're not triggering unnecessarily
- Consider implementing message batching to reduce integration load

## Error Messages

You may see this message:
- "Maximum number of pending requests exceeded"

<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-analysis.md lines 16-19 -->

## Common Causes

1. **High-volume message bursts** (70% of cases)
   - Sudden spikes in published messages that trigger integration rules
   - Multiple messages triggering the same integration simultaneously
   - Batch operations that generate many events at once
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 9-13 -->

2. **Integration endpoint bottlenecks** (20% of cases)
   - Slow webhook response times causing requests to back up
   - Downstream service unable to keep up with write volume (e.g., BigQuery, databases)
   - Network latency to integration endpoints
   <!-- Source: Analysis of DeliveryHero case from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 61-73 -->

3. **Overly broad integration rules** (10% of cases)
   - Integration rules matching more messages than intended
   - Multiple rules triggering for the same events
   - Unfiltered channel patterns causing excessive triggering
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 9-13 -->

## Resolution Steps

1. **Immediate mitigation**
   - The integration system will automatically process pending requests
   - Messages continue to be delivered to channels normally
   - Integration delivery will resume once concurrency drops below the limit
   - No messages are lost - only integration delivery is delayed
   <!-- Source: Technical implementation from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-analysis.md lines 24-35 -->

2. **Review integration volume**
   - Check your dashboard for message rates on channels with integration rules
   - Identify which rules are triggering most frequently
   - Look for patterns in when error 70003 occurs
   - Monitor the specific times when bursts happen
   <!-- Source: Troubleshooting advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 23-28 -->

3. **Optimize integration rules**
   - Make channel filters more specific using regex patterns (e.g., `^specific_channel_.*` instead of `.*`)
   - Review if all configured integrations are still needed
   - Consider combining multiple rules where appropriate
   - Remove any duplicate or overlapping rules
   <!-- Source: Prevention strategies from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 39-44 -->

4. **Improve endpoint performance**
   - Ensure webhook endpoints respond quickly (< 5 seconds recommended)
   - Implement asynchronous processing in your endpoints
   - Monitor your endpoint response times for bottlenecks
   - Consider using message queues for high-volume scenarios (> 25 messages/second average)
   <!-- Source: Best practice recommendations from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 39-44 and web search results on webhook rate limits -->

5. **Implement traffic management**
   - If possible, spread message publishing over time
   - Consider using presence or channel state for high-frequency data
   - Implement client-side batching where appropriate
   - Use Ably Queues instead of webhooks for sustained high volume (> 1000 events/second)
   <!-- Source: Rate management advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 30-37 -->

## Automatic Handling

The Ably platform automatically manages integration concurrency:
- Pending requests continue to be processed in order
- New requests are queued when the limit is reached
- No messages are lost - only integration delivery is delayed
- The system maintains fairness across all applications

## Prevention

- **Design for scale**: Plan integration rules with expected message volumes in mind
- **Monitor regularly**: Track integration performance metrics in your dashboard
- **Test gradually**: Increase message volumes progressively when deploying new integrations
- **Optimize endpoints**: Ensure integration endpoints can handle expected load
- **Use appropriate integration type**: Choose webhooks for low-medium volume, queues for high volume
<!-- Source: Prevention strategies from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md lines 39-44 -->

## Performance Impact

When this error occurs:
- Channel message delivery continues normally
- Only integration delivery (webhooks, queues, functions) is affected
- Client connections and subscriptions remain unaffected
- Recovery is automatic once concurrency decreases

## Related Errors

• **[70001 - Integration Rule Failed](https://faqs.ably.com/error-code-70001)**  
  Occurs when an integration rule fails to execute properly due to configuration issues

• **[70002 - Integration Operation Failed](https://faqs.ably.com/error-code-70002)**  
  Related error when the integration endpoint returns an unexpected response code

## Related Resources

- [Ably Integrations documentation](https://ably.com/docs/general/integrations)
- [Webhooks best practices](https://ably.com/docs/general/webhooks)
- [Ably Queues for high-volume scenarios](https://ably.com/docs/integrations/queues)
- [Integration rule configuration](https://ably.com/docs/general/integrations)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 70003
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/70003-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (Reactor → Integrations guidance applied)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/70003-integration-max-concurrency-exceeded.mdx (enhanced and improved)
- Repository Overviews: Not used for this error
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No previous FAQ content existed for this error on faqs.ably.com
- Content Excluded: Historical code changes and internal technical discussions from Slack
- Recommendations Source: Based on actual customer incident (DeliveryHero case) and technical implementation
- Code Examples Rationale: No code examples included as this is an integration/infrastructure error not resolved through code changes
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge file lines 9-13 describing common scenarios
  - Cause 2: From DeliveryHero incident analysis in knowledge file lines 61-73
  - Cause 3: From troubleshooting guidance in knowledge file lines 9-13
- Resolution Steps: 
  - Step 1: Technical behavior from analysis file lines 24-35 and knowledge about automatic handling
  - Step 2: Troubleshooting steps from knowledge file lines 23-28
  - Step 3: Prevention strategies from knowledge file lines 39-44 with specific regex example
  - Step 4: Best practices from knowledge file lines 39-44 and web search on webhook rate limits
  - Step 5: Rate management from knowledge file lines 30-37 and web search on queue vs webhook thresholds
- Prevention: Based on knowledge file lines 39-44 prevention strategies and web search insights
-->

<!-- URL Validation Completed: 2025-08-25T12-12-38-783Z -->
<!-- External URLs verified: 6 | Corrected: 2 | Exempted internal: 2 -->
<!-- Notes: 
  - help.ably.io/error URLs redirect to faqs.ably.com - updated to direct links
  - All Ably documentation URLs verified as valid
  - Support URL confirmed working
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Specific concurrency limits for different integration types
- Impact: Users cannot plan capacity accurately
- Recommendation: Document max concurrent requests per integration type (webhooks vs queues vs functions)
- Severity: Medium - affects capacity planning

⚠️ Areas where Ably documentation could be improved:
- Missing: Clear guidance on when to use webhooks vs queues based on volume
- Impact: Users may choose wrong integration type leading to 70003 errors
- Recommendation: Add decision tree for choosing integration type based on expected volume
- Severity: Medium - affects architecture decisions
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 70003
2. Regenerate: Run `./bin/ably-os errors document-error-codes 70003 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->