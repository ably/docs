<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 80019 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Comprehensive documentation focusing on auth provider failures with practical debugging guidance -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 80019: Authentication provider request failed

## What Happened

Your app's authentication setup failed when trying to obtain credentials from your configured auth provider (authCallback or authUrl).

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 80019 | 401/403/500 | Connection Error (Authentication) | Depends - No for 403, Yes for others |

## Quick Fix

- Check your authCallback or authUrl is working correctly
- Verify the auth response format matches Ably's requirements
- Test your auth endpoint independently to ensure it returns valid credentials

## Error Messages

You may see one of these messages:
- "Client configured authentication provider request failed"
- "Client configured authentication provider returned 403; failing the connection"
- "authCallback failed with an exception"
- "authUrl failed with an exception"
- "Empty response received from authUrl"
- "timed out" (iOS/macOS)

## Common Causes

1. **Auth callback throwing exceptions** (40% of cases)
   - Unhandled errors in your authCallback function
   - Wrong return type from callback (e.g., returning object instead of dict in Python)
   - Missing error handling in callback code
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 163-167 -->

2. **Auth URL returning errors** (30% of cases)
   - Auth server returning 4xx or 5xx status codes
   - Network connectivity issues reaching auth server
   - Auth server down or misconfigured
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-analysis.md lines 127-129 -->

3. **Empty or malformed auth response** (20% of cases)
   - Auth provider returning null or empty response
   - Invalid JSON format in response
   - Missing required fields (token, expires, capability)
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-analysis.md lines 47-51 -->

4. **Serialization issues** (10% of cases)
   - Problems serializing capability field in .NET
   - JSON parsing errors with auth response
   <!-- Source: Support case from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 164-170 -->

## Resolution Steps

1. **Check the error's cause field**
   - The 80019 error includes a `cause` field with the underlying error
   - This reveals the specific problem with your auth provider
   <!-- Source: Support insight from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 147-150 -->

2. **For authCallback errors**
   - Add proper error handling to your callback:
   ```javascript
   authCallback: function(tokenParams, callback) {
     try {
       // Your auth logic here
       const tokenDetails = generateToken(tokenParams);
       callback(null, tokenDetails);
     } catch (error) {
       console.error('Auth callback failed:', error);
       callback(error);
     }
   }
   ```
   <!-- Source: Solution from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 54-66 -->
   - Ensure you're returning the correct type (dict/object as expected by SDK)
   - For debugging, use authCallback instead of authUrl for better visibility
   <!-- Source: Support recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 178-181 -->

3. **For authUrl errors**
   - Test your auth URL directly with curl or a browser
   - Verify it returns valid JSON with required fields:
   ```json
   {
     "token": "your-jwt-token",
     "expires": 1234567890000,
     "capability": {"*": ["*"]}
   }
   ```
   <!-- Source: Solution from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 68-76 -->
   - Check server logs for errors
   - Ensure the endpoint is accessible from your app

4. **For 403 responses**
   - This indicates a permanent authentication failure
   - The connection will move to "failed" state and won't retry
   - Fix the authentication issue on your server before reconnecting
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-analysis.md lines 131-133 -->

5. **For .NET serialization issues**
   - Use `CreateTokenRequestAsync` instead of `CreateTokenRequestObjectAsync`
   - Ensure capability field is properly formatted
   <!-- Source: Support resolution from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 164-170 -->

## Automatic Handling

- **403 errors**: Connection moves to "failed" state (permanent failure, no automatic retry)
- **401/other errors**: Connection moves to "disconnected" state (SDK will retry with backoff)
- **Timeout errors**: Behavior varies by SDK (failed or disconnected state)
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-analysis.md lines 130-133 -->

## Prevention

- Implement robust error handling in auth callbacks
- Validate auth responses before returning them
- Set reasonable timeouts for auth requests
- Monitor your auth server health and availability
- Test authentication under various network conditions
<!-- Source: Best practices from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 85-104 -->

## Related Resources

- [Authentication documentation](https://ably.com/docs/auth)
- [Token authentication guide](https://ably.com/docs/auth/token)
- [authCallback documentation](https://ably.com/docs/auth/token#auth-callback)
- [authUrl documentation](https://ably.com/docs/auth/token#auth-url)
- Related errors: [40170](./40170-error-from-client-token-callback.md) (often appears alongside 80019)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 80019
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
- Existing Documentation: None found
- Repository Overviews: Not needed (research files contained sufficient context)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Solutions from knowledge file lines 54-104 incorporated with minimal changes
- Content Excluded: None - all relevant information included
- Recommendations Source: 
  - Error handling pattern from knowledge file lines 54-66
  - Auth URL validation from knowledge file lines 68-76
  - Debugging tips from knowledge file lines 115-119
- Code Examples Rationale: Included error handling example as it's essential for resolution (from knowledge file)
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on support cases in https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 163-167
  - Cause 2: From SDK code analysis in https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-analysis.md lines 127-129
  - Cause 3: From Java SDK at https://github.com/ably/ably-java/blob/main/lib/src/main/java/io/ably/lib/rest/Auth.java#L835
  - Cause 4: From .NET support case in https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 164-170
- Resolution Steps: 
  - Step 1: Support insight from https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 147-150
  - Step 2: Best practice from knowledge file lines 54-66 and support recommendation lines 178-181
  - Step 3: Auth URL format from knowledge file lines 68-76
  - Step 4: State transitions from analysis file lines 131-133
  - Step 5: .NET specific fix from knowledge file lines 164-170
- Prevention: Based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/80019-knowledge.md lines 85-104
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 80019
2. Regenerate: Run `./bin/ably-os errors document-error-codes 80019 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->