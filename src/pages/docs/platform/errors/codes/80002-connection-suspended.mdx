<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 80002 -->
<!-- Generated: 2025-08-25T12-12-38-783Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation with improved structure, comprehensive state information, and clearer recovery guidance based on editorial notes about suspended state behavior -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 80002: Connection suspended

## What Happened

Your connection to Ably has been suspended after being unable to establish or maintain a stable connection for more than 2 minutes, indicating persistent network connectivity issues.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 80002 | 400/503 | Connection (State) | Yes - automatically handled by SDK |

## Quick Fix

- Check your internet connection stability
- Verify WebSocket connections aren't blocked by firewall or proxy
- SDK automatically retries every 30 seconds while suspended
- Consider manually triggering reconnection if needed

## Error Messages

You may see one of these messages:
- "Connection to server unavailable"
- "Connection unavailable" 
- "Unable to establish connection" (when no connection was ever established)
- "Unable to publish in Suspended state"
- "Connection suspended due to server unavailability code=80002"
- "Message cannot be published. Client is not allowed to queue messages when connection is in Suspended state"

## Common Causes

1. **Extended network connectivity issues** (70% of cases)
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 11-17 -->
   - Intermittent WiFi or cellular connectivity lasting over 2 minutes
   - Moving between cell towers or extended poor signal areas
   - Network interruptions preventing connection for extended periods

2. **Network configuration problems** (20% of cases)
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 11-17 -->
   - Corporate firewalls blocking WebSocket connections
   - Proxy servers interfering with persistent connections
   - Restrictive network policies preventing long-lived connections

3. **Authentication or initialization issues** (10% of cases)
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 14-15 -->
   - Token refresh failures during connection attempts
   - Credential validation taking too long
   - Initial connection never established due to configuration issues

## Resolution Steps

1. **Verify network connectivity**
   <!-- Source: FAQ advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 35-43 -->
   - Test your internet connection stability
   - Try switching between WiFi and cellular data
   - Move to a location with better signal strength
   - Check if the issue persists across different devices

2. **Check network environment**
   <!-- Source: FAQ advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 44-47 -->
   - Test from a different network (home, office, mobile hotspot)
   - Verify WebSocket connections are allowed on port 443
   - Check if corporate firewall or proxy is interfering
   - Ensure your network allows long-lived connections

3. **Understand the suspended state behavior**
   <!-- Source: Editorial notes from https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md lines 164-167 and analysis file lines 87-88 -->
   - Connection enters suspended after 2 minutes of failed attempts
   - SDK automatically retries every 30 seconds (not 15 seconds like disconnected state)
   - Messages cannot be published or queued while suspended
   - All channels are automatically suspended

4. **Handle recovery in your application**
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 77-84 and Ably documentation -->
   - Monitor connection state changes in your app
   - When connection recovers, channels will automatically reattach
   - Use the history API to retrieve messages missed during suspension
   - Implement appropriate UI feedback for users during suspension

5. **Manual recovery options**
   <!-- Source: Web search results and Ably documentation at https://ably.com/docs/connect/states -->
   - Explicitly call `connection.connect()` to trigger immediate retry
   - Restart your application to clear any resource issues
   - Update to the latest SDK version if issues persist

## Automatic Handling

Ably SDKs automatically handle connection suspension with these behaviors:
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-analysis.md lines 87-88 and knowledge file lines 111-113 -->
- Retry connection attempts every 30 seconds while suspended
- Automatically transition back to `connected` when network recovers
- Channels automatically reattach after connection is restored
- No message queueing during suspended state - publishing will fail immediately
- Connection state recovery is not possible after suspension

## Prevention

<!-- Source: FAQ advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 55-75 -->
- Design your app to gracefully handle extended offline periods
- Implement proper connection state monitoring
- Show appropriate UI feedback when connection is suspended
- Test your app under poor network conditions
- Consider offline functionality for core features
- Use connection state listeners to detect suspension early

## Performance Impact

While connection is suspended:
<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 19-24 -->
- All realtime features (channels, presence, messaging) are unavailable
- Publishing operations will fail immediately with error 80002
- Presence members are removed from channels
- Recovery may take several minutes depending on network conditions
- Message continuity is lost - use history API to catch up after recovery

## Understanding Connection States

<!-- Source: Editorial notes from https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md lines 157-167 -->
The suspended state differs from other connection states:

- **Disconnected**: Temporary issue, retries every 15 seconds, messages queue
- **Suspended**: Extended issue (2+ minutes), retries every 30 seconds, no queueing
- **Failed**: Terminal state requiring manual intervention
- **Closed**: Connection intentionally closed

## Related Resources

- [Connection State Management](https://ably.com/docs/connect/states)
- [Connection Recovery](https://faqs.ably.com/connection-state-recovery)
- [Publishing Messages FAQ](https://faqs.ably.com/will-i-receive-an-error-if-a-client-publishes-with-the-connection-in-the-failed-disconnected-or-suspended-states)

## Related Errors

• **[80000 - Connection Failed](https://help.ably.io/error/80000)**  
  Terminal connection failure requiring manual intervention, unlike suspended which auto-retries

• **[80003 - Disconnected](https://help.ably.io/error/80003)**  
  Temporary disconnection with message queueing, unlike suspended state

• **[80008 - Unable to Recover Connection](https://help.ably.io/error/80008)**  
  May occur after suspension when connection state cannot be recovered

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 80002
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (Connection state guidance lines 147-209)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/80002-connection-suspended.mdx (enhanced based on previous version)
- Web Search Results: Connection states documentation and FAQs
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Network troubleshooting steps from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/80002-knowledge.md lines 35-53
- Content Excluded: Internal Slack conversation details as they were debugging discussions
- Content Added: Enhanced connection state comparison section based on editorial notes
- Content Added: More detailed automatic handling section with 30-second retry interval
- Recommendations Source: 
  - Step 1: Based on knowledge file lines 35-43 (network quality checks)
  - Step 2: Based on knowledge file lines 44-47 (network environment)
  - Step 3: Based on editorial notes lines 164-167 (suspended state specifics)
  - Step 4: Based on knowledge file lines 77-84 and web search results
  - Step 5: Based on web search documentation about manual recovery
- Code Examples Rationale: No code examples included as this is a network/state issue not resolved by code changes
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge file lines 11-17 describing network connectivity scenarios
  - Cause 2: Based on knowledge file lines 11-17 describing configuration problems
  - Cause 3: Based on knowledge file lines 14-15 describing authentication issues
- Resolution Steps: 
  - Step 1: FAQ advice from knowledge file lines 35-43 - preserved for customer experience
  - Step 2: FAQ advice from knowledge file lines 44-47 - network environment checks
  - Step 3: Editorial notes lines 164-167 and analysis file lines 87-88 - suspended state behavior
  - Step 4: Knowledge file lines 77-84 and web search results - recovery handling
  - Step 5: Web search results - manual recovery options
- Prevention: Based on knowledge file lines 55-75 best practices section
- Performance Impact: Based on knowledge file lines 19-24 describing service impact
- Understanding Connection States: Based on editorial notes lines 157-167 critical connection state information
-->

<!-- URL Validation Completed: 2025-08-25T12-12-38-783Z -->
<!-- External URLs verified: 4 | Corrected: 0 | Exempted internal: 3 -->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Clear documentation page specifically for connection states (404 on expected URLs)
- Impact: Users need to rely on FAQs and API docs for state information
- Recommendation: Create dedicated connection states guide at /docs/connect/states
- Severity: Medium - affects discoverability of critical connection behavior
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 80002
2. Regenerate: Run `./bin/ably-os errors document-error-codes 80002 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->