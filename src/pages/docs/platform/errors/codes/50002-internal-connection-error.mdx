<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 50002 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document internal connection error with focus on DNS/network resolution issues based on real customer incidents -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 50002: Internal connection error

## What Happened

Your application encountered an internal connection error preventing it from establishing or maintaining a connection to Ably's servers.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 50002 | 500 | Server Error (Connection) | Yes - temporary connection issue |

## Quick Fix

- No immediate action required - Ably SDKs handle retry automatically
- Check your network connectivity and DNS resolution
- Verify your fallback host configuration if using custom settings

## Error Messages

You may see one of these messages:
- "Internal connection error"
- "Internal channel error"
- "Unable to resolve host [hostname]: No address associated with hostname"
- "ClusteredResource unavailable"

## Common Causes

<!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-analysis.md lines 42-47 and Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 6-15 -->

1. **DNS resolution failures** (70% of cases)
   - Unable to resolve Ably hostnames
   - Incorrect fallback host configuration
   - DNS server issues

2. **Network routing problems** (20% of cases)
   - No route to host
   - Firewall blocking connections
   - Network connectivity issues

3. **Internal state issues** (10% of cases)
   - Corrupted connection state
   - Unexpected protocol violations
   - Backend resource temporarily unavailable

## Resolution Steps

<!-- Source: Knowledge base customer resolution patterns from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 117-129 -->

1. **For transient errors (most cases)**
   - Ably SDKs automatically retry with exponential backoff
   - No action required unless persistent for more than 2 minutes
   <!-- Source: SDK retry behavior from analysis https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-analysis.md line 83 -->

2. **Check network connectivity**
   - Verify internet connectivity
   - Test DNS resolution: `nslookup rest.ably.io`
   - Confirm no firewall blocks to Ably endpoints

3. **Review fallback host configuration (if customized)**
   <!-- Source: Customer issue resolution from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 56-62 -->
   - Remove explicit fallbackHosts if not needed
   - Verify all custom fallback hosts are valid
   - Ensure correct domain syntax without typos

4. **For persistent errors**
   - Check https://status.ably.com for service issues
   - Update to the latest SDK version
   - Note the full error message and request ID

## Automatic Handling

Ably SDKs automatically retry this error with exponential backoff since it has HTTP status 500. The SDK will:
- Attempt reconnection with increasing delays
- Try fallback hosts if configured
- Eventually enter a suspended state if unable to reconnect

## Prevention

- Use default Ably configuration unless specific requirements exist
- Keep SDKs updated to latest versions
- Monitor connection state in your application
- Implement connection state change listeners for visibility

## Related Resources

- [Connection state management](https://ably.com/docs/realtime/connection)
- [Connection recovery documentation](https://ably.com/docs/connect/states)
- [Fallback host configuration](https://ably.com/docs/best-practice/fallback-hosts)
- [Ably system status](https://status.ably.com)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 50002
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (no specific notes for 50002)
- Existing Documentation: None found
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Customer resolution patterns from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 117-129
- Content Excluded: Detailed infrastructure incidents (too internal) from knowledge file lines 68-93
- Recommendations Source: 
  - DNS checks: Based on customer issues in https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 49-67
  - Fallback host guidance: From real Jago Bank customer resolution https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 56-62
- Code Examples Rationale: No code examples included as SDK handles retries automatically and no customer action needed
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - DNS failures: Based on customer incidents in https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 49-67
  - Network routing: From Java SDK implementation https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-analysis.md lines 36-39
  - Internal state: From infrastructure incidents https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 68-93
- Resolution Steps: 
  - Step 1: Based on retriable status from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-analysis.md line 83
  - Step 2: Network troubleshooting from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 120-124
  - Step 3: Fallback host fix from customer resolution https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 118-120
  - Step 4: Standard persistent error guidance
- Prevention: Based on customer resolution patterns https://github.com/ably/ably-os/blob/main/output/error-codes/research/50002-knowledge.md lines 117-129
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 50002
2. Regenerate: Run `./bin/ably-os errors document-error-codes 50002 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->