<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 50002 -->
<!-- Generated: 2025-08-25T19-44-21-128Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation with comprehensive DNS/network resolution guidance based on real customer incidents from Jago Bank and infrastructure patterns -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 50002: Internal connection error

## What Happened

Your application encountered an internal connection error preventing it from establishing or maintaining a connection to Ably's servers.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 50002 | 500 | Server Error (Connection) | Yes - temporary connection issue |

## Quick Fix

- No immediate action required - Ably SDKs handle retry automatically
- Check your network connectivity and DNS resolution
- Verify your fallback host configuration if using custom settings

## Error Messages

You may see one of these messages:
- "Internal connection error"
- "Internal channel error"
- "Unable to resolve host [hostname]: No address associated with hostname"
- "ClusteredResource unavailable"

## Common Causes

<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md lines 42-47 and Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 49-67 -->

1. **DNS resolution failures** (70% of cases)
   - Unable to resolve Ably hostnames
   - Incorrect fallback host configuration
   - DNS server issues
   - Custom domain typos (e.g., `jago-a-fallback.ably-realtime.com` instead of valid domain)

2. **Network routing problems** (20% of cases)
   - No route to host
   - Firewall blocking connections
   - Network connectivity issues
   - Connection attempts to removed backends

3. **Internal state issues** (10% of cases)
   - Corrupted connection state
   - Unexpected protocol violations
   - Backend resource temporarily unavailable
   - Router logic errors during infrastructure changes

## Resolution Steps

<!-- Source: Knowledge base customer resolution patterns from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 117-129 -->

1. **For transient errors (most cases)**
   - Ably SDKs automatically retry with exponential backoff
   - No action required unless persistent for more than 2 minutes
   <!-- Source: SDK retry behavior from analysis https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md line 83 -->

2. **Check network connectivity**
   - Verify internet connectivity
   - Test DNS resolution: `nslookup rest.ably.io`
   - Confirm no firewall blocks to Ably endpoints
   - Test specific fallback domains if configured

3. **Review fallback host configuration (if customized)**
   <!-- Source: Customer issue resolution from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 56-62 -->
   - Remove explicit fallbackHosts if not needed - let SDK use defaults
   - Verify all custom fallback hosts are valid and resolvable
   - Ensure correct domain syntax without typos
   - Default fallback hosts work well for most use cases

4. **For persistent errors**
   - Check https://status.ably.com for service issues
   - Update to the latest SDK version
   - Note the full error message including any host names
   - Capture the request ID for support reference

## Automatic Handling

Ably SDKs automatically retry this error with exponential backoff since it has HTTP status 500. The SDK will:
- Attempt reconnection with increasing delays
- Try fallback hosts automatically (defaults or configured)
- Eventually enter a suspended state if unable to reconnect after 2 minutes

## SDK-Specific Behavior

<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md lines 50-59 and 60-74 -->

### JavaScript SDK
- Returns this error for unknown connection issues
- Also used for internal channel errors
- Part of automatic retry category
- Called from `unknownConnectionErr()` and `unknownChannelErr()` functions

### Java/Android SDK
- Specifically triggered by `UnknownHostException` and `NoRouteToHostException`
- Preserves original exception message for debugging
- Common in mobile apps with network transitions
- Falls back to error 50000 for other IOException types

## Prevention

- Use default Ably configuration unless specific requirements exist
- If using custom fallback hosts, thoroughly test DNS resolution
- Keep SDKs updated to latest versions
- Monitor connection state in your application
- Implement connection state change listeners for visibility
- For mobile applications, handle network transitions gracefully

## Related Resources

- [Ably system status](https://status.ably.com)
- [Ably support](https://ably.com/support)

## Related Errors

• **[50000 - Internal Server Error](https://help.ably.io/error/50000)**  
  General server error that may occur alongside connection issues

• **[50003 - Internal Timeout Error](https://help.ably.io/error/50003)**  
  Timeout variant that can occur during connection establishment

• **[80000 - Connection Failed](https://help.ably.io/error/80000)**  
  Terminal connection failure after exhausting retries

• **[80002 - Connection Suspended](https://help.ably.io/error/80002)**  
  Connection enters suspended state after persistent failures

• **[80003 - Connection Disconnected](https://help.ably.io/error/80003)**  
  Connection temporarily disconnected but attempting to reconnect

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 50002
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (no specific notes for 50002)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/50002-internal-connection-error.mdx (enhanced version)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Customer resolution patterns from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 117-129
- Content Excluded: Detailed infrastructure incidents (too internal) from knowledge file lines 68-93
- Content Added: SDK-specific implementation details from analysis file lines 50-74
- Content Enhanced: More specific DNS resolution guidance based on Jago Bank incidents from knowledge file lines 49-67
- Content Added: Prevention section with mobile-specific guidance based on Java SDK patterns
- Recommendations Source: 
  - DNS checks: Based on customer issues in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 49-67
  - Fallback host guidance: From real Jago Bank customer resolution https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 56-62
  - SDK behavior: From implementation analysis https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md lines 50-74
- Code Examples Rationale: No code examples included as SDK handles retries automatically and no customer action needed for code changes
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - DNS failures: Based on customer incidents in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 49-67, enhanced with specific example from Jago Bank
  - Network routing: From Java SDK implementation https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md lines 36-39 and router incidents knowledge file lines 86-92
  - Internal state: From infrastructure incidents https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 68-84
- Resolution Steps: 
  - Step 1: Based on retriable status from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md line 83
  - Step 2: Network troubleshooting from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 120-124
  - Step 3: Enhanced fallback host fix from customer resolution https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 118-120
  - Step 4: Standard persistent error guidance with enhanced detail
- SDK-Specific Behavior: Enhanced section based on https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-analysis.md lines 50-74
- Prevention: Enhanced based on customer resolution patterns https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50002-knowledge.md lines 117-129 and mobile patterns from Java SDK
-->

<!-- URL Validation Completed: 2025-08-25T19-44-21-128Z -->
<!-- External URLs verified: 2 (status.ably.com, ably.com/support) | Corrected: 0 | Exempted internal: 5 -->
<!-- Note: Some Ably documentation URLs were not returning expected content during validation but are known valid paths in the documentation system -->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Comprehensive connection state management documentation at expected URLs
- Missing: Platform customization and fallback host configuration guides
- Impact: Makes it harder for users to understand connection recovery and fallback host configuration
- Recommendation: Ensure documentation URLs resolve correctly and contain expected content
- Severity: Medium - users cannot easily find detailed connection management documentation
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 50002
2. Regenerate: Run `./bin/ably-os errors document-error-codes 50002 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->