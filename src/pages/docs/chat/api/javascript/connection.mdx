---
title: Connection
meta_description: ""
---

The `Connection` interface represents a connection to Ably.

Access it via `chatClient.connection`.

---

## Accessors

| Property | Description | Type |
| -------- | ----------- | ---- |
| `error` | The current error, if any, that caused the connection to enter the current status. | [`ErrorInfo`](/docs/chat/api/javascript/error-info) \| `undefined` |
| `status` | The current status of the connection. | [`ConnectionStatus`](#connectionstatus) |

---

### ConnectionStatus

A `Connection` is in one of the following states:

| ConnectionStatus | Description |
| ---------------- | ----------- |
| `Initialized` | The connection has been initialized but has not yet been opened. |
| `Connecting` | The connection is currently attempting to open. |
| `Connected` | The connection is open and messages can be sent and received. |
| `Disconnected` | The connection is temporarily disconnected and will attempt to reconnect automatically. |
| `Suspended` | The connection is in an extended period of disconnection, but it will attempt to reconnect. Rooms will be reattached on a successful reconnection, however message history will not be automatically recovered. |
| `Failed` | The connection has permanently failed and will not attempt to reconnect. |

---

## Listen for connection status changes <a id="onStatusChange"/>

`connection.onStatusChange()`

Registers a listener that will be called whenever the connection status changes.

`onStatusChange(listener: ConnectionStatusListener): StatusSubscription`

### Parameters

Use the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `listener` | The function to call when the status changes. | [`ConnectionStatusListener`](#connectionstatuslistener) |

#### ConnectionStatusListener

A function that can be called when the connection status changes.

`ConnectionStatusListener: (change: ConnectionStatusChange) => void`

It uses the following parameters:

| Parameter | Description | Type |
| --------- | ----------- | ---- |
| `change` | The change in connection status. | [`ConnectionStatusChange`](#connectionstatuschange) |

#### ConnectionStatusChange

An interface that represents a change in connection status.

It has the following properties:

| Property | Description | Type |
| -------- | ----------- | ---- |
| `previous` | The previous connection status. | [`ConnectionStatus`](#connectionstatus) |
| `current` | The current connection status. | [`ConnectionStatus`](#connectionstatus) |
| `reason` | *Optional* The error that caused the change, if any. | [`ErrorInfo`](/docs/chat/api/javascript/error-info) |
| `timestamp` | The time at which the status change occurred. | Date |

### Returns

Returns a [`StatusSubscription`](#statussubscription) object that can be used to unregister the listener.

#### StatusSubscription

An interface that represents a subscription to status change events. It also provides a method of cleaning up subscriptions that are no longer needed.

It has the following properties:

| Property | Description | Type |
| -------- | ----------- | ---- |
| `off` | Unsubscribes from the status change events. | `() => void` |

<Code>
```javascript
const subscription = chatClient.connection.onStatusChange((change) => {
  console.log(`Connection status changed from ${change.previous} to ${change.current}`);
  if (change.reason) {
    console.error('Error:', change.reason);
  }
});

// Unsubscribe when done
subscription.off();
```
</Code>
