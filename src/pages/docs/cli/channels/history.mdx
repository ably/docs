---
title: "ably channels history"
meta_description: "Retrieve message history for an Ably channel using the CLI."
meta_keywords: "ably cli, cli, command, channel history, message history, persistence, historical data"
---

<Code>
```shell
ably channels history <channel> [flags]
```
</Code>

Use the `ably channels history` command to retrieve messages that have been previously sent to a channel.

Messages are stored for 2 minutes by default, unless a longer duration is [configured](/docs/storage-history/storage) for your app.

<Aside data-type="note">
You can use the [`ably channels publish`](/docs/cli/channels/publish) command to publish some messages to retrieve from history.
</Aside>

## Arguments

Pass the following argument to the `ably channels history` command:

### `<channel>` <a id="channel"/>

The channel name to retrieve history for, for example: `example-channel`.

## Output

Each message returned from history has the following properties:

| Property | Description |
| -------- | ----------- |
| Timestamp | When the message was published in ISO 8601 format. |
| Event | The event name if one was specified when the message was published. |
| Client ID | The client ID of the publisher. |
| Data | The message contents. |

## Flags

You can optionally pass the following flags to the `ably channels history` command:

### `--start` <a id="start"/>

Start time for the history query in ISO 8601 format, for example: `2025-01-20T09:00:00Z`.

### `--end` <a id="end"/>

End time for the history query in ISO 8601 format, for example: `2025-01-20T10:30:00Z`.

### `--direction` <a id="direction"/>

Direction of message retrieval. Options are `backwards` or `forwards`. The default is `backwards`.

* `backwards`: Retrieve messages from newest to oldest
* `forwards`: Retrieve messages from oldest to newest

### `--limit` <a id="limit"/>

Maximum number of messages to retrieve. The default is `50`. Maximum allowed is `1000`.

### `--cipher` <a id="cipher"/>

Decryption key for encrypted messages. Use AES-128 encryption format.

## Global flags

The following global flags are supported using the `ably channels history` command:

* [`--token`](/docs/cli#token)
* [`--json`](/docs/cli#json)
* [`--pretty-json`](/docs/cli#pretty-json)
* [`--api-key`](/docs/cli#api-key)
* [`--access-token`](/docs/cli#access-token)
* [`--client-id`](/docs/cli#client-id)
* [`--env`](/docs/cli#env)
* [`--host`](/docs/cli#host)
* [`--endpoint`](/docs/cli#endpoint)
* [`--verbose`](/docs/cli#verbose)

## Examples

### Retrieve recent message history

Get the last 10 messages from a channel:

<Code>
```shell
ably channels history example-channel --limit 10
```
</Code>

**Output:**
<Code>
```text
Using: App=example-app (Ab1CdE) â€¢ Key=example-key (Ab1CdE.FgHiJk)

Found 3 messages in the history of channel example-channel:

[1] 2025-01-20T10:35:15.896Z
Event: (none)
Client ID: ably-cli-abc123
Data:
Message 3 at 1758110833755

[2] 2025-01-20T10:35:14.852Z
Event: (none)
Client ID: ably-cli-abc123
Data:
Message 2 at 1758110832714

[3] 2025-01-20T10:35:13.745Z
Event: (none)
Client ID: ably-cli-abc123
Data:
Message 1 at 1758110831689

Showing maximum of 10 messages. Use --limit to show more.
```
</Code>

### Retrieve messages within a time range

Get messages published between specific times:

<Code>
```shell
ably channels history example-channel --start "2025-01-20T09:00:00Z" --end "2025-01-20T10:00:00Z"
```
</Code>

### Retrieve messages in chronological order

Get messages from oldest to newest:

<Code>
```shell
ably channels history example-channel --direction forwards --limit 5
```
</Code>

### Retrieve messages from encrypted channel

Get history from a channel that uses message encryption:

<Code>
```shell
ably channels history example-encrypted-channel --cipher "0123456789abcdef"
```
</Code>

### Get all available history

Retrieve the maximum number of messages (up to 1000):

<Code>
```shell
ably channels history example-channel --limit 1000
```
</Code>


