---
title: Types
meta_description: "Realtime Client Library SDK API reference section for types."
meta_keywords: "Ably, Ably realtime, API Reference, Realtime SDK, types, objects, options"
redirect_from:
  - /docs/api/versions/v1.1/realtime-sdk/types
  - /docs/api/versions/v1.0/realtime-sdk/types
  - /docs/api/versions/v0.8/realtime-sdk/types
  - /docs/realtime/types
  - /docs/realtime/versions/v1.1/types
  - /docs/realtime/versions/v1.0/types
  - /docs/realtime/versions/v0.8/types
---

The Ably client library defines both data types and option types. Data types are used to represent object such as messages. Option types are used in method arguments.

Where client libraries support both Realtime and REST APIs, the types are shared between both clients.

All types are always classes or their respective equivalent for each language implementation. Options on the other hand, may often support both typed option classes or more flexible key value objects such as a Hash or plain JavaScript object.

If you are interested in finding out more about the exact types and options definitions in each language, we recommend you download [our open source libraries](https://ably.com/download) and review the code.

## Data types

<If lang="java">

### io.ably.lib.types.AblyException <a id="#ably-exception" />

</If>
<If lang="ruby">

### Ably::Exceptions::BaseAblyException <a id="#ably-exception" />

</If>
<If lang="csharp">

### IO.Ably.AblyException <a id="#ably-exception" />

</If>
<If lang="flutter">

### ably.AblyException <a id="#ably-exception" />

</If>

<If lang="java,csharp,flutter">

An `AblyException` is an exception encapsulating error information containing an Ably-specific error code and generic status code, where applicable.

#### <If lang="java">Members</If><If lang="ruby">Attributes</If><If lang="flutter">Properties</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="java,flutter">errorInfo</If><If lang="csharp">ErrorInfo</If> | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) corresponding to this exception, where applicable | `ErrorInfo` |

</If>

<If lang="ruby">

A `BaseAblyException` is an exception encapsulating error information containing an Ably-specific error code and generic status code, where applicable.

#### Attributes

| Property | Description | Type |
|----------|-------------|------|
| code | Ably error code (see [ably-common/protocol/errors.json](https://github.com/ably/ably-common/blob/main/protocol/errors.json)) | `Integer` |
| status_code | HTTP Status Code corresponding to this error, where applicable | `Integer` |
| message | Additional message information, where available | `String` |

</If>

### ChannelDetails <a id="#channel-details" />

`ChannelDetails` is an object returned when requesting or receiving [channel metadata](/docs/metadata-stats/metadata). It contains information on the channel itself, along with the current state of the channel in the [`ChannelStatus`](#channel-status) object.

| Property | Description | Type |
|----------|-------------|------|
| channelId | The required name of the channel including any qualifier, if any | `string` |
| region | In events relating to the activity of a channel in a specific region, this optionally identifies the region | `string` |
| isGlobalMaster | In events relating to the activity of a channel in a specific region, this optionally identifies whether or not that region is responsible for global coordination of the channel | `boolean` |
| status | An optional [`ChannelStatus`](#channel-status) instance | [`ChannelStatus`](#channel-status) |

The following is an example of a `ChannelDetails` JSON object:

<Code>
```json
  {
    "channelId": "foo",
    "status": {
      "isActive": true,
      "occupancy": {
        "metrics": {
          "connections": 1,
          "publishers": 1,
          "subscribers": 1,
          "presenceConnections": 1,
          "presenceMembers": 0,
          "presenceSubscribers": 1,
          "objectPublishers": 1,
          "objectSubscribers": 1
        }
      }
    }
  }
```
</Code>

### ChannelDetails.ChannelStatus <a id="#channel-status" />

`ChannelStatus` is contained within the [`ChannelDetails`](#channel-details) object, and optionally contains an [`Occupancy`](#occupancy) object.

| Property | Description | Type |
|----------|-------------|------|
| isActive | A required boolean value indicating whether the channel that is the subject of the event is active. For events indicating regional activity of a channel this indicates activity in that region, not global activity | `boolean` |
| occupancy | An optional [`Occupancy`](#occupancy) instance indicating the occupancy of the channel. For events indicating regional activity of a channel this indicates activity in that region, not global activity | [`Occupancy`](#occupancy) |

### ChannelDetails.ChannelStatus.Occupancy <a id="#occupancy" />

Occupancy is optionally contained within the [`ChannelStatus`](#channel-status) object, and contains metadata relating to the occupants of the channel. This is usually contained within the `occupancy` attribute of the [`ChannelStatus`](#channel-status) object.

The `occupancy` attribute contains the `metrics` attribute, which contains the following members:

| Property | Description | Type |
|----------|-------------|------|
| connections | The number of connections | `integer` |
| publishers | The number of connections attached to the channel that are authorised to publish | `integer` |
| subscribers | The number of connections attached that are authorised to subscribe to messages | `integer` |
| presenceSubscribers | The number of connections that are authorised to subscribe to presence messages | `integer` |
| presenceConnections | The number of connections that are authorised to enter members into the presence channel | `integer` |
| presenceMembers | The number of members currently entered into the presence channel | `integer` |
| objectPublishers | The number of connections that are authorised to publish updates to objects on the channel | `integer` |
| objectSubscribers | The number of connections that are authorised to subscribe to objects on the channel | `integer` |

<If lang="flutter,ruby">

#### <If lang="flutter">DeviceDetails</If><If lang="ruby">Ably::Models::DeviceDetails</If> <a id="#device-details" />

A `DeviceDetails` is a type encapsulating attributes of a device registered for push notifications.

##### Properties

| Property | Description | Type |
|----------|-------------|------|
| id | unique identifier for the device generated by the device itself | `String` |
| <If lang="flutter">clientId</If><If lang="ruby">client_id</If> | optional trusted [client identifier](/docs/auth/identified-clients) for the device | `String` |
| <If lang="flutter">formFactor</If><If lang="ruby">form_factor</If> | form factor of the push device. Must be one of `phone`, `tablet`, `desktop`, `tv`, `watch`, `car`, or `embedded` | `String` |
| metadata | optional metadata object for this device. The metadata for a device may only be set by clients with `push-admin` privileges | `Object` |
| platform | platform of the push device. Must be one of `ios` or `android` | `String` |
| deviceSecret | Secret value for the device | `String` |
| push.recipient | push recipient details for this device. See the [REST API push publish documentation](/docs/api/rest-api) for more details | `Object` |
| push.state | the current state of the push device being either `Active`, `Failing`, or `Failed` | `String` |
| <If lang="flutter">push.errorReason</If><If lang="ruby">push.error_reason</If> | when the device's state is failing or failed, this attribute contains the reason for the most recent failure | [`ErrorInfo`](/docs/api/realtime-sdk/types) |

#### <If lang="flutter">LocalDevice</If><If lang="ruby">Ably::Models::LocalDevice</If> <a id="#local-device" />

An extension of [`DeviceDetails`](/docs/api/realtime-sdk/types#device-details). In addition to the properties of [`DeviceDetails`](/docs/api/realtime-sdk/types#device-details), it includes the following:

##### Properties

| Property | Description | Type |
|----------|-------------|------|
| deviceIdentityToken | a unique identity token for the device | `String` |

</If>

### <If lang="javascript,nodejs,go">ErrorInfo</If><If lang="flutter">ably.ErrorInfo</If><If lang="csharp">IO.Ably.ErrorInfo</If><If lang="java">io.ably.lib.types.ErrorInfo</If><If lang="objc,swift">ARTErrorInfo</If><If lang="ruby">Ably::Models::ErrorInfo</If> <a id="error-info" />

An `ErrorInfo` is a type encapsulating error information containing an Ably-specific error code and generic status code.

#### Properties

<If lang="javascript,nodejs,csharp,java,objc,swift,python,go,ruby">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby">code</If><If lang="csharp,go">Code</If> | Ably error code (see [ably-common/protocol/errors.json](https://github.com/ably/ably-common/blob/main/protocol/errors.json)) | `Integer` |
| <If lang="javascript,nodejs,java,objc,swift,python">statusCode</If><If lang="ruby">status_code</If><If lang="csharp,go">StatusCode</If> | HTTP Status Code corresponding to this error, where applicable | `Integer` |
| <If lang="javascript,nodejs,java,objc,swift,ruby">message</If><If lang="csharp,go">Message</If> | Additional message information, where available | `String` |
| <If lang="javascript,nodejs,java,objc,swift,ruby">cause</If><If lang="csharp,go">Cause</If> | Information pertaining to what caused the error where available | `ErrorInfo` |
| <If lang="javascript,nodejs,java,objc,swift,ruby">href</If><If lang="csharp,go">Href</If> | Ably may additionally include a URL to get more help on this error | `String` |

</If>
<If lang="flutter">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="flutter">code</If> | Ably error code (see [ably-common/protocol/errors.json](https://github.com/ably/ably-common/blob/main/protocol/errors.json)) | `Integer` |
| <If lang="flutter">statusCode</If> | HTTP Status Code corresponding to this error, where applicable | `Integer` |
| <If lang="flutter">message</If> | Additional message information, where available | `String` |
| <If lang="flutter">cause</If> | Information pertaining to what caused the error where available | `ErrorInfo` |
| <If lang="flutter">href</If> | Ably may additionally include a URL to get more help on this error | `String` |
| <If lang="flutter">requestId</If> | Request ID with which the error can be identified | `String` |

</If>

#### Error nesting

ErrorInfo objects can contain nested errors through the `cause` property, allowing you to trace the root cause of failures. When an operation fails due to underlying system errors, the main `ErrorInfo` provides the high-level failure reason while the nested `cause` contains more specific details about what went wrong.

One example of ErrorInfo nesting is [80019: Auth server rejecting request](/docs/platform/errors/codes#80019) where the main error indicates token renewal failed, while the nested `cause` contains the specific HTTP error from the auth server.

The following example demonstrates how to handle nested errors:

<If lang="javascript">

<Code>
```javascript
function handleError(error) {
    console.log(`Main error: ${error.code} - ${error.message}`);

    // Check for nested error
    if (error.cause) {
        console.log(`Root cause: ${error.cause.code} - ${error.cause.message}`);

        // Handle further nesting if needed
        if (error.cause.cause) {
            console.log(`Deeper cause: ${error.cause.cause.code} - ${error.cause.cause.message}`);
        }
    }
}
```
</Code>

</If>
<If lang="nodejs">

<Code>
```nodejs
function handleError(error) {
    console.log(`Main error: ${error.code} - ${error.message}`);

    // Check for nested error
    if (error.cause) {
        console.log(`Root cause: ${error.cause.code} - ${error.cause.message}`);

        // Handle further nesting if needed
        if (error.cause.cause) {
            console.log(`Deeper cause: ${error.cause.cause.code} - ${error.cause.cause.message}`);
        }
    }
}
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
func handleError(_ error: ARTErrorInfo) {
    print("Main error: \(error.code) - \(error.message)")

    if let cause = error.cause {
        print("Root cause: \(cause.code) - \(cause.message)")

        if let deeperCause = cause.cause {
            print("Deeper cause: \(deeperCause.code) - \(deeperCause.message)")
        }
    }
}
```
</Code>

</If>
<If lang="objc">

<Code>
```objc
- (void)handleError:(ARTErrorInfo *)error {
    NSLog(@"Main error: %ld - %@", (long)error.code, error.message);

    if (error.cause) {
        NSLog(@"Root cause: %ld - %@", (long)error.cause.code, error.cause.message);

        if (error.cause.cause) {
            NSLog(@"Deeper cause: %ld - %@", (long)error.cause.cause.code, error.cause.cause.message);
        }
    }
}
```
</Code>

</If>
<If lang="flutter">

<Code>
```flutter
void handleError(ably.ErrorInfo error) {
  print('Main error: ${error.code} - ${error.message}');

  if (error.cause != null) {
    print('Root cause: ${error.cause!.code} - ${error.cause!.message}');

    if (error.cause!.cause != null) {
      print('Deeper cause: ${error.cause!.cause!.code} - ${error.cause!.cause!.message}');
    }
  }
}
```
</Code>

</If>
<If lang="java">

<Code>
```java
public void handleError(ErrorInfo error) {
    System.out.println("Main error: " + error.code + " - " + error.message);

    if (error.cause != null) {
        System.out.println("Root cause: " + error.cause.code + " - " + error.cause.message);

        if (error.cause.cause != null) {
            System.out.println("Deeper cause: " + error.cause.cause.code + " - " + error.cause.cause.message);
        }
    }
}
```
</Code>

</If>
<If lang="csharp">

<Code>
```csharp
void HandleError(ErrorInfo error)
{
    Console.WriteLine($"Main error: {error.Code} - {error.Message}");

    if (error.Cause != null)
    {
        Console.WriteLine($"Root cause: {error.Cause.Code} - {error.Cause.Message}");

        if (error.Cause.Cause != null)
        {
            Console.WriteLine($"Deeper cause: {error.Cause.Cause.Code} - {error.Cause.Cause.Message}");
        }
    }
}
```
</Code>

</If>
<If lang="ruby">

<Code>
```ruby
def handle_error(error)
  puts "Main error: #{error.code} - #{error.message}"

  if error.cause
    puts "Root cause: #{error.cause.code} - #{error.cause.message}"

    if error.cause.cause
      puts "Deeper cause: #{error.cause.cause.code} - #{error.cause.cause.message}"
    end
  end
end
```
</Code>

</If>
<If lang="go">

<Code>
```go
func handleError(err *ErrorInfo) {
    fmt.Printf("Main error: %d - %s\n", err.Code, err.Message)

    if err.Cause != nil {
        fmt.Printf("Root cause: %d - %s\n", err.Cause.Code, err.Cause.Message)

        if err.Cause.Cause != nil {
            fmt.Printf("Deeper cause: %d - %s\n", err.Cause.Cause.Code, err.Cause.Cause.Message)
        }
    }
}
```
</Code>

</If>

### <If lang="javascript,nodejs,flutter,go">Message <a id="#message" /></If><If lang="objc,swift">ARTMessage <a id="#message" /></If><If lang="java">io.ably.lib.types.Message <a id="#message" /></If><If lang="ruby">Ably::Models::Message <a id="#message" /></If><If lang="csharp">IO.Ably.Message <a id="#message" /></If>

A `Message` represents an individual message that is sent to or received from Ably.

### <If lang="javascript,nodejs,flutter,go,objc,swift,java,ruby">name</If><If lang="csharp">Name</If>

The event name, if provided. <br />_Type: `String`_

### <If lang="javascript,nodejs,flutter,go,objc,swift,java,ruby">data </If><If lang="csharp">Data</If> <a id="#data" />

The message payload, if provided.

_Type: <If lang="javascript,nodejs,python,go">`String`, `StringBuffer`, `JSON Object`</If><If lang="java">`String`, `ByteArray`, `JSONObject`, `JSONArray`</If><If lang="ruby">`String`, `Binary` (ASCII-8BIT String), `Hash`, `Array`</If><If lang="objc">`NSString *`, `NSData *`, `NSDictionary *`, `NSArray *`</If><If lang="swift">`String`, `NSData`, `Dictionary`, `Array`</If><If lang="csharp">`String`, `byte[]`, `plain C# object that can be serialized to JSON`</If><If lang="flutter">`String`, `Map`, `List`</If>_

### <If lang="javascript,nodejs,flutter,go,objc,swift,java,ruby">extras </If><If lang="csharp">Extras</If> <a id="#extras" />

Metadata and/or ancillary payloads, if provided. Valid payloads include [`push`](/docs/push/publish#payload), `headers` (a map of strings to strings for arbitrary customer-supplied metadata), [`ephemeral`](/docs/pub-sub/advanced#ephemeral), and [`privileged`](/docs/platform/integrations/webhooks#skipping) objects.

_Type: <If lang="java">`JSONObject`, `JSONArray`</If><If lang="javascript,nodejs,python">`JSON Object`</If><If lang="ruby">`Hash`, `Array`</If><If lang="swift">`Dictionary`, `Array`</If><If lang="objc">`NSDictionary *`, `NSArray *`</If><If lang="csharp">`plain C# object that can be converted to JSON`</If>_

### <If lang="javascript,nodejs,flutter,go,objc,swift,java,ruby">id</If><If lang="csharp">Id</If> <a id="#id" />

A Unique ID assigned by Ably to this message.<br />_Type: `String`_

### <If lang="javascript,nodejs,flutter,go,objc,swift,java">clientId</If><If lang="csharp">ClientId</If><If lang="ruby">client_id</If> <a id="#client-id" />

The client ID of the publisher of this message.<br />_Type: `String`_

### <If lang="javascript,nodejs,flutter,go,objc,swift,java">connectionId</If><If lang="csharp">ConnectionId</If><If lang="ruby">connection_id</If> <a id="#connection-id" />

The connection ID of the publisher of this message.<br />_Type: `String`_

### <If lang="javascript,nodejs,flutter,objc,swift,java,ruby">connectionKey</If><If lang="csharp,go">ConnectionKey</If><If lang="ruby">connection_key</If> <a id="#connection-key" />

A connection key, which can optionally be included for a REST publish as part of the [publishing on behalf of a realtime client functionality](/docs/pub-sub/advanced#publish-on-behalf). <br />_Type: `String`_

### <If lang="javascript,nodejs,flutter,go,objc,swift,java,ruby">timestamp</If><If lang="csharp">Timestamp</If> <a id="#timestamp" />

Timestamp when the message was first received by the Ably, as <If lang="javascript,nodejs,python,java,objc,swift">milliseconds since the epoch</If><If lang="ruby">a `Time` object</If>.

_Type: <If lang="javascript,nodejs,python">`Integer`</If><If lang="java">`Long Integer`</If><If lang="ruby">`Time`</If><If lang="objc,swift">`NSDate`</If><If lang="csharp">`DateTimeOffset`</If><If lang="flutter,go">`Integer`</If>_

### <If lang="javascript,nodejs,flutter,go,objc,swift,java,ruby">encoding</If><If lang="csharp">Encoding</If> <a id="#encoding" />

This will typically be empty as all messages received from Ably are automatically decoded client-side using this value. However, if the message encoding cannot be processed, this attribute will contain the remaining transformations not applied to the `data` payload. <br />_Type: `String`_

<If lang="javascript,nodejs">

### action <a id="#action" />

The action type of the message, one of the [`MessageAction`](/docs/api/realtime-sdk/types#message-action) enum values.

_Type: `int enum { MESSAGE_CREATE, MESSAGE_UPDATE, MESSAGE_DELETE, META, MESSAGE_SUMMARY }`_

### serial <a id="#serial" />

A server-assigned identifier that will be the same in all future updates of this message. It can be used to add annotations to a message. Serial will only be set if you enable annotations in [channel rules](/docs/channels#rules). <br />_Type: `String`_

### annotations <a id="#annotations" />

An object containing information about annotations that have been made to the object. <br />_Type: [`MessageAnnotations`](/docs/api/realtime-sdk/types#message-annotations)_

</If>

### Message constructors <a id="#constructors" />

#### Message.fromEncoded <a id="#message-from-encoded" />

`Message.fromEncoded(Object encodedMsg, ChannelOptions channelOptions?) -> Message`

A static factory method to create a [`Message`](/docs/api/realtime-sdk/types#message) from a deserialized `Message`-like object encoded using Ably's wire protocol.

##### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| encodedMsg | A `Message`-like deserialized object | `Object` |
| channelOptions | An optional [`ChannelOptions`](/docs/api/realtime-sdk/types#channel-options). If you have an encrypted channel, use this to allow the library can decrypt the data | `Object` |

##### Returns

A [`Message`](/docs/api/realtime-sdk/types#message) object

#### Message.fromEncodedArray <a id="#message-from-encoded-array" />

`Message.fromEncodedArray(Object[] encodedMsgs, ChannelOptions channelOptions?) -> Message[]`

A static factory method to create an array of [`Messages`](/docs/api/realtime-sdk/types#message) from an array of deserialized `Message`-like object encoded using Ably's wire protocol.

##### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| encodedMsgs | An array of `Message`-like deserialized objects | `Array` |
| channelOptions | An optional [`ChannelOptions`](/docs/api/realtime-sdk/types#channel-options). If you have an encrypted channel, use this to allow the library can decrypt the data | `Object` |

##### Returns

An `Array` of [`Message`](/docs/api/realtime-sdk/types#message) objects

<If lang="javascript,nodejs">

### Message action <a id="#message-action" />

`Message` `action` is a String representing the action type of the message.

<If lang="javascript">

<Code>
```javascript
  const MessageActions = [
      'message.create',
      'message.update',
      'message.delete',
      'meta',
      'message.summary'
  ]
```
</Code>

</If>
<If lang="nodejs">

<Code>
```nodejs
  const MessageActions = [
      'message.create',
      'message.update',
      'message.delete',
      'meta',
      'message.summary'
  ]
```
</Code>

</If>
</If>

### MessageAnnotations <a id="#message-annotations" />

#### <If lang="javascript,nodejs,csharp,flutter,objc,swift,go">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If>

| Property | Description | Type |
|----------|-------------|------|
| summary | An object whose keys are annotation types, and the values are aggregated summaries for that annotation type | `Record<String, JsonObject>` |

### <If lang="javascript,nodejs,flutter,go">PresenceMessage</If><If lang="java">io.ably.lib.types.PresenceMessage</If><If lang="ruby">Ably::Models::PresenceMessage</If><If lang="objc,swift">ARTPresenceMessage</If><If lang="csharp">IO.Ably.PresenceMessage</If> <a id="#presence-message" />

A `PresenceMessage` represents an individual presence update that is sent to or received from Ably.

#### <If lang="javascript,nodejs,flutter,go,objc,swift,csharp,ruby">Properties</If><If lang="java">Members</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby,python,flutter">action</If><If lang="csharp,go">Action</If> | The event signified by a PresenceMessage. See <If lang="java">[`PresenceMessage.action`](/docs/api/realtime-sdk/types#presence-action)</If><If lang="javascript,nodejs">[Presence action](/docs/api/realtime-sdk/types#presence-action)</If><If lang="python">[`PresenceAction`](/docs/api/realtime-sdk/types#presence-action)</If><If lang="ruby">[`PresenceMessage::ACTION`](/docs/api/realtime-sdk/types#presence-action)</If><If lang="objc,swift,csharp">[`PresenceMessage.action`](/docs/api/realtime-sdk/types#presence-action)</If><If lang="go">[`PresenceMessage::action`](/docs/api/realtime-sdk/types#presence-action)</If> | <If lang="java">`enum { ABSENT, PRESENT, ENTER, LEAVE, UPDATE }`</If><If lang="javascript,nodejs,python,flutter">`int enum { ABSENT, PRESENT, ENTER, LEAVE, UPDATE }`</If><If lang="ruby">`enum { :absent, :present, :enter, :leave, :update }`</If><If lang="objc,swift">`ARTPresenceAction`</If><If lang="csharp">`enum { Absent, Present, Enter, Leave, Update }`</If><If lang="go">`const PresenceMessage::PresenceAbsent,PresencePresent,PresenceEnter,PresenceLeave,PresenceUpdate`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,python,flutter">data</If><If lang="csharp,go">Data</If> | The presence update payload, if provided | <If lang="java">`String`, `ByteArray`, `JSONObject`, `JSONArray`</If><If lang="javascript,nodejs">`String`, `StringBuffer`, `JSON Object`</If><If lang="ruby">`String`, `Binary` (ASCII-8BIT String), `Hash`, `Array`</If><If lang="python">`String`, `Bytearray`, `Dict`, `List`</If><If lang="swift">`String`, `NSData`, `Dictionary`, `Array`</If><If lang="objc">`NSString *`, `NSData *`, `NSDictionary *`, `NSArray *`</If><If lang="csharp">`String`, `byte[]`, plain C# object that can be converted to Json</If><If lang="go">`String`, `[]byte`</If><If lang="flutter">`String`, `Map`, `List`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,python,flutter">extras</If><If lang="csharp,go">Extras</If> | Metadata and/or ancillary payloads, if provided. The only currently valid payloads for extras are the [`push`](/docs/push/publish#sub-channels), [`ref`](/docs/channels/messages#interactions) and [`privileged`](/docs/platform/integrations/webhooks#skipping) objects | <If lang="java">`JSONObject`, `JSONArray`</If><If lang="javascript,nodejs">`JSON Object`</If><If lang="ruby">`Hash`, `Array`</If><If lang="python">`Dict`, `List`</If><If lang="swift">`Dictionary`, `Array`</If><If lang="objc">`NSDictionary *`, `NSArray *`</If><If lang="csharp">plain C# object that can be converted to Json</If><If lang="go">`String`, `[]byte`</If><If lang="flutter">`Map`, `List`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,python,flutter">id</If><If lang="csharp,go">Id</If> | Unique ID assigned by Ably to this presence update | `String` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">clientId</If><If lang="ruby,python">client_id</If><If lang="csharp,go">ClientId</If> | The client ID of the publisher of this presence update | `String` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">connectionId</If><If lang="ruby,python">connection_id</If><If lang="csharp,go">ConnectionId</If> | The connection ID of the publisher of this presence update | `String` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,python,flutter">timestamp</If><If lang="csharp,go">Timestamp</If> | Timestamp when the presence update was received by Ably<If lang="javascript,nodejs,java,python,flutter,csharp,go">, as milliseconds since the epoch</If> | <If lang="javascript,nodejs,python,flutter">`Integer`</If><If lang="java">`Long Integer`</If><If lang="ruby">`Time`</If><If lang="objc,swift">`NSDate`</If><If lang="csharp">`DateTimeOffset`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,python,flutter">encoding</If><If lang="csharp,go">Encoding</If> | This will typically be empty as all presence updates received from Ably are automatically decoded client-side using this value. However, if the message encoding cannot be processed, this attribute will contain the remaining transformations not applied to the `data` payload | `String` |

### PresenceMessage constructors

#### PresenceMessage.fromEncoded <a id="#presence-from-encoded" />

`PresenceMessage.fromEncoded(Object encodedPresMsg, ChannelOptions channelOptions?) -> PresenceMessage`

A static factory method to create a [`PresenceMessage`](/docs/api/realtime-sdk/types#presence-message) from a deserialized `PresenceMessage`-like object encoded using Ably's wire protocol.

##### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| encodedPresMsg | A `PresenceMessage`-like deserialized object | `Object` |
| channelOptions | An optional [`ChannelOptions`](/docs/api/realtime-sdk/types#channel-options). If you have an encrypted channel, use this to allow the library can decrypt the data | `Object` |

##### Returns

A [`PresenceMessage`](/docs/api/realtime-sdk/types#presence-message) object

#### PresenceMessage.fromEncodedArray <a id="#presence-from-encoded-array" />

`PresenceMessage.fromEncodedArray(Object[] encodedPresMsgs, ChannelOptions channelOptions?) -> PresenceMessage[]`

A static factory method to create an array of [`PresenceMessages`](/docs/api/realtime-sdk/types#presence-message) from an array of deserialized `PresenceMessage`-like object encoded using Ably's wire protocol.

##### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| encodedPresMsgs | An array of `PresenceMessage`-like deserialized objects | `Array` |
| channelOptions | An optional [`ChannelOptions`](/docs/api/realtime-sdk/types#channel-options). If you have an encrypted channel, use this to allow the library can decrypt the data | `Object` |

##### Returns

An `Array` of [`PresenceMessage`](/docs/api/realtime-sdk/types#presence-message) objects

### <If lang="javascript,nodejs,flutter,go">Presence action</If><If lang="objc,swift">ARTPresenceAction</If><If lang="java">io.ably.lib.types.PresenceMessage.Action</If><If lang="ruby">Ably::Models::PresenceMessage::ACTION</If><If lang="csharp">IO.Ably.PresenceAction</If> <a id="#presence-action" />

<If lang="javascript,nodejs,go">

`Presence` `action` is a String with a value matching any of the [Realtime Presence states & events](/docs/presence-occupancy/presence#trigger-events).

<If lang="javascript">

<Code>
```javascript
  var PresenceActions = [
    'absent', // (reserved for internal use)
    'present',
    'enter',
    'leave',
    'update'
  ]
```
</Code>

</If>
<If lang="nodejs">

<Code>
```nodejs
  var PresenceActions = [
    'absent', // (reserved for internal use)
    'present',
    'enter',
    'leave',
    'update'
  ]
```
</Code>

</If>
<If lang="go">

<Code>
```go
const (
  PresenceAbsent = 0
  PresencePresent = 1
  PresenceEnter = 2
  PresenceLeave = 3
  PresenceUpdate = 4
)
```
</Code>

</If>
</If>
<If lang="java">

`io.ably.lib.types.PresenceMessage.Action` is an enum representing all the [Realtime Presence states & events](/docs/presence-occupancy/presence#trigger-events).

<Code>
```java
  public enum Action {
    ABSENT,  // 0 (reserved for internal use)
    PRESENT, // 1
    ENTER,   // 2
    LEAVE,   // 3
    UPDATE   // 4
  }
```
</Code>

</If>
<If lang="csharp">

`IO.Ably.PresenceAction` is an enum representing all the [Realtime Presence states & events](/docs/presence-occupancy/presence#trigger-events).

<Code>
```csharp
  public enum Action {
    Absent,  // 0 (reserved for internal use)
    Present, // 1
    Enter,   // 2
    Leave,   // 3
    Update   // 4
  }
```
</Code>

</If>
<If lang="ruby">

`Ably::Models::PresenceMessage::ACTION` is an enum-like value representing all the [Realtime Presence states & events](/docs/presence-occupancy/presence#trigger-events). `ACTION` can be represented interchangeably as either symbols or constants.

#### Symbol states

<Code>
```ruby
  :absent  # => 0 (reserved for internal use)
  :present # => 1
  :enter   # => 2
  :leave   # => 3
  :update  # => 4
```
</Code>

#### Constant states

<Code>
```ruby
  PresenceMessage::ACTION.Absent  # => 0 (internal use)
  PresenceMessage::ACTION.Present # => 1
  PresenceMessage::ACTION.Enter   # => 2
  PresenceMessage::ACTION.Leave   # => 3
  PresenceMessage::ACTION.Update  # => 4
```
</Code>

#### Example usage

<Code>
```ruby
  # Example with symbols
  presence.on(:attached) { ... }

  # Example with constants
  presence.on(Ably::Models::PresenceMessage::ACTION.Enter) { ... }

  # Interchangeable
  Ably::Models::PresenceMessage::ACTION.Enter == :enter # => true
```
</Code>

</If>
<If lang="objc,swift">

`ARTPresenceAction` is an enum representing all the [Realtime Presence states & events](/docs/presence-occupancy/presence#trigger-events).

<If lang="objc">

<Code>
```objc
  typedef NS_ENUM(NSUInteger, ARTPresenceAction) {
      ARTPresenceAbsent, // reserved for internal use
      ARTPresencePresent,
      ARTPresenceEnter,
      ARTPresenceLeave,
      ARTPresenceUpdate
  };
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
  enum ARTPresenceAction : UInt {
    case Absent // reserved for internal use
    case Present
    case Enter
    case Leave
    case Update
  }
```
</Code>

</If>
<If lang="go">

`Presence` `action` is a String with a value matching any of the [Realtime Presence states & events](/docs/presence-occupancy/presence#trigger-events).

<Code>
```go
const (
  PresenceAbsent = 0
  PresencePresent = 1
  PresenceEnter = 2
  PresenceLeave = 3
  PresenceUpdate = 4
)
```
</Code>

</If>

</If>

### <If lang="javascript,nodejs,flutter,go">PaginatedResult</If><If lang="objc,swift">ARTPaginatedResult</If><If lang="java">io.ably.lib.types.PaginatedResult</If><If lang="ruby">Ably::Models::PaginatedResult</If><If lang="csharp">IO.Ably.PaginatedResult</If> <a id="#paginated-result" />

A `PaginatedResult` is a type that represents a page of results for all message and presence history, stats and REST presence requests. The response from a [Ably REST API paginated query](/docs/api/rest-api/#pagination) is accompanied by metadata that indicates the relative queries available to the `PaginatedResult` object.

#### <If lang="javascript,nodejs,flutter,go,objc,swift,csharp">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">items</If><If lang="csharp,go,python">Items</If> | Contains the current page of results (for example an Array of [`Message`](#message) or [`PresenceMessage`](#presence-message) objects for a channel history request) | <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">`Array <Message, Presence, Stats>`</If><If lang="csharp,python">`List <Message, Presence, Stats>`</If> |

#### Methods

##### <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">first</If><If lang="csharp">First</If>

<If lang="javascript,nodejs">

`first(): Promise<PaginatedResult>`

</If>
<If lang="ruby">

`PaginatedResult first`

</If>
<If lang="csharp">

`Task<PaginatedResult<T>> FirstAsync()`

</If>
<If lang="java">

`PaginatedResult first()`

</If>
<If lang="objc,swift">

`first(callback: (ARTPaginatedResult?, ARTErrorInfo?) -> Void)`

</If>
<If lang="go">

`First() (PaginatedResult, error)`

</If>

<If lang="csharp,flutter,java,objc,ruby,swift,go">

Returns a new `PaginatedResult` for the first page of results. <If lang="ruby">When using the Realtime library, the `first` method returns a [`Deferrable`](/docs/api/realtime-sdk/types#deferrable) and yields a [`PaginatedResult`](#paginated-result).</If><If lang="csharp">The method is asynchronous and returns a Task which needs to be awaited to get the [`PaginatedResult`](#paginated-result).</If>

</If>
<If lang="javascript,nodejs">

Returns a promise. On success, the promise is fulfilled with a new `PaginatedResult` for the first page of results. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

##### <If lang="javascript,nodejs,java,objc,swift,flutter,go">hasNext</If><If lang="csharp">HasNext</If><If lang="ruby">has_next?</If>

<If lang="javascript,nodejs,java,objc,swift,flutter">

`Boolean hasNext()`

</If>
<If lang="ruby">

`Boolean has_next?`

</If>
<If lang="csharp">

`Boolean HasNext()`

</If>
<If lang="go">

`HasNext() (bool)`

</If>

Returns `true` if there are more pages available by calling <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">`next`</If><If lang="csharp,go">`Next`</If> and returns `false` if this page is the last page available.

##### <If lang="javascript,nodejs,java,objc,swift,flutter,go">isLast</If><If lang="csharp">IsLast</If><If lang="ruby">last?</If>

<If lang="javascript,nodejs,java,objc,swift,flutter">

`Boolean isLast()`

</If>
<If lang="ruby">

`Boolean last?`

</If>
<If lang="csharp">

`Boolean IsLast()`

</If>
<If lang="go">

`IsLast() (bool)`

</If>

Returns `true` if this page is the last page and returns `false` if there are more pages available by calling <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">`next`</If><If lang="csharp,go">`Next`</If> available.

##### <If lang="javascript,nodejs,java,objc,swift,flutter,go,ruby">next</If><If lang="csharp">Next</If>

<If lang="javascript,nodejs">

`next(): Promise<PaginatedResult | null>`

</If>
<If lang="ruby">

`PaginatedResult next`

</If>
<If lang="csharp">

`Task<PaginatedResult<T>> NextAsync()`

</If>
<If lang="java">

`PaginatedResult next()`

</If>
<If lang="objc,swift">

`next(callback: (ARTPaginatedResult?, ARTErrorInfo?) -> Void)`

</If>
<If lang="go">

`Next() (PaginatedResult, error)`

</If>

<If lang="csharp,flutter,java,objc,ruby,swift,go">

Returns a new `PaginatedResult` loaded with the next page of results. If there are no further pages, then <If lang="java,flutter,go,ruby">`null`</If><If lang="csharp">a blank PaginatedResult will be returned</If><If lang="objc,swift">`nil`</If> is returned. <If lang="csharp">The method is asynchronous and return a Task which needs to be awaited to get the `PaginatedResult`</If><If lang="ruby">When using the Realtime library, the `first` method returns a [`Deferrable`](/docs/api/realtime-sdk/types#deferrable) and yields a [`PaginatedResult`](#paginated-result).</If>

</If>

<If lang="javascript,nodejs">

Returns a promise. On success, the promise is fulfilled with a new `PaginatedResult` loaded with the next page of results. If there are no further pages, then `null` is returned. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

##### current <a id="#current" />

`current(): Promise<"PaginatedResult":#paginated-result>`

Returns a promise. On success, the promise is fulfilled with a new `PaginatedResult` loaded with the current page of results. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

#### Example <a id="#paginated-result-example" />

<If lang="javascript,nodejs">

<If lang="javascript">

<Code>
```javascript
const paginatedResult = await channel.history();
console.log('Page 0 item 0:' + paginatedResult.items[0].data);
const nextPage = await paginatedResult.next();
console.log('Page 1 item 1: ' + nextPage.items[1].data);
console.log('Last page?: ' + nextPage.isLast());
```
</Code>

</If>
<If lang="nodejs">

<Code>
```nodejs
const paginatedResult = await channel.history();
console.log('Page 0 item 0:' + paginatedResult.items[0].data);
const nextPage = await paginatedResult.next();
console.log('Page 1 item 1: ' + nextPage.items[1].data);
console.log('Last page?: ' + nextPage.isLast());
```
</Code>

</If>

</If>

<If lang="java">

<Code>
```java
PaginatedResult firstPage = channel.history();
System.out.println("Page 0 item 0:" + firstPage.items[0].data);
if (firstPage.hasNext) {
  PaginatedResult nextPage = firstPage.next();
  System.out.println("Page 1 item 1:" + nextPage.items[1].data);
  System.out.println("More pages?:" + Strong.valueOf(nextPage.hasNext()));
};
```
</Code>

</If>

<If lang="csharp">

<Code>
```csharp
PaginatedResult<Message> firstPage = await channel.HistoryAsync(null);
Message firstMessage = firstPage.Items[0];
Console.WriteLine("Page 0 item 0: " + firstMessage.data);
if (firstPage.HasNext)
{
    var nextPage = await firstPage.NextAsync();
    Console.WriteLine("Page 1 item 1:" + nextPage.Items[1].data);
    Console.WriteLine("More pages?: " + nextPage.HasNext());
}
```
</Code>

</If>
<If lang="ruby">

<Code>
```ruby
# When using the REST sync library
first_page = channel.history
puts "Page 0 item 0: #{first_page.items[0].data}"
if first_page.has_next?
  next_page = first_page.next
  puts "Page 1 item 1: #{next_page.items[1].data}"
  puts "Last page?: #{next_page.is_last?}"
end

# When using the Realtime EventMachine library
channel.history do |first_page|
  puts "Page 0 item 0: #{first_page.items[0].data}"
  if first_page.has_next?
    first_page.next do |next_page|
      puts "Page 1 item 1: #{next_page.items[1].data}"
      puts "Last page?: #{next_page.is_last?}"
    end
  end
end
```
</Code>

</If>
<If lang="objc">

<Code>
```objc
[channel history:^(ARTPaginatedResult<ARTMessage *> *paginatedResult, ARTErrorInfo *error) {
    NSLog(@"Page 0 item 0: %@", paginatedResult.items[0].data);
    [paginatedResult next:^(ARTPaginatedResult<ARTMessage *> *nextPage, ARTErrorInfo *error) {
        NSLog(@"Page 1 item 1: %@", nextPage.items[1].data);
        NSLog(@"Last page?: %d", nextPage.isLast());
    }];
}];
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
channel.history { paginatedResult, error in
    guard let paginatedResult = paginatedResult else {
        print("No results available")
        return
    }
    print("Page 0 item 0: \((paginatedResult.items[0] as! ARTMessage).data)")
    paginatedResult.next { nextPage, error in
        guard let nextPage = nextPage else {
            print("No next page available")
            return
        }
        print("Page 1 item 1: \((nextPage.items[1] as! ARTMessage).data)")
        print("Last page? \(nextPage.isLast())")
    }
}
```
</Code>

</If>
<If lang="go">

<Code>
```go
  page0, err := channel.History(nil)
  fmt.Println("Page. 0 item 0: %s\n", page0.Messages[0].Data)
  page1, err := page0.Next()
  fmt.Println("Page. 1 item 1: %s\n", page1.Messages[1].Data)
  fmt.Println("Last page? %s\n", page1.IsLast())
```
</Code>

</If>

### HttpPaginatedResponse <a id="#http-paginated-response" />

An `HttpPaginatedResponse` is a superset of [`PaginatedResult`](/docs/api/rest-sdk/types#paginated-result), which is a type that represents a page of results plus metadata indicating the relative queries available to it. `HttpPaginatedResponse` additionally carries information about the response to an HTTP request. It is used when [making custom HTTP requests](/docs/api/rest-sdk#request).

#### <If lang="javascript,nodejs,flutter,go,objc,swift,csharp">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">items</If><If lang="csharp,go">Items</If> | Contains a page of results; for example, an array of [`Message`](#message) or [`PresenceMessage`](#presence-message) objects for a channel history request | `Array<>` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">statusCode</If><If lang="ruby">status_code</If><If lang="csharp,go">StatusCode</If> | The HTTP status code of the response | `Number` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">success</If><If lang="csharp,go">Success</If> | Whether the HTTP status code indicates success. This is equivalent to <If lang="javascript,nodejs,java,objc,swift,flutter">`200 <= statusCode < 300`</If><If lang="ruby">`200 <= status_code < 300`</If><If lang="csharp,go">`200 <= StatusCode < 300`</If> | `Boolean` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">headers</If><If lang="csharp,go">Headers</If> | The headers of the response | `Object` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">errorCode</If><If lang="ruby">error_code</If><If lang="csharp,go">ErrorCode</If> | The error code if the `X-Ably-Errorcode` HTTP header is sent in the response | <If lang="java,objc,swift,ruby,flutter,csharp,go">`Int`</If><If lang="javascript,nodejs">`Number`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">errorMessage</If><If lang="ruby">error_message</If><If lang="csharp,go">ErrorMessage</If> | The error message if the `X-Ably-Errormessage` HTTP header is sent in the response | `String` |


#### Methods

##### <If lang="javascript,nodejs,java,objc,swift,flutter,go,ruby">first</If><If lang="csharp">First</If>

<If lang="javascript,nodejs">

`first(): Promise<HttpPaginatedResponse>`

</If>
<If lang="ruby">

`HttpPaginatedResponse first`

</If>
<If lang="csharp">

`Task<HttpPaginatedResponse<T>> FirstAsync()`

</If>
<If lang="java">

`HttpPaginatedResponse first()`

</If>
<If lang="objc,swift">

`first(callback: (ARTHttpPaginatedResponse?, ARTErrorInfo?) -> Void)`

</If>
<If lang="go">

`First() (HttpPaginatedResponse, error)`

</If>

<If lang="csharp,flutter,java,objc,ruby,swift,go">

Returns a new `HttpPaginatedResponse` for the first page of results. <If lang="ruby">When using the Realtime library, the `first` method returns a [`Deferrable`](/docs/api/realtime-sdk/types#deferrable) and yields an [`HttpPaginatedResponse`](/docs/api/realtime-sdk/types#http-paginated-response).</If><If lang="csharp">The method is asynchronous and returns a Task which needs to be awaited to get the [`HttpPaginatedResponse`](/docs/api/realtime-sdk/types#http-paginated-response).</If>

</If>
<If lang="javascript,nodejs">

Returns a promise. On success, the promise is fulfilled with a new `HttpPaginatedResponse` for the first page of results. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

##### <If lang="javascript,nodejs,java,objc,swift,flutter">hasNext</If><If lang="csharp,go">HasNext</If><If lang="ruby">has_next?</If>

<If lang="javascript,nodejs,java,objc,swift,flutter">

`Boolean hasNext()`

</If>
<If lang="ruby">

`Boolean has_next?`

</If>
<If lang="csharp">

`Boolean HasNext()`

</If>
<If lang="go">

`HasNext() (bool)`

</If>

Returns `true` if there are more pages available by calling <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">`next`</If><If lang="csharp,go">`Next`</If> and returns `false` if this page is the last page available.

##### <If lang="javascript,nodejs,java,objc,swift,flutter">isLast</If><If lang="csharp,go">IsLast</If><If lang="ruby">last?</If>

<If lang="javascript,nodejs,java,objc,swift,flutter">

`Boolean isLast()`

</If>
<If lang="ruby">

`Boolean last?`

</If>
<If lang="csharp">

`Boolean IsLast()`

</If>
<If lang="go">

`IsLast() (bool)`

</If>

Returns `true` if this page is the last page and returns `false` if there are more pages available by calling <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">`next`</If><If lang="csharp,go">`Next`</If> available.

##### <If lang="javascript,nodejs,java,objc,swift,flutter,ruby">next</If><If lang="csharp,go">Next</If>

<If lang="javascript,nodejs">

`next(): Promise<HttpPaginatedResponse>`

</If>
<If lang="ruby">

`HttpPaginatedResponse next`

</If>
<If lang="csharp">

`Task<HttpPaginatedResponse<T>> NextAsync()`

</If>
<If lang="java">

`HttpPaginatedResponse next()`

</If>
<If lang="objc,swift">

`next(callback: (ARTHttpPaginatedResponse?, ARTErrorInfo?) -> Void)`

</If>
<If lang="go">

`Next() (HttpPaginatedResponse, error)`

</If>

<If lang="csharp,flutter,java,objc,ruby,swift,go">

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then <If lang="java,flutter,ruby">`null`</If><If lang="csharp">a blank HttpPaginatedResponse will be returned</If><If lang="objc,swift,go">`nil`</If> is returned. <If lang="csharp">The method is asynchronous and return a Task which needs to be awaited to get the `HttpPaginatedResponse`</If><If lang="ruby">When using the Realtime library, the `first` method returns a [`Deferrable`](/docs/api/realtime-sdk/types#deferrable) and yields an [`HttpPaginatedResponse`](/docs/api/realtime-sdk/types#http-paginated-response).</If>

</If>
<If lang="javascript,nodejs">

Returns a promise. On success, the promise is fulfilled with a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `null` is returned. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

<If lang="javascript,nodejs">

##### current <a id="current" />

`current(): Promise<HttpPaginatedResponse>`

Returns a promise. On success, the promise is fulfilled with a new `HttpPaginatedResponse` loaded with the current page of results. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

#### Example

The `HttpPaginatedResponse` interface is a superset of `PaginatedResult`, see the [`PaginatedResult` example](/docs/api/rest-sdk/types/#paginated-result-example)

<If lang="java">

### io.ably.lib.types.Param <a id="param" />

`Param` is a type encapsulating a key/value pair. This type is used frequently in method parameters allowing key/value pairs to be used more flexible, see [`Channel#history`](/docs/api/realtime-sdk/history#channel-history) for an example.

Please note that `key` and `value` attributes are always strings. If an `Integer` or other value type is expected, then you must coerce that type into a `String`.

#### Members

| Property | Description | Type |
|----------|-------------|------|
| key | The key value | `String` |
| value | The value associated with the `key` | `String` |

</If>

<If lang="javascript,nodejs,ruby">

### <If lang="javascript,nodejs">PushChannelSubscription</If><If lang="ruby">Ably::Models::PushChannelSubscription</If> <a id="push-channel-subscription" />

An `PushChannelSubscription` is a type encapsulating the subscription of a device or group of devices sharing a [client identifier](/docs/auth/identified-clients) to a channel in order to receive push notifications.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The channel that this push notification subscription is associated with | `String` |
| <If lang="javascript,nodejs">deviceId</If><If lang="ruby">device_id</If> | The device with this identifier is linked to this channel subscription. When present, <If lang="javascript,nodejs">`clientId`</If><If lang="ruby">`client_id`</If> is never present | `String` |
| <If lang="javascript,nodejs">clientId</If><If lang="ruby">client_id</If> | Devices with this [client identifier](/docs/auth/identified-clients) are included in this channel subscription. When present, <If lang="javascript,nodejs">`deviceId`</If><If lang="ruby">`device_id`</If> is never present | `String` |

</If>

<If lang="flutter,java,csharp,objc,swift,go">

### PushChannelSubscription constructors

#### PushChannelSubscription.forDevice <a id="push-channel-subscription-for-device" />

<If lang="flutter,java,csharp,objc,swift,go">

`PushChannelSubscription.forDevice(String channel, String deviceId) -> PushChannelSubscription`

</If>
<If lang="ruby">

`PushChannelSubscription.for_device(String channel, String device_id) -> PushChannelSubscription`

</If>

A static factory method to create a `PushChannelSubscription` object for a channel and single device.

##### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| channel | Channel name linked to this push channel subscription | `String` |
| <If lang="flutter,java,csharp,objc,swift,go">deviceId</If><If lang="ruby">device_id</If> | The device with this identifier will be linked with this push channel subscription | `String` |

##### Returns

A [`PushChannelSubscription`](/docs/api/realtime-sdk/types#push-channel-subscription) object

#### PushChannelSubscription.forClient <a id="push-channel-subscription-for-client-id" />

<If lang="flutter,java,csharp,objc,swift,go">

`PushChannelSubscription.forClient(String channel, String clientId) -> PushChannelSubscription`

</If>
<If lang="ruby">

`PushChannelSubscription.for_client(String channel, String client_id) -> PushChannelSubscription`

</If>

A static factory method to create a `PushChannelSubscription` object for a channel and group of devices sharing a [client identifier](/docs/auth/identified-clients).

##### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| channel | Channel name linked to this push channel subscription | `String` |
| <If lang="flutter,java,csharp,objc,swift,go">clientId</If><If lang="ruby">client_id</If> | Devices with this [client identifier](/docs/auth/identified-clients) are included in the new push channel subscription | `String` |

##### Returns

A `PushChannelSubscription` object

</If>

### <If lang="javascript,nodejs,flutter,go,csharp">TokenDetails</If><If lang="java">io.ably.lib.types.TokenDetails</If><If lang="objc,swift">ARTTokenDetails</If><If lang="ruby">Ably::Models::TokenDetails</If> <a id="token-details" />

`TokenDetails` is a type providing details of Ably Token string and its associated metadata.

#### <If lang="javascript,nodejs,flutter,go,objc,swift,csharp">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">token</If><If lang="csharp,go">Token</If> | The [Ably Token](/docs/api/realtime-sdk/authentication#token-details) itself. A typical [Ably Token](/docs/api/realtime-sdk/authentication#token-details) string may appear like `{{TOKEN}}` | `String` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">expires</If><If lang="csharp,go">Expires</If> | <If lang="javascript,nodejs,java,flutter,csharp,go">The time (in milliseconds since the epoch)</If><If lang="ruby,objc,swift">The time</If> at which this token expires | <If lang="javascript,nodejs,flutter">`Integer`</If><If lang="java">`Long Integer`</If><If lang="csharp">`DateTimeOffset`</If><If lang="ruby">`Time`</If><If lang="objc,swift">`NSDate`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">issued</If><If lang="csharp,go">Issued</If> | <If lang="javascript,nodejs,java,flutter,csharp,go">The time (in milliseconds since the epoch)</If><If lang="ruby,objc,swift">The time</If> at which this token was issued | <If lang="javascript,nodejs,flutter">`Integer`</If><If lang="java">`Long Integer`</If><If lang="csharp">`DateTimeOffset`</If><If lang="ruby">`Time`</If><If lang="objc,swift">`NSDate`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">capability</If><If lang="csharp,go">Capability</If> | The capability associated with this [Ably Token](/docs/api/realtime-sdk/authentication#token-details). The capability is a a JSON stringified canonicalized representation of the resource paths and associated operations. [Read more about authentication and capabilities](/docs/auth/capabilities) | <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">`String`</If><If lang="csharp">`Capability`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">clientId</If><If lang="ruby">client_id</If><If lang="csharp,go">ClientId</If> | The client ID, if any, bound to this [Ably Token](/docs/api/realtime-sdk/authentication#token-details). If a client ID is included, then the [Ably Token](/docs/api/realtime-sdk/authentication#token-details) authenticates its bearer as that client ID, and the [Ably Token](/docs/api/realtime-sdk/authentication#token-details) may only be used to perform operations on behalf of that client ID. The client is then considered to be an [identified client](/docs/auth/identified-clients) | `String` |

<If lang="ruby">

### Methods

| Method | Description | Type |
|--------|-------------|------|
| expired? | True when the token has expired | `Boolean` |

</If>
<If lang="csharp">

### Methods

| Method | Description | Type |
|--------|-------------|------|
| IsValidToken() | True if the token has not expired | `Boolean` |

</If>

### TokenDetails constructors

#### <If lang="javascript,nodejs,java,objc,swift,csharp,go">TokenDetails.fromJson</If><If lang="ruby">TokenDetails.from_json</If><If lang="flutter">TokenDetails.fromMap</If> <a id="token-details-from-json" />

<If lang="javascript,nodejs,java,objc,swift,csharp,go">

`TokenDetails.fromJson(String json) -> TokenDetails`

</If>
<If lang="ruby">

`TokenDetails.from_json(String json) -> TokenDetails`

</If>
<If lang="flutter">

`TokenDetails.fromMap(Map<String, dynamic> map)`

</If>

A <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">static factory method</If><If lang="flutter">named constructor</If> to create a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) from a deserialized `TokenDetails`-like <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">object or a JSON stringified `TokenDetails`</If><If lang="flutter">map</If>. This method is provided to minimize bugs as a result of differing types by platform for fields such as `timestamp` or `ttl`. For example, in Ruby `ttl` in the `TokenDetails` object is exposed in seconds as that is idiomatic for the language, yet when serialized to JSON using `to_json` it is automatically converted to the Ably standard which is milliseconds. By using the <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">`fromJson`</If><If lang="flutter">`fromMap`</If> method when constructing a `TokenDetails`, Ably ensures that all fields are consistently serialized and deserialized across platforms.

##### Parameters

<If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">

| Parameter | Description | Type |
|-----------|-------------|------|
| json | A `TokenDetails`-like deserialized object or JSON stringified `TokenDetails` | `Object, String` |

</If>
<If lang="flutter">

| Parameter | Description | Type |
|-----------|-------------|------|
| map | A `TokenDetails`-like deserialized map | `Map<String, dynamic>` |

</If>

##### Returns

A [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object

### <If lang="javascript,nodejs,go">TokenRequest</If><If lang="csharp">IO.Ably.TokenRequest</If><If lang="flutter">ably.TokenRequest</If><If lang="java">io.ably.lib.types.TokenRequest</If><If lang="objc,swift">ARTTokenRequest</If><If lang="ruby">Ably::Models::TokenRequest</If> <a id="token-request" />

`TokenRequest` is a type containing parameters for an Ably `TokenRequest`. [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) are requested using <If lang="javascript,nodejs,java,objc,swift,csharp,go,flutter">[`Auth#requestToken`](/docs/api/rest-sdk/authentication#request-token)</If><If lang="ruby">[`Auth#request_token`](/docs/api/rest-sdk/authentication#request-token)</If>

<If lang="javascript,nodejs,java,objc,swift,csharp,go,flutter">

#### Properties

</If>
<If lang="java">

#### Members

</If>
<If lang="ruby">

#### Attributes

</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,flutter">keyName</If><If lang="ruby">key_name</If><If lang="csharp,go">KeyName</If> | The key name of the key against which this request is made. The key name is public, whereas the key secret is private | `String` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,go,flutter">ttl</If><If lang="csharp">Ttl</If> | Requested time to live for the [Ably Token](/docs/api/realtime-sdk/authentication#token-details) <If lang="javascript,nodejs,java,objc,swift,flutter">in milliseconds</If><If lang="ruby">in seconds</If><If lang="csharp,go">as a `TimeSpan`</If>. If the Ably `TokenRequest` is successful, the TTL of the returned [Ably Token](/docs/api/realtime-sdk/authentication#token-details) will be less than or equal to this value depending on application settings and the attributes of the issuing key. | <If lang="javascript,nodejs,java,ruby,go,flutter">`Integer`</If><If lang="csharp">`TimeSpan`</If><If lang="swift,objc">`NSTimeInterval`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">timestamp</If><If lang="csharp,go">Timestamp</If> | The timestamp of this request<If lang="javascript,nodejs,java,objc,swift,flutter"> in milliseconds</If> | <If lang="javascript,nodejs,objc,swift,flutter">`Integer`</If><If lang="java">`Long Integer`</If><If lang="ruby">`Time`</If><If lang="csharp">`DateTimeOffset`</If><If lang="go">`Integer`</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">capability</If><If lang="csharp,go">Capability</If> | Capability of the requested [Ably Token](/docs/api/realtime-sdk/authentication#token-details). If the Ably `TokenRequest` is successful, the capability of the returned [Ably Token](/docs/api/realtime-sdk/authentication#token-details) will be the intersection of this capability with the capability of the issuing key. The capability is a JSON stringified canonicalized representation of the resource paths and associated operations. [Read more about authentication and capabilities](/docs/auth) | `String` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">clientId</If><If lang="ruby">client_id</If><If lang="csharp,go">ClientId</If> | The client ID to associate with the requested [Ably Token](/docs/api/realtime-sdk/authentication#token-details). When provided, the [Ably Token](/docs/api/realtime-sdk/authentication#token-details) may only be used to perform operations on behalf of that client ID | `String` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">nonce</If><If lang="csharp,go">Nonce</If> | An opaque nonce string of at least 16 characters | `String` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">mac</If><If lang="csharp,go">Mac</If> | The Message Authentication Code for this request | `String` |

### TokenRequest constructors

#### <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">TokenRequest.fromJson</If><If lang="flutter">TokenRequest.fromMap</If> <a id="token-request-from-json" />

<If lang="javascript,nodejs,java,objc,swift,csharp,go">

`TokenRequest.fromJson(String json) -> TokenRequest`

</If>
<If lang="ruby">

`TokenRequest.from_json(String json) -> TokenRequest`

</If>
<If lang="flutter">

`TokenRequest.fromMap(Map<String, dynamic> map)`

</If>

A <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">static factory method</If><If lang="flutter">named constructor</If> to create a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) from a deserialized `TokenRequest`-like <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">object or a JSON stringified `TokenRequest`</If><If lang="flutter">map</If>. This method is provided to minimize bugs as a result of differing types by platform for fields such as `timestamp` or `ttl`. For example, in Ruby `ttl` in the `TokenRequest` object is exposed in seconds as that is idiomatic for the language, yet when serialized to JSON using `to_json` it is automatically converted to the Ably standard which is milliseconds. By using the <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">`fromJson`</If><If lang="flutter">`fromMap`</If> method when constructing a `TokenRequest`, Ably ensures that all fields are consistently serialized and deserialized across platforms.

##### Parameters

<If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby">

| Parameter | Description | Type |
|-----------|-------------|------|
| json | A `TokenRequest`-like deserialized object or JSON stringified `TokenRequest` | `Object, String` |

</If>
<If lang="flutter">

| Parameter | Description | Type |
|-----------|-------------|------|
| map | A `TokenRequest`-like deserialized map | `Map<String, dynamic>` |

</If>

##### Returns

A [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object

### <If lang="javascript,nodejs,flutter,go">Stats object</If><If lang="objc,swift">ARTStats</If><If lang="java">io.ably.lib.types.Stats</If><If lang="ruby">Ably::Models::Stats</If><If lang="csharp">IO.Ably.stats</If> <a id="stats" />

A `Stats` object represents an application's statistics for the specified interval and time period. Ably aggregates statistics globally for all accounts and applications, and makes these available both through our [statistics API](/docs/metadata-stats/stats) as well as your [application dashboard](https://ably.com/dashboard).

<If lang="flutter,objc,swift,csharp,java,ruby,go">

Please note that most attributes of the `Stats` type below contain references to further stats types. This documentation is not exhaustive for all stats types, and as such, links to the stats types below will take you to the [Ruby library stats documentation](https://www.rubydoc.info/gems/ably/Ably/Models/Stats) which contains exhaustive stats documentation. Ruby uses `under_score` case instead of the default `camelCase` in most languages, so please bear that in mind.

</If>

<If lang="javascript,nodejs,objc,swift,csharp,go,flutter">

#### Properties

</If>
<If lang="java">

#### Members

</If>
<If lang="ruby">

#### Attributes

</If>

<If lang="objc,swift">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="java,objc,swift,go,flutter,csharp">unit</If><If lang="ruby">unit</If> | The length of the interval that this statistic covers, such as <If lang="ruby">`:minute`, `:hour`, `:day`, `:month`</If><If lang="csharp">`Minute`, `Hour`, `Day`, `Month`</If><If lang="go">`StatGranularityDay`, `StatGranularityMonth`</If><If lang="java,objc,swift,flutter">`'minute'`, `'hour'`, `'day'`, `'month'`</If> | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="java,go,flutter">`String`</If> |
| <If lang="ruby">interval_granularity</If><If lang="objc,swift,csharp">intervalGranularity</If> | Deprecated alias for `unit`; scheduled to be removed in version 2.x client library versions. | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If> |
| <If lang="java,objc,swift,flutter">intervalId</If><If lang="ruby">interval_id</If><If lang="csharp,go">IntervalId</If> | The UTC time at which the time period covered by this `Stats` object starts. For example, an interval ID value of "2018-03-01:10" in a `Stats` object whose `unit` is `day` would indicate that the period covered is "2018-03-01:10 .. 2018-03-01:11". All `Stats` objects, except those whose `unit` is `minute`, have an interval ID with resolution of one hour and the time period covered will always begin and end at a UTC hour boundary. For this reason it is not possible to infer the `unit` by looking at the resolution of the `intervalId`. `Stats` objects covering an individual minute will have an interval ID indicating that time; for example "2018-03-01:10:02". | `String` |
| <If lang="java,objc,swift,ruby,flutter">all</If><If lang="csharp,go">All</If> | Aggregate count of both `inbound` and `outbound` message stats | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="java,objc,swift,flutter">apiRequests</If><If lang="ruby">api_requests</If><If lang="csharp,go">ApiRequests</If> | Breakdown of API requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="java,objc,swift,ruby,flutter">channels</If><If lang="csharp,go">Channels</If> | Breakdown of channel related stats such as min, mean and peak channels | [`ResourceCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ResourceCount) |
| <If lang="java,objc,swift,ruby,flutter">connections</If><If lang="csharp,go">Connections</If> | Breakdown of connection related stats such as min, mean and peak connections for TLS and non-TLS connections | [`ConnectionTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ConnectionTypes) |
| <If lang="java,objc,swift,ruby,flutter">inbound</If><If lang="csharp,go">Inbound</If> | Statistics such as count and data for all inbound messages received over REST and Realtime connections, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="java,objc,swift,ruby,flutter">outbound</If><If lang="csharp,go">Outbound</If> | Statistics such as count and data for all outbound messages retrieved via REST history requests, received over Realtime connections, or pushed with Webhooks, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="java,objc,swift,ruby,flutter">persisted</If><If lang="csharp,go">Persisted</If> | Messages persisted and later retrieved via the [history API](/docs/storage-history/history) | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="java,objc,swift,flutter">tokenRequests</If><If lang="ruby">token_requests</If><If lang="csharp,go">TokenRequests</If> | Breakdown of Ably Token requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="java,objc,swift,ruby,flutter">push</If><If lang="csharp,go">Push</If> | Detailed stats on push notifications, see [our Push documentation](/push) for more details | `PushStats` |

</If>
<If lang="csharp,ruby">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="java,objc,swift,go,flutter,csharp">unit</If><If lang="ruby">unit</If> | The length of the interval that this statistic covers, such as <If lang="ruby">`:minute`, `:hour`, `:day`, `:month`</If><If lang="csharp">`Minute`, `Hour`, `Day`, `Month`</If><If lang="go">`StatGranularityDay`, `StatGranularityMonth`</If><If lang="java,objc,swift,flutter">`'minute'`, `'hour'`, `'day'`, `'month'`</If> | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="java,go,flutter">`String`</If> |
| <If lang="ruby">interval_granularity</If><If lang="objc,swift,csharp">intervalGranularity</If> | Deprecated alias for `unit`; scheduled to be removed in version 2.x client library versions. | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If> |
| <If lang="java,objc,swift,flutter">intervalId</If><If lang="ruby">interval_id</If><If lang="csharp,go">IntervalId</If> | The UTC time at which the time period covered by this `Stats` object starts. For example, an interval ID value of "2018-03-01:10" in a `Stats` object whose `unit` is `day` would indicate that the period covered is "2018-03-01:10 .. 2018-03-01:11". All `Stats` objects, except those whose `unit` is `minute`, have an interval ID with resolution of one hour and the time period covered will always begin and end at a UTC hour boundary. For this reason it is not possible to infer the `unit` by looking at the resolution of the `intervalId`. `Stats` objects covering an individual minute will have an interval ID indicating that time; for example "2018-03-01:10:02". | `String` |
| <If lang="ruby">interval_time</If><If lang="csharp,go">IntervalTime</If> | A <If lang="ruby">`Time`</If><If lang="csharp,go">`DateTimeOffset`</If> object representing the parsed <If lang="ruby">interval_id</If><If lang="csharp,go">IntervalId</If> (the UTC time at which the time period covered by this `Stats` object starts) | <If lang="ruby">`Time`</If><If lang="csharp">`DateTimeOffset`</If> |
| <If lang="java,objc,swift,ruby,flutter">all</If><If lang="csharp,go">All</If> | Aggregate count of both `inbound` and `outbound` message stats | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="java,objc,swift,flutter">apiRequests</If><If lang="ruby">api_requests</If><If lang="csharp,go">ApiRequests</If> | Breakdown of API requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="java,objc,swift,ruby,flutter">channels</If><If lang="csharp,go">Channels</If> | Breakdown of channel related stats such as min, mean and peak channels | [`ResourceCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ResourceCount) |
| <If lang="java,objc,swift,ruby,flutter">connections</If><If lang="csharp,go">Connections</If> | Breakdown of connection related stats such as min, mean and peak connections for TLS and non-TLS connections | [`ConnectionTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ConnectionTypes) |
| <If lang="java,objc,swift,ruby,flutter">inbound</If><If lang="csharp,go">Inbound</If> | Statistics such as count and data for all inbound messages received over REST and Realtime connections, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="java,objc,swift,ruby,flutter">outbound</If><If lang="csharp,go">Outbound</If> | Statistics such as count and data for all outbound messages retrieved via REST history requests, received over Realtime connections, or pushed with Webhooks, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="java,objc,swift,ruby,flutter">persisted</If><If lang="csharp,go">Persisted</If> | Messages persisted and later retrieved via the [history API](/docs/storage-history/history) | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="java,objc,swift,flutter">tokenRequests</If><If lang="ruby">token_requests</If><If lang="csharp,go">TokenRequests</If> | Breakdown of Ably Token requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="java,objc,swift,ruby,flutter">push</If><If lang="csharp,go">Push</If> | Detailed stats on push notifications, see [our Push documentation](/push) for more details | `PushStats` |

</If>
<If lang="flutter,java,go">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="java,objc,swift,go,flutter,csharp">unit</If><If lang="ruby">unit</If> | The length of the interval that this statistic covers, such as <If lang="ruby">`:minute`, `:hour`, `:day`, `:month`</If><If lang="csharp">`Minute`, `Hour`, `Day`, `Month`</If><If lang="go">`StatGranularityDay`, `StatGranularityMonth`</If><If lang="java,objc,swift,flutter">`'minute'`, `'hour'`, `'day'`, `'month'`</If> | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="java,go,flutter">`String`</If> |
| <If lang="java,objc,swift,ruby,flutter">intervalId</If><If lang="ruby">interval_id</If><If lang="csharp,go">IntervalId</If> | The UTC time at which the time period covered by this `Stats` object starts. For example, an interval ID value of "2018-03-01:10" in a `Stats` object whose `unit` is `day` would indicate that the period covered is "2018-03-01:10 .. 2018-03-01:11". All `Stats` objects, except those whose `unit` is `minute`, have an interval ID with resolution of one hour and the time period covered will always begin and end at a UTC hour boundary. For this reason it is not possible to infer the `unit` by looking at the resolution of the `intervalId`. `Stats` objects covering an individual minute will have an interval ID indicating that time; for example "2018-03-01:10:02". | `String` |
| <If lang="java,objc,swift,ruby,flutter">all</If><If lang="csharp,go">All</If> | Aggregate count of both `inbound` and `outbound` message stats | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="java,objc,swift,flutter">apiRequests</If><If lang="ruby">api_requests</If><If lang="csharp,go">ApiRequests</If> | Breakdown of API requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="java,objc,swift,ruby,flutter">channels</If><If lang="csharp,go">Channels</If> | Breakdown of channel related stats such as min, mean and peak channels | [`ResourceCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ResourceCount) |
| <If lang="java,objc,swift,ruby,flutter">connections</If><If lang="csharp,go">Connections</If> | Breakdown of connection related stats such as min, mean and peak connections for TLS and non-TLS connections | [`ConnectionTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ConnectionTypes) |
| <If lang="java,objc,swift,ruby,flutter">inbound</If><If lang="csharp,go">Inbound</If> | Statistics such as count and data for all inbound messages received over REST and Realtime connections, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="java,objc,swift,ruby,flutter">outbound</If><If lang="csharp,go">Outbound</If> | Statistics such as count and data for all outbound messages retrieved via REST history requests, received over Realtime connections, or pushed with Webhooks, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="java,objc,swift,ruby,flutter">persisted</If><If lang="csharp,go">Persisted</If> | Messages persisted and later retrieved via the [history API](/docs/storage-history/history) | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="java,objc,swift,flutter">tokenRequests</If><If lang="ruby">token_requests</If><If lang="csharp,go">TokenRequests</If> | Breakdown of Ably Token requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="java,objc,swift,ruby,flutter">push</If><If lang="csharp,go">Push</If> | Detailed stats on push notifications, see [our Push documentation](/push) for more details | `PushStats` |

</If>

<If lang="javascript,nodejs">

| Property | Description | Type |
|----------|-------------|------|
| appId | The ID of the Ably application the statistics relate to | `String` |
| entries | The statistics for the requested time interval and time period. The `schema` property provides further information | `Partial<Record<String, Number>>` |
| inProgress | Optional. For entries that are still in progress, such as the current month, the last sub-interval included in the stats entry. In the format `yyyy-mm-dd:hh:mm:ss` | `String` |
| intervalId | The UTC time period that the stats coverage begins at. If `unit` was requested as `minute` this will be in the format `YYYY-mm-dd:HH:MM`, if `hour` it will be `YYYY-mm-dd:HH`, if `day` it will be `YYYY-mm-dd:00` and if `month` it will be `YYYY-mm-01:00` | `String` |
| schema | The URL of a JSON schema describing the structure of the `Stats` object | `String` |

</If>

{/* - xchgProducer/xchg_producer/XchgProducer := Breakdown of messages have been sent or received through any Data Stream Exchange products associated with this app or account - Type: @XchgMessages@ */}
{/* - xchgConsumer/xchg_consumer/XchgConsumer := Breakdown of messages have been sent or received by this app or account connecting to some Data Stream Exchange product as a consumer - Type: @XchgMessages@ */}

<If lang="javascript,nodejs,objc,swift,csharp">

### <If lang="javascript,nodejs,csharp">StatsIntervalGranularity</If><If lang="objc,swift">ARTStatsGranularity</If> <a id="stats-granularity" />

<If lang="javascript,nodejs">

`StatsIntervalGranularity` is an enum specifying the granularity of a [`Stats interval`](/docs/api/rest-sdk/statistics#stats-type).

<If lang="javascript">

<Code>
```javascript
const StatsIntervalGranularity = [
    'minute',
    'hour',
    'day',
    'month'
]
```
</Code>

</If>
<If lang="nodejs">

<Code>
```nodejs
const StatsIntervalGranularity = [
    'minute',
    'hour',
    'day',
    'month'
]
```
</Code>

</If>
</If>

<If lang="objc,swift">

`ARTStatsGranularity` is an enum specifying the granularity of a [`ARTStats interval`](/docs/api/rest-sdk/statistics#stats-type).

<If lang="objc">

```objc
typedef NS_ENUM(NSUInteger, ARTStatsGranularity) {
    ARTStatsGranularityMinute,
    ARTStatsGranularityHour,
    ARTStatsGranularityDay,
    ARTStatsGranularityMonth
};
```

</If>

<If lang="swift">

```swift
enum ARTStatsGranularity : UInt {
    case Minute
    case Hour
    case Day
    case Month
}
```

</If>

</If>

<If lang="csharp">

`StatsIntervalGranularity` is an enum specifying the granularity of a [`Stats interval`](/docs/api/rest-sdk/statistics#stats-type).

```csharp
public enum StatsIntervalGranularity
{
    Minute,
    Hour,
    Day,
    Month
}
```

</If>
</If>
<If lang="javascript,nodejs">

### BatchPublishSpec <a id="batch-publish-spec" />

A `BatchPublishSpec` describes the messages that should be published by a batch publish operation, and the channels to which they should be published.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channels | The names of the channels to publish the `messages` to | `String[]` |
| messages | An array of [`Message`](/docs/api/realtime-sdk/types#message) objects | [`Message[]`](/docs/api/realtime-sdk/types#message) |

### BatchResult <a id="batch-result" />

A `BatchResult` contains information about the results of a batch operation.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| successCount | The number of successful operations in the request | `Number` |
| failureCount | The number of unsuccessful operations in the request | `Number` |
| messages | An array of results for the batch operation (for example, an array of [`BatchPublishSuccessResult`](/docs/api/realtime-sdk/types#batch-publish-success-result) or [`BatchPublishFailureResult`](/docs/api/realtime-sdk/types#batch-publish-failure-result) for a channel batch publish request) | `Object[]` |

### BatchPublishSuccessResult <a id="batch-publish-success-result" />

A `BatchPublishSuccessResult` contains information about the result of successful publishes to a channel requested by a single [`BatchPublishSpec`](/docs/api/realtime-sdk/types#batch-publish-spec).

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The name of the channel the message(s) was published to | `String` |
| messageId | A unique ID prefixed to the `Message.id` of each published message | `String` |

### BatchPublishFailureResult <a id="batch-publish-failure-result" />

A `BatchPublishFailureResult` contains information about the result of unsuccessful publishes to a channel requested by a single [`BatchPublishSpec`](/docs/api/realtime-sdk/types#batch-publish-spec).

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The name of the channel the message(s) failed to be published to | `String` |
| error | Describes the reason for which the message(s) failed to publish to the channel as an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) |

### BatchPresenceSuccessResult <a id="batch-presence-success-result" />

A `BatchPresenceSuccessResult` contains information about the result of a successful batch presence request for a single channel.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The channel name the presence state was retrieved for | `String` |
| presence | An array of [`PresenceMessage`](/docs/api/realtime-sdk/types#presence-message) describing members present on the channel | [`PresenceMessage[]`](/docs/api/realtime-sdk/types#presence-message) |

### BatchPresenceFailureResult <a id="batch-presence-failure-result" />

A `BatchPresenceFailureResult` contains information about the result of an unsuccessful batch presence request for a single channel.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The channel name the presence state failed to be retrieved for | `String` |
| error | Describes the reason for which presence state could not be retrieved for the channel as an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) |

### TokenRevocationSuccessResult <a id="token-revocation-success-result" />

A `TokenRevocationSuccessResult` contains information about the result of a successful token revocation request for a single target specifier.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| target | The target specifier | `String` |
| appliesAt | The time at which the token revocation will take effect, as a Unix timestamp in milliseconds | `Number` |
| issuedBefore | A Unix timestamp in milliseconds. Only tokens issued earlier than this time will be revoked | `Number` |

### TokenRevocationFailureResult <a id="token-revocation-failure-result" />

A `TokenRevocationFailureResult` contains information about the result of an unsuccessful token revocation request for a single target specifier.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| target | The target specifier | `String` |
| error | Describes the reason for which token revocation failed for the given `target` as an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) |

</If>

## Other types

### <If lang="javascript,nodejs,flutter,go">AuthOptions Object</If><If lang="objc,swift">ARTAuthOptions</If><If lang="ruby">AuthOptions Hash</If><If lang="java">io.ably.lib.rest.Auth.AuthOptions</If><If lang="csharp">IO.Ably.AuthOptions</If> <a id="auth-options" />

<If lang="javascript,nodejs">

`AuthOptions` is a plain JavaScript object and is used when making [authentication](/docs/auth) requests. If passed in, an `authOptions` object will be used instead of (as opposed to supplementing or being merged with) the default values given when the library was instantiated. The following attributes are supported:

</If>

<If lang="ruby">

`AuthOptions` is a Hash object and is used when making [authentication](/docs/auth) requests. These options will supplement or override the corresponding options given when the library was instantiated. The following key symbol values can be added to the Hash:

</If>

<If lang="java,swift,objc,go">

<If lang="swift,objc">`ART`</If>`AuthOptions` is used when making [authentication](/docs/auth) requests. These options will supplement or override the corresponding options given when the library was instantiated.

</If>

<If lang="javascript,nodejs,objc,swift,csharp,go,flutter">

#### Properties

</If>
<If lang="java">

#### Members

</If>
<If lang="ruby">

#### Attributes

</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,flutter">authCallback</If><If lang="csharp,go">AuthCallback</If><If lang="ruby">:auth_callback</If> | A <If lang="javascript,nodejs,java,objc,swift,csharp,go,ruby,flutter">function</If><If lang="javascript,nodejs">function with the form `function(tokenParams, callback(err, tokenOrTokenRequest))`</If><If lang="java">`TokenCallback` instance</If><If lang="ruby">proc / lambda (called synchronously in REST and Realtime but does not block EventMachine in the latter)</If> which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | <If lang="javascript,nodejs,objc,swift,flutter">`Callable`</If><If lang="java">`TokenCallback`</If><If lang="ruby">`Proc`</If><If lang="csharp">`Func<TokenParams, Task<object>>`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">authUrl</If><If lang="csharp,go">AuthUrl</If><If lang="ruby">:auth_url</If> | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | <If lang="javascript,nodejs,java,go,flutter">`String`</If><If lang="csharp">`Uri`</If><If lang="swift,objc">`NSURL`</If><If lang="ruby">`String`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">authMethod</If><If lang="csharp,go">AuthMethod</If><If lang="ruby">:auth_method</If> | _<If lang="javascript,nodejs,java,objc,swift,csharp,go,flutter">`GET`</If><If lang="ruby">`:get`</If>_ The HTTP verb to use for the request, either <If lang="javascript,nodejs,java,objc,swift,csharp,go,flutter">`GET`</If><If lang="ruby">`:get`</If> or <If lang="javascript,nodejs,java,objc,swift,csharp,go,flutter">`POST`</If><If lang="ruby">`:post`</If> | <If lang="javascript,nodejs,java,objc,swift,go,flutter">`String`</If><If lang="ruby">`Symbol`</If><If lang="csharp">`HttpMethod`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">authHeaders</If><If lang="csharp,go">AuthHeaders</If><If lang="ruby">:auth_headers</If> | A set of key value pair headers to be added to any request made to the <If lang="javascript,nodejs,java,objc,swift,flutter">authUrl</If><If lang="csharp">AuthUrl</If><If lang="ruby">:auth_url</If>. Useful when an application requires these to be added to validate the request or implement the response. <If lang="javascript">If the `authHeaders` object contains an `authorization` key, then `withCredentials` will be set on the xhr request.</If> | <If lang="javascript,nodejs">`Object`</If><If lang="ruby">`Hash`</If><If lang="java">`Param[]`</If><If lang="csharp">`Dictionary<string, string>`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">authParams</If><If lang="csharp,go">AuthParams</If><If lang="ruby">:auth_params</If> | A set of key value pair params to be added to any request made to the <If lang="javascript,nodejs,java,objc,swift,flutter">authUrl</If><If lang="csharp">AuthUrl</If><If lang="ruby">:auth_url</If>. When the <If lang="javascript,nodejs,java,objc,swift,flutter">authMethod</If><If lang="csharp,go">AuthMethod</If><If lang="ruby">:auth_method</If> is `GET`, query params are added to the URL, whereas when <If lang="javascript,nodejs,java,objc,swift,flutter">authMethod</If><If lang="csharp,go">AuthMethod</If><If lang="ruby">:auth_method</If> is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | <If lang="javascript,nodejs">`Object`</If><If lang="ruby">`Hash`</If><If lang="java">`Param[]`</If><If lang="csharp">`Dictionary<string, string>`</If><If lang="objc">`NSArray<NSURLQueryItem *>`</If><If lang="swift">`[NSURLQueryItem]/Array<NSURLQueryItem>`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">tokenDetails</If><If lang="csharp,go">TokenDetails</If><If lang="ruby">:token_details</If> | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,swift,flutter">authUrl</If><If lang="csharp,go">AuthUrl</If><If lang="ruby">:auth_url</If> or <If lang="javascript,nodejs,java,objc,swift,flutter">authCallback</If><If lang="csharp,go">AuthCallback</If><If lang="ruby">:auth_callback</If>. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">key</If><If lang="csharp,go">Key</If><If lang="ruby">:key</If> | Optionally the [API key](/docs/auth#api-key) to use can be specified as a full key string; if not, the API key passed into [`ClientOptions`](#client-options) when instancing the Realtime or REST library is used | `String` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">queryTime</If><If lang="csharp,go">QueryTime</If><If lang="ruby">:query_time</If> | _false_ If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/auth/token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request. | `Boolean` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">token</If><If lang="csharp,go">Token</If><If lang="ruby">:token</If> | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the <If lang="javascript,nodejs,java,objc,swift,flutter">token</If><If lang="csharp,go">Token</If><If lang="ruby">:token</If> property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,swift,flutter">authUrl</If><If lang="csharp,go">AuthUrl</If><If lang="ruby">:auth_url</If> or <If lang="javascript,nodejs,java,objc,swift,flutter">authCallback</If><If lang="csharp,go">AuthCallback</If><If lang="ruby">:auth_callback</If>. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |

### <If lang="javascript,nodejs,flutter,go">ClientOptions Object</If><If lang="objc,swift">ARTClientOptions</If><If lang="ruby">ClientOptions Hash</If><If lang="java">io.ably.types.ClientOptions</If><If lang="csharp">IO.Ably.ClientOptions</If> <a id="client-options" />

<If lang="javascript,nodejs">

`ClientOptions` is a plain JavaScript object and is used in the `Ably.Realtime` constructor's `options` argument. The following attributes can be defined on the object:

</If>

<If lang="ruby">

`ClientOptions` is a Hash object and is used in the `Ably::Realtime` constructor's `options` argument. The following key symbol values can be added to the Hash:

</If>

<If lang="java,objc,swift,csharp,go,flutter">

<If lang="objc,swift">`ART`</If>`ClientOptions` is used in the `AblyRealtime` constructor's `options` argument.

</If>
<If lang="javascript,nodejs,objc,swift,csharp,go,flutter">

#### Properties

</If>
<If lang="java">

#### Members

</If>
<If lang="ruby">

#### Attributes

</If>

<If lang="javascript,nodejs">

| Property | Description |
|----------|-------------|
| key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic)<br />**Type:** `String` |
| token | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `String`, `TokenDetails` or `TokenRequest` |
| authCallback | A function with the form `function(tokenParams, callback(err, tokenOrTokenRequest))` which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls<br />**Type:** `Callable` |
| authUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server<br />**Type:** `String` |
| authMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />**Type:** `String`<br />**Default:** `GET` |
| authHeaders | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response. <If lang="javascript">If the `authHeaders` object contains an `authorization` key, then `withCredentials` will be set on the xhr request</If><br />**Type:** `Object` |
| authParams | A set of key value pair params to be added to any request made to the `authUrl`. When the `authMethod` is `GET`, query params are added to the URL, whereas when `authMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response<br />**Type:** `Object` |
| tokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `TokenDetails` |
| tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />**Type:** `Boolean`<br />**Default:** true |
| clientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `clientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `clientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `clientId` specified here conflicts with the `clientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients)<br />**Type:** `String` |
| useTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients)<br />**Type:** `Boolean`<br />**Default:** false |
| endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| idempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default<br />**Type:** `Boolean`<br />**Default:** false |
| fallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here<br />**Type:** `String[]`<br />**Default:** `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]` |
| transportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections)<br />**Type:** `Object` |
| useBinaryProtocol | <If lang="javascript">If set to true, will enable the binary protocol (MessagePack) if it is supported. It's disabled by default on browsers for performance considerations (browsers are optimized for decoding JSON)</If><If lang="nodejs">If set to false, will forcibly disable the binary protocol (MessagePack). The binary protocol is used by default unless it is not supported</If>. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />**Type:** `Boolean`<br />**Default:** <If lang="javascript">false</If><If lang="nodejs">true</If> |
| queueMessages | If false, this disables the default behavior whereby the library queues messages on a connection in the disconnected or connecting states. The default behavior allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queueing if they wish to have application-level control over the queueing under those conditions<br />**Type:** `Boolean`<br />**Default:** true |
| echoMessages | If false, prevents messages originating from this connection being echoed back on the same connection<br />**Type:** `Boolean`<br />**Default:** true |
| autoConnect | By default as soon as the client library is instantiated it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the [`connect`](/docs/api/realtime-sdk/connection#connect) method<br />**Type:** `Boolean`<br />**Default:** true |
| logLevel | A number controlling the verbosity of the log output of the library. Valid values are: 0 (no logs), 1 (errors only), 2 (errors plus connection and channel state changes), 3 (high-level debug output), and 4 (full debug output)<br />**Type:** `Integer` |
| logHandler | A function to handle each line of the library's log output. If `logHandler` is not specified, `console.log` is used<br />**Type:** `Callable` |
| transports | An optional array of transports to use, in descending order of preference. <If lang="javascript">In the browser environment the available transports are: `web_socket`, `xhr_polling`</If><If lang="nodejs">The transports available in the Node.js client library are: `web_socket`, `xhr_polling`, `comet`</If><br />**Type:** `String[]` |
| recover | <If lang="javascript">This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the Realtime library. This might typically be used by clients of the browser library to ensure connection state can be preserved when the user refreshes the page. A recovery key string can be explicitly provided, or alternatively if a callback function is provided, the client library will automatically persist the recovery key between page reloads and call the callback when the connection is recoverable. The callback is then responsible for confirming whether the connection should be recovered or not. See [connection state recovery](/docs/connect/states) for further information<br />**Type:** `String`, `Callable`</If><If lang="nodejs">This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the library by providing that connection's [`recoveryKey`](/docs/api/realtime-sdk/connection#recovery-key). This might typically be used by clients of an app to ensure connection state can be preserved following a reload. See [connection state recovery](/docs/connect/states) for further information and example code<br />**Type:** `String`</If> |
| closeOnUnload | <If lang="javascript">When true, the client library will automatically send a close request to Ably whenever the `window beforeunload` event fires. By enabling this option, the close request sent to Ably ensures the connection state will not be retained and all channels associated with the connection will be detached. This is commonly used by developers who want presence leave events to fire immediately i.e. if a user navigates to another page or closes their browser, then enabling this option will result in the presence member leaving immediately. Without this option or an explicit call to the [`close`](/docs/api/realtime-sdk/connection#close) method of the [`Connection object`](/docs/api/realtime-sdk/connection), Ably expects that the abruptly disconnected connection could later be recovered and therefore does not immediately remove the user from presence. Instead, to avoid "twitchy" presence behavior an abruptly disconnected client is removed from channels in which they are present after 15 seconds, and the connection state is retained for two minutes<br />**Type:** `Boolean`<br />**Default:** true</If> |
| queryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/api/realtime-sdk/authentication#request-token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request<br />**Type:** `Boolean`<br />**Default:** false |
| defaultTokenParams | When a [TokenParams](/docs/api/realtime-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new Ably Tokens or Ably TokenRequests<br />**Type:** [`TokenParams`](/docs/api/realtime-sdk/types#token-params) |
| disconnectedRetryTimeout | When the connection enters the `DISCONNECTED` state, after this delay in milliseconds, if the state is still `DISCONNECTED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 15,000ms |
| suspendedRetryTimeout | When the connection enters the `SUSPENDED` state, after this delay in milliseconds, if the state is still `SUSPENDED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 30,000ms |
| pushServiceWorkerUrl | A URL pointing to a service worker script which is used as the target for web push notifications<br />**Type:** `String` |

</If>

<If lang="csharp">

| Property | Description |
|----------|-------------|
| Key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic)<br />**Type:** `String` |
| Token | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `Token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `AuthUrl` or `AuthCallback`. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `String`, `TokenDetails` or `TokenRequest` |
| AuthCallback | A function which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls<br />**Type:** `Func<TokenParams, Task<object>>` |
| AuthUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server<br />**Type:** `Uri` |
| AuthMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />**Type:** `HttpMethod`<br />**Default:** `GET` |
| AuthHeaders | A set of key value pair headers to be added to any request made to the `AuthUrl`. Useful when an application requires these to be added to validate the request or implement the response<br />**Type:** `Dictionary<string, string>` |
| AuthParams | A set of key value pair params to be added to any request made to the `AuthUrl`. When the `AuthMethod` is `GET`, query params are added to the URL, whereas when `AuthMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response<br />**Type:** `Dictionary<string, string>` |
| TokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `AuthUrl` or `AuthCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `TokenDetails` |
| Tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />**Type:** `Boolean`<br />**Default:** true |
| ClientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `ClientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `ClientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `ClientId` specified here conflicts with the `ClientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients)<br />**Type:** `String` |
| UseTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients)<br />**Type:** `Boolean`<br />**Default:** false |
| Endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| Environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| IdempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default<br />**Type:** `Boolean`<br />**Default:** false |
| FallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here<br />**Type:** `String[]`<br />**Default:** `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]` |
| TransportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections)<br />**Type:** `Dictionary<string, object>` |
| LogLevel | This is an enum controlling the verbosity of the output from `Debug` (maximum) to `Error` (errors only). A special value of `None` will silence all logging. Note that the `LogLevel` is a static variable in the library and will thus not act independently between library instances<br />**Type:** `Enum`<br />**Default:** `Error` |
| LoggerSink | The default ILoggerSink outputs messages to the debug console. This property allows the user to pipe the log messages to their own logging infrastructure<br />**Type:** `ILoggerSink`<br />**Default:** `IO.Ably.DefaultLoggerSink` |
| UseBinaryProtocol | If set to false, will forcibly disable the binary protocol (MessagePack). The binary protocol is used by default unless it is not supported. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />**Type:** `Boolean`<br />**Default:** true |
| QueueMessages | If false, this disables the default behavior whereby the library queues messages on a connection in the disconnected or connecting states. The default behavior allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queueing if they wish to have application-level control over the queueing under those conditions<br />**Type:** `Boolean`<br />**Default:** true |
| EchoMessages | If false, prevents messages originating from this connection being echoed back on the same connection<br />**Type:** `Boolean`<br />**Default:** true |
| AutoConnect | By default as soon as the client library is instantiated it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the [`connect`](/docs/api/realtime-sdk/connection#connect) method<br />**Type:** `Boolean`<br />**Default:** true |
| Recover | This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the library by providing that connection's [`recoveryKey`](/docs/api/realtime-sdk/connection#recovery-key). This might typically be used by clients of an app to ensure connection state can be preserved following a reload. See [connection state recovery](/docs/connect/states) for further information and example code<br />**Type:** `String` |
| QueryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/api/realtime-sdk/authentication#request-token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request<br />**Type:** `Boolean`<br />**Default:** false |
| DefaultTokenParams | When a [TokenParams](/docs/api/realtime-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new Ably Tokens or Ably TokenRequests<br />**Type:** [`TokenParams`](/docs/api/realtime-sdk/types#token-params) |
| DisconnectedRetryTimeout | When the connection enters the `DISCONNECTED` state, after this delay in milliseconds, if the state is still `DISCONNECTED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 15,000ms |
| SuspendedRetryTimeout | When the connection enters the `SUSPENDED` state, after this delay in milliseconds, if the state is still `SUSPENDED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 30,000ms |

</If>

<If lang="java">

| Property | Description |
|----------|-------------|
| key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic)<br />**Type:** `String` |
| token | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `String`, `TokenDetails` or `TokenRequest` |
| authCallback | A `TokenCallback` instance which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls<br />**Type:** `TokenCallback` |
| authUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server<br />**Type:** `String` |
| authMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />**Type:** `String`<br />**Default:** `GET` |
| authHeaders | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response<br />**Type:** `Param[]` |
| authParams | A set of key value pair params to be added to any request made to the `authUrl`. When the `authMethod` is `GET`, query params are added to the URL, whereas when `authMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response<br />**Type:** `Param[]` |
| tokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `TokenDetails` |
| tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />**Type:** `Boolean`<br />**Default:** true |
| clientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `clientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `clientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `clientId` specified here conflicts with the `clientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients)<br />**Type:** `String` |
| useTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients)<br />**Type:** `Boolean`<br />**Default:** false |
| endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** Null |
| environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** Null |
| idempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default<br />**Type:** `Boolean`<br />**Default:** false |
| fallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here<br />**Type:** `String[]`<br />**Default:** `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]` |
| transportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections)<br />**Type:** `Param[]` |
| logLevel | A number controlling the verbosity of the output from 2 (maximum, verbose) to 6 (errors only). A special value of 99 will silence all logging. Note that the `logLevel` is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently. See [the logging section of the java library README](https://github.com/ably/ably-java/#logging) for more details<br />**Type:** `Integer`<br />**Default:** 5 |
| logHandler | A `LogHandler` interface can be specified to handle each line of log output. If `logHandler` is not specified, `System.out` is used. Note that the `logHandler` is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently. See [the logging section of the java library README](https://github.com/ably/ably-java/#logging) for more details<br />**Type:** `PrintStream`<br />**Default:** `System.out PrintStream` |
| useBinaryProtocol | If set to false, will forcibly disable the binary protocol (MessagePack). The binary protocol is used by default unless it is not supported. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />**Type:** `Boolean`<br />**Default:** true |
| queueMessages | If false, this disables the default behavior whereby the library queues messages on a connection in the disconnected or connecting states. The default behavior allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queueing if they wish to have application-level control over the queueing under those conditions<br />**Type:** `Boolean`<br />**Default:** true |
| echoMessages | If false, prevents messages originating from this connection being echoed back on the same connection<br />**Type:** `Boolean`<br />**Default:** true |
| autoConnect | By default as soon as the client library is instantiated it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the [`connect`](/docs/api/realtime-sdk/connection#connect) method<br />**Type:** `Boolean`<br />**Default:** true |
| recover | This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the library by providing that connection's [`recoveryKey`](/docs/api/realtime-sdk/connection#recovery-key). This might typically be used by clients of an app to ensure connection state can be preserved following a reload. See [connection state recovery](/docs/connect/states) for further information and example code<br />**Type:** `String` |
| queryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/api/realtime-sdk/authentication#request-token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request<br />**Type:** `Boolean`<br />**Default:** false |
| defaultTokenParams | When a [TokenParams](/docs/api/realtime-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new Ably Tokens or Ably TokenRequests<br />**Type:** [`TokenParams`](/docs/api/realtime-sdk/types#token-params) |
| disconnectedRetryTimeout | When the connection enters the `DISCONNECTED` state, after this delay in milliseconds, if the state is still `DISCONNECTED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 15,000ms |
| suspendedRetryTimeout | When the connection enters the `SUSPENDED` state, after this delay in milliseconds, if the state is still `SUSPENDED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 30,000ms |

</If>

<If lang="ruby">

| Property | Description |
|----------|-------------|
| :key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic)<br />**Type:** `String` |
| :token | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the :token property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as :auth_url or :auth_callback. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `String`, `TokenDetails` or `TokenRequest` |
| :auth_callback | A proc / lambda (called synchronously in REST and Realtime but does not block EventMachine in the latter) which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls<br />**Type:** `Proc` |
| :auth_url | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server<br />**Type:** String |
| :auth_method | The HTTP verb to use for the request, either `:get` or `:post`<br />**Type:** `Symbol`<br />**Default:** `:get` |
| :auth_headers | A set of key value pair headers to be added to any request made to the :auth_url. Useful when an application requires these to be added to validate the request or implement the response<br />**Type:** `Hash` |
| :auth_params | A set of key value pair params to be added to any request made to the :auth_url. When the :auth_method is `GET`, query params are added to the URL, whereas when :auth_method is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response<br />**Type:** `Hash` |
| :token_details | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as :auth_url or :auth_callback. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `TokenDetails` |
| :tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />**Type:** `Boolean`<br />**Default:** true |
| :client_id | A client ID, used for identifying this client when publishing messages or for presence purposes. The `client_id` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `client_id` may also be implicit in a token used to instantiate the library; an error will be raised if a `client_id` specified here conflicts with the `client_id` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients)<br />**Type:** `String` |
| :use_token_auth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `client_id` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients)<br />**Type:** `Boolean`<br />**Default:** false |
| :endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** nil |
| :environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** nil |
| :idempotent_rest_publishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default<br />**Type:** `Boolean`<br />**Default:** false |
| :fallback_hosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here<br />**Type:** `String[]`<br />**Default:** `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]` |
| :transport_params | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections)<br />**Type:** `Hash` |
| :log_level | Log level for the standard Logger that outputs to `STDOUT`. Can be set to `:fatal`, `:error`, `:warn`, `:info`, `:debug` or `:none`. Alternatively a [`Logger` severity constant](http://ruby-doc.org/stdlib-2.2.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Description) can be specified<br />**Type:** `Symbol`, [`Logger::SEVERITY`](http://ruby-doc.org/stdlib-2.2.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Description)<br />**Default:** `:error` |
| :logger | A [Ruby `Logger`](http://ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html) compatible object to handle each line of log output. If `logger` is not specified, `STDOUT` is used<br />**Type:** [Ruby `Logger`](http://ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html)<br />**Default:** `STDOUT Logger` |
| :use_binary_protocol | If set to false, will forcibly disable the binary protocol (MessagePack). The binary protocol is used by default unless it is not supported. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />**Type:** `Boolean`<br />**Default:** true |
| :queue_messages | If false, this disables the default behavior whereby the library queues messages on a connection in the disconnected or connecting states. The default behavior allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queueing if they wish to have application-level control over the queueing under those conditions<br />**Type:** `Boolean`<br />**Default:** true |
| :echo_messages | If false, prevents messages originating from this connection being echoed back on the same connection<br />**Type:** `Boolean`<br />**Default:** true |
| :auto_connect | By default as soon as the client library is instantiated it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the [`connect`](/docs/api/realtime-sdk/connection#connect) method<br />**Type:** `Boolean`<br />**Default:** true |
| :recover | This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the library by providing that connection's [`recovery_key`](/docs/api/realtime-sdk/connection#recovery-key). This might typically be used by clients of an app to ensure connection state can be preserved following a reload. See [connection state recovery](/docs/connect/states) for further information and example code<br />**Type:** `String` |
| :query_time | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/api/realtime-sdk/authentication#request-token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request<br />**Type:** `Boolean`<br />**Default:** false |
| :default_token_params | When a [TokenParams](/docs/api/realtime-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new Ably Tokens or Ably TokenRequests<br />**Type:** [`TokenParams`](/docs/api/realtime-sdk/types#token-params) |
| :disconnected_retry_timeout | When the connection enters the `DISCONNECTED` state, after this delay in seconds, if the state is still `DISCONNECTED`, the client library will attempt to reconnect automatically<br />**Type:** Integer<br />**Default:** 15s |
| :suspended_retry_timeout | When the connection enters the `SUSPENDED` state, after this delay in seconds, if the state is still `SUSPENDED`, the client library will attempt to reconnect automatically<br />**Type:** Integer<br />**Default:** 30s |

</If>

<If lang="swift,objc">

| Property | Description |
|----------|-------------|
| key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic)<br />**Type:** `String` |
| token | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `String`, `TokenDetails` or `TokenRequest` |
| authCallback | A function which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls<br />**Type:** `Callable` |
| authUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server<br />**Type:** `NSURL` |
| authMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />**Type:** `String`<br />**Default:** `GET` |
| authHeaders | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response<br />**Type:** `Object` |
| authParams | A set of key value pair params to be added to any request made to the `authUrl`. When the `authMethod` is `GET`, query params are added to the URL, whereas when `authMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response<br />**Type:** `[NSURLQueryItem]/Array<NSURLQueryItem>` |
| tokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `TokenDetails` |
| tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />**Type:** `Boolean`<br />**Default:** true |
| clientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `clientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `clientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `clientId` specified here conflicts with the `clientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients)<br />**Type:** `String` |
| useTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients)<br />**Type:** `Boolean`<br />**Default:** false |
| endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** nil |
| environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** nil |
| idempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default<br />**Type:** `Boolean`<br />**Default:** false |
| fallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here<br />**Type:** `String[]`<br />**Default:** `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]` |
| transportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections)<br />**Type:** `Object` |
| logLevel | An enum controlling the verbosity of the output from `ARTLogLevelVerbose` to `ARTLogLevelNone`. A special value of 99 will silence all logging<br />**Type:** `ARTLogLevel`<br />**Default:** `ARTLogLevelWarn` |
| logHandler | A `ARTLog` object can be specified to handle each line of log output. If `logHandler` is not specified, a default `ARTLog` instance is used<br />**Type:** `ARTLog *` |
| useBinaryProtocol | Note: The binary protocol is currently not supported in Swift. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />**Type:** `Boolean`<br />**Default:** true |
| logExceptionReportingUrl | Defaults to a string value for an Ably error reporting Data Source Name<br />**Type:** `String` |
| queueMessages | If false, this disables the default behavior whereby the library queues messages on a connection in the disconnected or connecting states. The default behavior allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queueing if they wish to have application-level control over the queueing under those conditions<br />**Type:** `Boolean`<br />**Default:** true |
| echoMessages | If false, prevents messages originating from this connection being echoed back on the same connection<br />**Type:** `Boolean`<br />**Default:** true |
| autoConnect | By default as soon as the client library is instantiated it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the [`connect`](/docs/api/realtime-sdk/connection#connect) method<br />**Type:** `Boolean`<br />**Default:** true |
| recover | This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the library by providing that connection's [`recoveryKey`](/docs/api/realtime-sdk/connection#recovery-key). This might typically be used by clients of an app to ensure connection state can be preserved following a reload. See [connection state recovery](/docs/connect/states) for further information and example code<br />**Type:** `String` |
| queryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/api/realtime-sdk/authentication#request-token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request<br />**Type:** `Boolean`<br />**Default:** false |
| defaultTokenParams | When a [TokenParams](/docs/api/realtime-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new Ably Tokens or Ably TokenRequests<br />**Type:** [`TokenParams`](/docs/api/realtime-sdk/types#token-params) |
| disconnectedRetryTimeout | When the connection enters the `DISCONNECTED` state, after this delay as a `NSTimeInterval`, if the state is still `DISCONNECTED`, the client library will attempt to reconnect automatically<br />**Type:** `NSTimeInterval`<br />**Default:** 15,000ms |
| suspendedRetryTimeout | When the connection enters the `SUSPENDED` state, after this delay as a `NSTimeInterval`, if the state is still `SUSPENDED`, the client library will attempt to reconnect automatically<br />**Type:** `NSTimeInterval`<br />**Default:** 30,000ms |

</If>

<If lang="flutter">

| Property | Description |
|----------|-------------|
| key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic)<br />**Type:** `String` |
| token | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `String`, `TokenDetails` or `TokenRequest` |
| authCallback | A function which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls<br />**Type:** `Callable` |
| authUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server<br />**Type:** `String` |
| authMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />**Type:** `String`<br />**Default:** `GET` |
| authHeaders | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response<br />**Type:** `Map<String, String>` |
| authParams | A set of key value pair params to be added to any request made to the `authUrl`. When the `authMethod` is `GET`, query params are added to the URL, whereas when `authMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response<br />**Type:** `Map<String, String>` |
| tokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `TokenDetails` |
| tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />**Type:** `Boolean`<br />**Default:** true |
| clientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `clientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `clientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `clientId` specified here conflicts with the `clientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients)<br />**Type:** `String` |
| useTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients)<br />**Type:** `Boolean`<br />**Default:** false |
| endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| idempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default<br />**Type:** `Boolean`<br />**Default:** false |
| fallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here<br />**Type:** `String[]`<br />**Default:** `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]` |
| transportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections)<br />**Type:** `Map<String, String>` |
| useBinaryProtocol | If set to false, will forcibly disable the binary protocol (MessagePack). The binary protocol is used by default unless it is not supported. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />**Type:** `Boolean`<br />**Default:** true |
| queueMessages | If false, this disables the default behavior whereby the library queues messages on a connection in the disconnected or connecting states. The default behavior allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queueing if they wish to have application-level control over the queueing under those conditions<br />**Type:** `Boolean`<br />**Default:** true |
| echoMessages | If false, prevents messages originating from this connection being echoed back on the same connection<br />**Type:** `Boolean`<br />**Default:** true |
| autoConnect | By default as soon as the client library is instantiated it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the [`connect`](/docs/api/realtime-sdk/connection#connect) method<br />**Type:** `Boolean`<br />**Default:** true |
| queryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/api/realtime-sdk/authentication#request-token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request<br />**Type:** `Boolean`<br />**Default:** false |
| defaultTokenParams | When a [TokenParams](/docs/api/realtime-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new Ably Tokens or Ably TokenRequests<br />**Type:** [`TokenParams`](/docs/api/realtime-sdk/types#token-params) |
| disconnectedRetryTimeout | When the connection enters the `DISCONNECTED` state, after this delay in milliseconds, if the state is still `DISCONNECTED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 15,000ms |
| suspendedRetryTimeout | When the connection enters the `SUSPENDED` state, after this delay in milliseconds, if the state is still `SUSPENDED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 30,000ms |

</If>

<If lang="go">

| Property | Description |
|----------|-------------|
| Key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic)<br />**Type:** `String` |
| Token | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `String`, `TokenDetails` or `TokenRequest` |
| AuthCallback | A function which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls<br />**Type:** `Callable` |
| AuthUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server<br />**Type:** `String` |
| AuthMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />**Type:** `String`<br />**Default:** `GET` |
| AuthHeaders | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response<br />**Type:** `Map<String, String>` |
| AuthParams | A set of key value pair params to be added to any request made to the `authUrl`. When the `authMethod` is `GET`, query params are added to the URL, whereas when `authMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response<br />**Type:** `Map<String, String>` |
| TokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token)<br />**Type:** `TokenDetails` |
| Tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />**Type:** `Boolean`<br />**Default:** true |
| ClientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `clientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `clientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `clientId` specified here conflicts with the `clientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients)<br />**Type:** `String` |
| UseTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients)<br />**Type:** `Boolean`<br />**Default:** false |
| Endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| Environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details<br />**Type:** `String`<br />**Default:** null |
| IdempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default<br />**Type:** `Boolean`<br />**Default:** false |
| FallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here<br />**Type:** `String[]`<br />**Default:** `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]` |
| TransportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections)<br />**Type:** `Map<String, String>` |
| UseBinaryProtocol | If set to false, will forcibly disable the binary protocol (MessagePack). The binary protocol is used by default unless it is not supported. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />**Type:** `Boolean`<br />**Default:** true |
| QueueMessages | If false, this disables the default behavior whereby the library queues messages on a connection in the disconnected or connecting states. The default behavior allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queueing if they wish to have application-level control over the queueing under those conditions<br />**Type:** `Boolean`<br />**Default:** true |
| EchoMessages | If false, prevents messages originating from this connection being echoed back on the same connection<br />**Type:** `Boolean`<br />**Default:** true |
| AutoConnect | By default as soon as the client library is instantiated it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the [`connect`](/docs/api/realtime-sdk/connection#connect) method<br />**Type:** `Boolean`<br />**Default:** true |
| QueryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [TokenRequests](/docs/api/realtime-sdk/authentication#request-token), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request<br />**Type:** `Boolean`<br />**Default:** false |
| DefaultTokenParams | When a [TokenParams](/docs/api/realtime-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new Ably Tokens or Ably TokenRequests<br />**Type:** [`TokenParams`](/docs/api/realtime-sdk/types#token-params) |
| DisconnectedRetryTimeout | When the connection enters the `DISCONNECTED` state, after this delay in milliseconds, if the state is still `DISCONNECTED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 15,000ms |
| SuspendedRetryTimeout | When the connection enters the `SUSPENDED` state, after this delay in milliseconds, if the state is still `SUSPENDED`, the client library will attempt to reconnect automatically<br />**Type:** `Integer`<br />**Default:** 30,000ms |

</If>

### <If lang="javascript,nodejs,go,flutter">ChannelOptions Object</If><If lang="objc,swift">ARTChannelOptions</If><If lang="ruby">ChannelOptions Hash</If><If lang="java">io.ably.lib.types.ChannelOptions</If><If lang="csharp">IO.Ably.Rest.ChannelOptions</If> <a id="channel-options" />

Channel options are used for <If lang="javascript,nodejs,java,swift,objc,csharp">setting [channel parameters](/docs/channels/options) and</If> [configuring encryption](/docs/channels/options/encryption).

<If lang="javascript,nodejs">

`ChannelOptions`, a plain JavaScript object, may optionally be specified when instancing a [`Channel`](/docs/channels), and this may be used to specify channel-specific options. The following attributes can be defined on the object:

</If>

<If lang="ruby">

`ChannelOptions`, a Hash object, may optionally be specified when instancing a [`Channel`](/docs/channels), and this may be used to specify channel-specific options. The following key symbol values can be added to the Hash:

</If>

<If lang="java,swift,objc,go">

<If lang="swift,objc">`ART`</If><If lang="java">`io.ably.lib.types.`</If>`ChannelOptions` may optionally be specified when instancing a [`Channel`](/docs/channels), and this may be used to specify channel-specific options.

</If>

<If lang="csharp">

`IO.Ably.ChannelOptions` may optionally be specified when instancing a [`Channel`](/docs/channels), and this may be used to specify channel-specific options.

</If>

<If lang="javascript,nodejs,java,objc,swift,csharp,go,flutter">

#### Properties

</If>
<If lang="java">

#### Members

</If>
<If lang="ruby">

#### Attributes

</If>

<If lang="javascript,nodejs,java,swift,objc,csharp">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,swift,objc">params</If><If lang="csharp">Params</If> | Optional [parameters](/docs/channels/options) which specify behaviour of the channel. | <If lang="java">`Map<String, String>`</If><If lang="javascript,nodejs,objc,csharp,swift">`JSON Object`</If> |
| <If lang="javascript,nodejs,java,swift,objc">cipher</If><If lang="csharp">CipherParams</If> | Requests encryption for this channel when not null, and specifies encryption-related parameters (such as algorithm, chaining mode, key length and key). See [an example](/docs/api/realtime-sdk/encryption#getting-started) | [`CipherParams`](/docs/api/realtime-sdk/encryption#cipher-params)<If lang="javascript,nodejs"> or an options object containing at a minimum a `key`</If><If lang="java"> or a `Param[]` list containing at a minimum a `key`</If><If lang="ruby"> or an options hash containing at a minimum a `key`</If> |

</If>
<If lang="ruby">

| Property | Description | Type |
|----------|-------------|------|
| :cipher | Requests encryption for this channel when not null, and specifies encryption-related parameters (such as algorithm, chaining mode, key length and key). See [an example](/docs/channels/options/encryption) | [CipherParams](/docs/api/realtime-sdk/encryption) or an options hash containing at a minimum a `key` |

</If>

<If lang="go">

| Property | Description | Type |
|----------|-------------|------|
| CipherParams | Requests encryption for this channel when not null, and specifies encryption-related parameters (such as algorithm, chaining mode, key length and key). See [an example](/docs/channels/options/encryption) | [CipherParams](/docs/api/realtime-sdk/encryption) |

</If>

<If lang="flutter">

Request encryption for this channel when not null, and specifies encryption-related parameters (such as algorithm, chaining mode, key length and key). See [an example](/docs/channels/options/encryption) <br />Type: [CipherParams](/docs/api/realtime-sdk/encryption)

</If>

<If lang="java">

#### Static methods

##### withCipherKey <a id="with-cipher-key" />

`static ChannelOptions.withCipherKey(Byte[] or String key)`

A helper method to generate a `ChannelOptions` for the simple case where you only specify a key.

##### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| key | A binary `Byte[]` array or a base64-encoded `String`. | `Byte[]` or `String` |

##### Returns

On success, the method returns a complete `ChannelOptions` object. Failure will raise an [`AblyException`](/docs/api/realtime-sdk/types#ably-exception).

</If>

### <If lang="javascript,nodejs,flutter,go">ChannelState</If><If lang="objc,swift">ARTRealtimeChannelState</If><If lang="ruby">Channel::STATE Enum</If><If lang="java">io.ably.lib.realtime.ChannelState Enum</If><If lang="csharp">IO.Ably.Realtime.ChannelState Enum</If> <a id="channel-state" />

<If lang="javascript,nodejs">

`ChannelState` is a String with a value matching any of the [Realtime Channel states](/docs/channels/states).

<Code>
```javascript
var ChannelStates = [
  'initialized',
  'attaching',
  'attached',
  'detaching',
  'detached',
  'failed',
  'suspended'
]
```
</Code>

</If>

<If lang="java">

`io.ably.lib.realtime.ChannelState` is an enum representing all the [Realtime Channel states](/docs/channels/states).

<Code>
```java
public enum ChannelState {
  initialized,  // 0
  attaching,    // 1
  attached,     // 2
  detaching,    // 3
  detached,     // 4
  failed        // 5
}
```
</Code>

</If>

<If lang="csharp">

`IO.Ably.Realtime.ChannelState` is an enum representing all the [Realtime Channel states](/docs/channels/states).

<Code>
```csharp
public enum ChannelState
{
    Initialized = 0,
    Attaching = 1,
    Attached = 2,
    Detaching= 3,
    Detached = 4,
    Failed = 5
};
```
</Code>

</If>

<If lang="ruby">

`Ably::Realtime::Channel::STATE` is an enum-like value representing all the [Realtime Channel states](/docs/channels/states). `STATE` can be represented interchangeably as either symbols or constants.

#### Symbol states

<Code>
```ruby
:initialized # => 0
:attaching # =>   1
:attached # =>    2
:detaching # =>   3
:detached # =>    4
:failed # =>      5
```
</Code>

#### Constant states

<Code>
```ruby
Channel::STATE.Initialized # => 0
Channel::STATE.Attaching # =>   1
Channel::STATE.Attached # =>    2
Channel::STATE.Detaching # =>   3
Channel::STATE.Detached # =>    4
Channel::STATE.Failed # =>      5
```
</Code>

#### Example usage

<Code>
```ruby
# Example with symbols
channel.on(:attached) { ... }

# Example with constants
channel.on(Ably::Realtime::Channel::STATE.Attached) { ... }

# Interchangeable
Ably::Realtime::Channel::STATE.Attached == :attached # => true
```
</Code>

</If>

<If lang="objc,swift">

`ARTRealtimeChannelState` is an enum representing all the [Realtime Channel states](/docs/channels/states).

<If lang="objc">

<Code>
```objc
typedef NS_ENUM(NSUInteger, ARTRealtimeChannelState) {
    ARTRealtimeChannelInitialized,
    ARTRealtimeChannelAttaching,
    ARTRealtimeChannelAttached,
    ARTRealtimeChannelDetaching,
    ARTRealtimeChannelDetached,
    ARTRealtimeChannelFailed
};
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
public enum ARTRealtimeChannelState : UInt {
    case Initialized
    case Attaching
    case Attached
    case Detaching
    case Detached
    case Failed
}
```
</Code>

</If>
</If>

<If lang="go">

`ChannelState` is a string representing all the [channel states](/docs/channels/states)

<Code>
```go
const (
  StateChanInitialized = 256
  StateChanConnecting = 512
  StateChanConnected = 1024
  StateChanDisconnected = 2048
  StateChanSuspended = 4096
  StateChanClosing = 8192
  StateChanClosed = 16384
  StateChanFailed = 32768
)
```
</Code>

</If>

<If lang="flutter">

`ably.ChannelState` is an enum representing all the [Realtime Channel states](/docs/channels/states).

<Code>
```flutter
enum ChannelState {
  initialized,
  attaching,
  attached,
  detaching,
  detached,
  suspended,
  failed
}
```
</Code>

</If>

### <If lang="javascript,nodejs,flutter,go">ChannelEvent</If><If lang="objc,swift">ARTChannelEvent</If><If lang="ruby">Channel::EVENT Enum</If><If lang="java">io.ably.lib.realtime.ChannelEvent Enum</If><If lang="csharp">IO.Ably.Realtime.ChannelEvent Enum</If> <a id="channel-event" />

<If lang="javascript,nodejs">

`ChannelEvent` is a String that can be emitted as an event on the `Channel` object; either a [ChannelState](/docs/channels/states) or an `update` event.

<Code>
```javascript
var ChannelEvents = [
  'initialized',
  'attaching',
  'attached',
  'detaching',
  'detached',
  'failed',
  'suspended',
  'update'
]
```
</Code>

</If>

<If lang="java">

`io.ably.lib.realtime.ChannelEvent` is an enum representing all the events that can be emitted be the `Channel`; either a [ChannelState](/docs/channels/states) or an `update` event.

<Code>
```java
public enum ChannelEvent {
  initialized,  // 0
  attaching,    // 1
  attached,     // 2
  detaching,    // 3
  detached,     // 4
  failed        // 5
  update        // 6
}
```
</Code>

</If>

<If lang="csharp">

`IO.Ably.Realtime.ChannelEvent` is an enum representing all the events that can be emitted be the `Channel`; either a [ChannelState](/docs/channels/states) or an `Update` event.

<Code>
```csharp
public enum ChannelEvent
{
    Initialized = 0,
    Attaching = 1,
    Attached = 2,
    Detaching= 3,
    Detached = 4,
    Failed = 5,
    Update = 6
};
```
</Code>

</If>

<If lang="ruby">

`Ably::Realtime::Channel::EVENT` is an enum-like value representing all the events that can be emitted be the `Channel`; either a [ChannelState](/docs/channels/states) or an `:update` event. `EVENT` can be represented interchangeably as either symbols or constants.

#### Symbol states

<Code>
```ruby
:initialized # => 0
:attaching # =>   1
:attached # =>    2
:detaching # =>   3
:detached # =>    4
:failed # =>      5
:update # =>      6
```
</Code>

#### Constant states

<Code>
```ruby
Channel::EVENT.Initialized # => 0
Channel::EVENT.Attaching # =>   1
Channel::EVENT.Attached # =>    2
Channel::EVENT.Detaching # =>   3
Channel::EVENT.Detached # =>    4
Channel::EVENT.Failed # =>      5
Channel::EVENT.Update # =>      6
```
</Code>

</If>

<If lang="objc,swift">

`ARTChannelEvent` is the enum emitted as the event in `ARTRealtimeChannel.on`; either a [ChannelState](/docs/api/realtime-sdk/channels#channel-state) or an `Update` event.

<If lang="objc">

<Code>
```objc
typedef NS_ENUM(NSUInteger, ARTChannelEvent) {
    ARTChannelEventInitialized,
    ARTChannelEventAttaching,
    ARTChannelEventAttached,
    ARTChannelEventDetaching,
    ARTChannelEventDetached,
    ARTChannelEventFailed,
    ARTChannelEventUpdate
};
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
enum ARTChannelEvent : UInt {
    case Initialized
    case Attaching
    case Attached
    case Detaching
    case Detached
    case Failed
    case Update
}
```
</Code>

</If>
</If>

<If lang="go">

`ChannelEvent` is a String that can be emitted as an event on the `Channel` object; either a [ChannelState](/docs/channels/states) or an `update` event.

<Code>
```go
const (
  StateChanInitialized = 256
  StateChanConnecting = 512
  StateChanConnected = 1024
  StateChanDisconnected = 2048
  StateChanSuspended = 4096
  StateChanClosing = 8192
  StateChanClosed = 16384
  StateChanFailed = 32768
)
```
</Code>

</If>

<If lang="flutter">

`ably.ChannelEvent` is an enum representing all the events that can be emitted be the `Channel`; either a [ChannelState](/docs/channels/states) or an `update` event.

<Code>
```flutter
enum ChannelEvent {
  initialized,
  attaching,
  attached,
  detaching,
  detached,
  suspended,
  failed,
  update
}
```
</Code>

</If>

### <If lang="javascript,nodejs,flutter,go">ChannelStateChange Object</If><If lang="objc,swift">ARTRealtimeChannelStateChange</If><If lang="ruby">ChannelStateChange</If><If lang="java">io.ably.lib.realtime.ConnectionStateListener.ChannelStateChange</If><If lang="csharp">IO.Ably.Realtime.ChannelStateChange</If> <a id="channel-state-change" />

A <If lang="ruby">`Ably::Models::ChannelStateChange`</If><If lang="javascript,nodejs,java,flutter,go">`ChannelStateChange`</If><If lang="objc,swift">`ARTRealtimeChannelStateChange`</If> is a type encapsulating state change information emitted by the [Channel](/docs/channels) object. See [Channel#on](/docs/api/realtime-sdk/channels#on) to register a listener for one or more events.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">current</If><If lang="csharp,go">Current</If> | The new current state | <If lang="javascript,nodejs,java,objc,swift,flutter">[`ChannelState`](/docs/api/realtime-sdk/types#channel-state)</If><If lang="ruby">[`Channel::STATE`](/docs/api/realtime-sdk/types#channel-state)</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">previous</If><If lang="csharp,go">Previous</If> | The previous state. (for the `update` event, this will be equal to the `current` state) | <If lang="javascript,nodejs,java,objc,swift,flutter">[`ChannelState`](/docs/api/realtime-sdk/types#channel-state)</If><If lang="ruby">[`Channel::STATE`](/docs/api/realtime-sdk/types#channel-state)</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">event</If><If lang="csharp,go">Event</If> | The event that triggered this state change | <If lang="javascript,nodejs,java,objc,swift,flutter">[`ChannelEvent`](/docs/api/realtime-sdk/types#channel-event)</If><If lang="ruby">[`Channel::EVENT`](/docs/api/realtime-sdk/types#channel-event)</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">reason</If><If lang="csharp,go">Reason</If> | An [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) containing any information relating to the transition | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">resumed</If><If lang="csharp,go">Resumed</If> | A boolean indicated whether message continuity on this channel is preserved, see [Nonfatal channel errors](/docs/channels#non-fatal-errors) for more info. | `Boolean` |

<If lang="java">

### io.ably.lib.realtime.ChannelStateListener <a id="channel-state-listener" />

A `io.ably.lib.realtime.ChannelStateListener` is an interface allowing a client to be notified of [channel state changes](/docs/api/realtime-sdk/types#channel-state-change) for a [Channel](/docs/channels)

<Code>
```java
public interface ChannelStateListener {
  // Called when the channel state changes
  public void onChannelStateChanged(ChannelStateChange stateChange, ErrorInfo reason);
}
```
</Code>

</If>

### <If lang="javascript,nodejs,flutter,go">CipherParams</If><If lang="objc,swift">ARTCipherParams</If><If lang="ruby">CipherParams Hash</If><If lang="java">io.ably.lib.util.Crypto.CipherParams</If><If lang="csharp">IO.Ably.CipherParams</If> <a id="cipher-params" />

A `CipherParams` contains configuration options for a channel cipher, including algorithm, mode, key length and key. Ably client libraries currently support AES with CBC, PKCS#7 with a default key length of 256 bits. All implementations also support AES128.

Individual client libraries may support either instancing a `CipherParams` directly, using <If lang="javascript,nodejs,java,objc,swift,flutter">[`Crypto.getDefaultParams()`](/docs/api/realtime-sdk/encryption#get-default-params)</If><If lang="csharp">[`Crypto.GetDefaultParams()`](/docs/api/realtime-sdk/encryption#get-default-params)</If><If lang="ruby">[`Crypto.get_default_params()`](/docs/api/realtime-sdk/encryption#get-default-params)</If>, or generating one automatically when initializing a channel, as in [this example](/docs/channels/options/encryption).

#### <If lang="javascript,nodejs,objc,swift,csharp,ruby,flutter,go">Properties</If><If lang="java">Members</If>

<If lang="javascript,nodejs,objc,swift,csharp,ruby">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,objc,swift,flutter">key</If><If lang="csharp">Key</If><If lang="ruby">:key</If> | A binary (<If lang="csharp">`byte[]`</If><If lang="javascript">`ArrayBuffer` or `Uint8Array`</If><If lang="nodejs">`Buffer`</If><If lang="ruby">byte array</If><If lang="objc,swift">`NSData`</If>) or base64-encoded <If lang="objc">`NS`</If>`String` containing the secret key used for encryption and decryption | Binary or `String` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">algorithm</If><If lang="ruby">:algorithm</If><If lang="csharp,go">Algorithm</If> | _AES_ The name of the algorithm in the default system provider, or the lower-cased version of it; eg "aes" or "AES" | `String` |
| <If lang="ruby">:key_length</If><If lang="javascript,nodejs,java,objc,swift,flutter">keyLength</If><If lang="csharp,go">KeyLength</If> | _256_ The key length in bits of the cipher, either 128 or 256 | `Integer` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">mode</If><If lang="ruby">:mode</If><If lang="csharp,go">Mode</If> | _CBC_ The cipher mode | <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">`String`</If><If lang="csharp">`CipherMode`</If> |

</If>
<If lang="flutter">

| Property | Description | Type |
|----------|-------------|------|
| algorithm | _AES_ The name of the algorithm in the default system provider, or the lower-cased version of it; eg "aes" or "AES" | `String` |
| keyLength | _256_ The key length in bits of the cipher, either 128 or 256 | `Integer` |
| mode | _CBC_ The cipher mode | `String` |

</If>
<If lang="java">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,flutter">algorithm</If><If lang="ruby">:algorithm</If><If lang="csharp,go">Algorithm</If> | _AES_ The name of the algorithm in the default system provider, or the lower-cased version of it; eg "aes" or "AES" | `String` |
| <If lang="ruby">:key_length</If><If lang="javascript,nodejs,java,objc,swift,flutter">keyLength</If><If lang="csharp,go">KeyLength</If> | _256_ The key length in bits of the cipher, either 128 or 256 | `Integer` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter">mode</If><If lang="csharp,go">Mode</If> | _CBC_ The cipher mode | <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">`String`</If><If lang="csharp">`CipherMode`</If> |
| keySpec | A `KeySpec` for the cipher key | `SecretKeySpec` |

</If>
<If lang="go">

| Property | Description | Type |
|----------|-------------|------|
| Algorithm | _AES_ The name of the algorithm in the default system provider, or the lower-cased version of it; eg "aes" or "AES" | `String` |
| KeyLength | _256_ The key length in bits of the cipher, either 128 or 256 | `Integer` |
| Mode | _CBC_ The cipher mode | `String` |

</If>

<If lang="java">

### io.ably.lib.realtime.CompletionListener <a id="completion-listener" />

A `io.ably.lib.realtime.CompletionListener` is an interface allowing a client to be notified of the outcome of an asynchronous operation.

<Code>
```java
public interface CompletionListener {
  // Called when the associated operation completes successfully,
  public void onSuccess();

  // Called when the associated operation completes with an error.
  public void onError(ErrorInfo reason);
}
```
</Code>

</If>

### <If lang="javascript,nodejs,flutter,go">ConnectionState</If><If lang="objc,swift">ARTRealtimeConnectionState</If><If lang="ruby">Connection::STATE</If><If lang="java">io.ably.lib.realtime.ConnectionState</If><If lang="csharp">IO.Ably.Realtime.ConnectionState</If> <a id="connection-state" />

<If lang="javascript,nodejs">

`ConnectionState` is a String with a value matching any of the [Realtime Connection states](/docs/connect/states).

<Code>
```javascript
var ConnectionStates = [
  'initialized',
  'connecting',
  'connected',
  'disconnected',
  'suspended',
  'closing',
  'closed',
  'failed'
]
```
</Code>

</If>

<If lang="java">

`io.ably.lib.realtime.ConnectionState` is an enum representing all the [Realtime Connection states](/docs/connect/states).

<Code>
```java
public enum ConnectionState {
  initialized,   // 0
  connecting,    // 1
  connected,     // 2
  disconnected,  // 3
  suspended,     // 4
  closing,       // 5
  closed,        // 6
  failed         // 7
}
```
</Code>

</If>

<If lang="csharp">

`IO.Ably.Realtime.ConnectionState` is an enum representing all the [Realtime Connection states](/docs/connect/states).

<Code>
```csharp
public enum ConnectionState
{
    Initialized,    //0
    Connecting,     //1
    Connected,      //2
    Disconnected,   //3
    Suspended,      //4
    Closing,        //5
    Closed,         //6
    Failed          //7
};
```
</Code>

</If>

<If lang="ruby">

`Ably::Realtime::Connection::STATE` is an enum-like value representing all the [Realtime Connection states](/docs/connect/states). `STATE` can be represented interchangeably as either symbols or constants.

#### Symbol states

<Code>
```ruby
:initialized # =>  0
:connecting # =>   1
:connected # =>    2
:disconnected # => 3
:suspended # =>    4
:closing # =>      5
:closed # =>       6
:failed # =>       7
```
</Code>

#### Constant states

<Code>
```ruby
Connection::STATE.Initialized # =>  0
Connection::STATE.Connecting # =>   1
Connection::STATE.Connected # =>    2
Connection::STATE.Disconnected # => 3
Connection::STATE.Suspended # =>    4
Connection::STATE.Closing # =>      5
Connection::STATE.Closed # =>       6
Connection::STATE.Failed # =>       7
```
</Code>

#### Example usage

<Code>
```ruby
# Example with symbols
client.connection.on(:connected) { ... }

# Example with constants
client.connection.on(Ably::Realtime::Connection::STATE.Connected) { ... }

# Interchangeable
Ably::Realtime::Connection::STATE.Connected == :connected # => true
```
</Code>

</If>

<If lang="objc,swift">

`ARTRealtimeConnectionState` is an enum representing all the [Realtime Connection states](/docs/connect/states).

<If lang="objc">

<Code>
```objc
typedef NS_ENUM(NSUInteger, ARTRealtimeConnectionState) {
    ARTRealtimeInitialized,
    ARTRealtimeConnecting,
    ARTRealtimeConnected,
    ARTRealtimeDisconnected,
    ARTRealtimeSuspended,
    ARTRealtimeClosing,
    ARTRealtimeClosed,
    ARTRealtimeFailed
};
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
public enum ARTRealtimeConnectionState : UInt {
    case Initialized
    case Connecting
    case Connected
    case Disconnected
    case Suspended
    case Closing
    case Closed
    case Failed
}
```
</Code>

</If>
</If>

<If lang="go">

`ConnectionState` is an enum representing all the [Realtime Connection states](/docs/connect/states).

<Code>
```go
const (
  StateConnInitialized = 1
  StateConnConnecting = 2
  StateConnConnected = 4
  StateConnDisconnected = 8
  StateConnSuspended = 16
  StateConnClosing = 32
  StateConnClosed = 64
  StateConnFailed = 128
)
```
</Code>

</If>

<If lang="flutter">

`ably.ConnectionState` is an enum representing all the [Realtime Connection states](/docs/connect/states).

<Code>
```flutter
enum ConnectionState {
  initialized,
  connecting,
  connected,
  disconnected,
  suspended,
  closing,
  closed,
  failed
}
```
</Code>

</If>

### <If lang="javascript,nodejs,flutter,go">ConnectionEvent</If><If lang="objc,swift">ARTRealtimeConnectionEvent</If><If lang="ruby">Connection::EVENT Enum</If><If lang="java">io.ably.lib.realtime.ConnectionEvent Enum</If><If lang="csharp">IO.Ably.Realtime.ConnectionEvent Enum</If> <a id="connection-event" />

<If lang="javascript,nodejs">

`ConnectionEvent` is a String that can be emitted as an event on the `Connection` object; either a [Realtime Connection state](/docs/connect/states) or an `update` event.

<Code>
```javascript
var ConnectionEvents = [
  'initialized',
  'connecting',
  'connected',
  'disconnected',
  'suspended',
  'closing',
  'closed',
  'failed',
  'update'
]
```
</Code>

</If>

<If lang="java">

`io.ably.lib.realtime.ConnectionEvent` is an enum representing all the events that can be emitted be the `Connection`; either a [Realtime Connection state](/docs/connect/states) or an `update` event.

<Code>
```java
public enum ConnectionEvent {
  initialized,   // 0
  connecting,    // 1
  connected,     // 2
  disconnected,  // 3
  suspended,     // 4
  closing,       // 5
  closed,        // 6
  failed,        // 7
  update         // 8
}
```
</Code>

</If>

<If lang="csharp">

`IO.Ably.Realtime.ConnectionEvent` is an enum representing all the events that can be emitted be the `Connection`; either a [Realtime Connection state](/docs/connect/states) or an `Update` event.

<Code>
```csharp
public enum ConnectionState
{
    Initialized,    //0
    Connecting,     //1
    Connected,      //2
    Disconnected,   //3
    Suspended,      //4
    Closing,        //5
    Closed,         //6
    Failed,         //7
    update          //8
};
```
</Code>

</If>

<If lang="ruby">

`Ably::Realtime::Connection::EVENT` is an enum-like value representing all the events that can be emitted be the `Connection`; either a [Realtime Connection state](/docs/connect/states) or an `:update` event. `EVENT` can be represented interchangeably as either symbols or constants.

#### Symbol states

<Code>
```ruby
:initialized # =>  0
:connecting # =>   1
:connected # =>    2
:disconnected # => 3
:suspended # =>    4
:closing # =>      5
:closed # =>       6
:failed # =>       7
:update # =>       8
```
</Code>

#### Constant states

<Code>
```ruby
Connection::EVENT.Initialized # =>  0
Connection::EVENT.Connecting # =>   1
Connection::EVENT.Connected # =>    2
Connection::EVENT.Disconnected # => 3
Connection::EVENT.Suspended # =>    4
Connection::EVENT.Closing # =>      5
Connection::EVENT.Closed # =>       6
Connection::EVENT.Failed # =>       7
Connection::EVENT.Update # =>       8
```
</Code>

#### Example usage

<Code>
```ruby
# Example with symbols
client.connection.on(:connected) { ... }

# Example with constants
client.connection.on(Ably::Realtime::Connection::STATE.Connected) { ... }

# Interchangeable
Ably::Realtime::Connection::STATE.Connected == :connected # => true
```
</Code>

</If>

<If lang="objc,swift">

`ARTRealtimeConnectionEvent` is an enum representing all the events that can be emitted be the `Connection`; either a [Realtime Connection state](/docs/connect/states) or an `Update` event.

<If lang="objc">

<Code>
```objc
typedef NS_ENUM(NSUInteger, ARTRealtimeConnectionEvent) {
    ARTRealtimeConnectionEventInitialized,
    ARTRealtimeConnectionEventConnecting,
    ARTRealtimeConnectionEventConnected,
    ARTRealtimeConnectionEventDisconnected,
    ARTRealtimeConnectionEventSuspended,
    ARTRealtimeConnectionEventClosing,
    ARTRealtimeConnectionEventClosed,
    ARTRealtimeConnectionEventFailed,
    ARTRealtimeConnectionEventUpdate
};
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
public enum ARTRealtimeConnectionEvent : UInt {
    case Initialized
    case Connecting
    case Connected
    case Disconnected
    case Suspended
    case Closing
    case Closed
    case Failed
    case Update
}
```
</Code>

</If>
</If>

<If lang="go">

`ConnectionEvent` is a String that can be emitted as an event on the `Connection` object; either a [Realtime Connection state](/docs/connect/states) or an `update` event.

<Code>
```go
const (
  StateConnInitialized = 1
  StateConnConnecting = 2
  StateConnConnected = 4
  StateConnDisconnected = 8
  StateConnSuspended = 16
  StateConnClosing = 32
  StateConnClosed = 64
  StateConnFailed = 128
)
```
</Code>

</If>

<If lang="flutter">

`ably.ConnectionEvent` is an enum representing all the events that can be emitted be the `Connection`; either a [Realtime Connection state](/docs/connect/states) or an `update` event.

<Code>
```flutter
enum ConnectionEvent {
  initialized,
  connecting,
  connected,
  disconnected,
  suspended,
  closing,
  closed,
  failed,
  update
}
```
</Code>

</If>


<If lang="java">

### io.ably.lib.realtime.ConnectionStateListener <a id="connection-state-listener" />

A `io.ably.lib.realtime.ConnectionStateListener` is an interface allowing a client to be notified of connection state change. See [Connection#on](/docs/api/realtime-sdk/connection#on) to register a listener for one or more events.

<Code>
```java
public interface ConnectionStateListener {
  // Called when the connection state changes
  public void onConnectionStateChanged(ConnectionStateListener.ConnectionStateChange state);
}
```
</Code>

</If>

### <If lang="javascript,nodejs,flutter,go">ConnectionStateChange Object</If><If lang="objc,swift">ARTConnectionStateChange</If><If lang="ruby">ConnectionStateChange</If><If lang="java">io.ably.lib.realtime.ConnectionStateListener.ConnectionStateChange</If><If lang="csharp">IO.Ably.Realtime.ConnectionStateChange</If> <a id="connection-state-change" />

A <If lang="java">`io.ably.lib.realtime.ConnectionStateListener.ConnectionStateChange`</If><If lang="ruby">`Ably::Models::ConnectionStateChange`</If><If lang="objc,swift">`ARTConnectionStateChange`</If><If lang="csharp">`IO.Ably.Realtime.ConnectionStateChange`</If><If lang="javascript,nodejs,flutter">`ConnectionStateChange`</If> is a type encapsulating state change information emitted by the [Connection](/docs/api/realtime-sdk/connection) object. See [Connection#on](/docs/api/realtime-sdk/connection#on) to register a listener for one or more events.

#### <If lang="javascript,nodejs,objc,swift,csharp,flutter">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">current</If><If lang="csharp">Current</If> | The new state | <If lang="javascript,nodejs,flutter,go">[State `String`](/docs/api/realtime-sdk/types#connection-state)</If><If lang="ruby">[`Connection::STATE`](/docs/api/realtime-sdk/types#connection-state)</If><If lang="java,csharp">[`ConnectionState`](/docs/api/realtime-sdk/types#connection-state)</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">previous</If><If lang="csharp">Previous</If> | The previous state. (for the `update` event, this will be equal to the `current` state) | <If lang="javascript,nodejs,flutter,go">[State `String`](/docs/api/realtime-sdk/types#connection-state)</If><If lang="ruby">[`Connection::STATE`](/docs/api/realtime-sdk/types#connection-state)</If><If lang="java,csharp">[`ConnectionState`](/docs/api/realtime-sdk/types#connection-state)</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">event</If><If lang="csharp">Event</If> | The event that triggered this state change | <If lang="javascript,nodejs,java,objc,swift,flutter,go">[`ConnectionEvent`](/docs/api/realtime-sdk/types#connection-event)</If><If lang="ruby">[`Connection::EVENT`](/docs/api/realtime-sdk/types#connection-event)</If> |
| <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">reason</If><If lang="csharp">Reason</If> | An [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) containing any information relating to the transition | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) |
| <If lang="javascript,nodejs,java,objc,swift,flutter,go">retryIn</If><If lang="ruby">retry_in</If><If lang="csharp">RetryIn</If> | Duration upon which the library will retry a connection where applicable, as <If lang="javascript,nodejs,java,objc,swift,flutter,go">milliseconds</If><If lang="ruby">seconds</If><If lang="csharp">a `Timespan`</If> | <If lang="javascript,nodejs,ruby,objc,swift,flutter,go">`Integer`</If><If lang="csharp">`Timespan`</If><If lang="java">`Long Integer`</If> |

<If lang="csharp">

### IO.Ably.PaginatedRequestParams <a id="paginated-request-params" />

`HistoryRequestParams` is a type that encapsulates the parameters for a history queries. For example usage see [`Channel#History`](/docs/api/realtime-sdk/history#channel-history).

#### Members

| Property | Description | Type |
|----------|-------------|------|
| Start | _null_ The start of the queried interval | `DateTimeOffset` |
| End | _null_ The end of the queried interval | `DateTimeOffset` |
| Limit | _null_ By default it is null. Limits the number of items returned by history or stats | `Integer` |
| Direction | _Backwards_ Enum which is either `Forwards` or `Backwards` | `Direction` enum |
| ExtraParameters | Optionally any extra query parameters that may be passed to the query. This is mainly used internally by the library to manage paging. | `Dictionary<string, string>` |

</If>

<If lang="java">

### io.ably.lib.realtime.Channel.MessageListener <a id="message-listener" />

A `io.ably.lib.realtime.Channel.MessageListener` is an interface allowing a client to be notified when messages are received on a channel using a [channel subscription](/docs/pub-sub#subscribe).

<Code>
```java
public interface MessageListener {
  // Called when one or more messages are received
  public void onMessage(Message message);
}
```
</Code>

</If>

<If lang="javascript,nodejs">

### LastConnectionDetails <a id="last-connection-details" />

A `LastConnectionDetails` object provides details on the last connection in a browser environment persisted when the `window beforeunload` fired. This object is provided to the callback specified in the `recover` attribute of [`ClientOptions`](/docs/api/realtime-sdk/types#client-options). The callback in turn instructs the client library whether the connection should be recovered or not. See [connection state recovery](/docs/connect/states) for more information.

Please note that as [`sessionStorage`](https://www.w3.org/TR/webstorage/) is used to persist the `LastConnectionDetails` between page reloads, it is only available for pages in the same origin and top-level browsing context.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| recoveryKey | An opaque string obtained from the [recoveryKey](/docs/api/realtime-sdk/connection#recovery-key) attribute of the [Connection object](/docs/api/realtime-sdk/connection) before the page was unloaded. This property is used by the library to recover the connection | `String` |
| disconnectedAt | The time at which the previous library was abruptly disconnected before the page was unloaded. This is represented as milliseconds since epoch | `Integer` |
| location | A clone of [`location`](https://www.w3.org/TR/html5/browsers.html#the-location-interface) object of the previous page's `document` object before the page was unloaded. A common use case for this attribute is to ensure that the previous page URL is the same as the current URL before allowing the connection to be recovered. For example, you may want the connection to be recovered only for page reloads, but not when a user navigates to a different page | `String` |
| clientId | The [`clientId`](/docs/api/realtime-sdk/authentication/#client-id) of the [client's Auth object](/docs/api/realtime-sdk/authentication) before the page was unloaded. A common use case for this attribute is to ensure that the current logged in user's `clientId` matches the previous connection's `clientId` before allowing the connection to be recovered. Ably prohibits changing a `clientId` for an existing connection, so any mismatch in `clientId` during a recover will result in the connection moving to the failed state | `String` |

</If>

<If lang="java">

### io.ably.lib.realtime.Presence.PresenceListener <a id="presence-listener" />

A `io.ably.lib.realtime.Channel.MessageListener` is an interface allowing a client to be notified when messages are received on a channel using a [channel subscription](/docs/pub-sub#subscribe).

<Code>
```java
public interface MessageListener {
  // Called when one or more messages are received
  public void onMessage(Message message);
}
```
</Code>

</If>

<If lang="ruby">

### Ably::Util::SafeDeferrable <a id="deferrable" />

The `SafeDeferrable` class provides an [EventMachine](https://github.com/eventmachine/eventmachine) compatible [`Deferrable`](https://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable).

A `SafeDeferrable` ensures that any exceptions in callbacks provided by developers will not break the client library and stop further execution of code.

#### Methods

##### callback <a id="callback" />

`callback(&block)`

Specify a block to be executed if and when the `Deferrable` object receives a status of `:succeeded`. See the [EventMachine callback documentation](https://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#callback-instance_method)

##### errback <a id="errback" />

`errback(&block)`

Specify a block to be executed if and when the `Deferrable` object receives a status of `:failed`. See the [EventMachine errback documentation](https://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#errback-instance_method)

##### fail <a id="fail" />

`fail(*args)`

Mark the `Deferrable` as failed and trigger all callbacks. See the [EventMachine fail documentation](https://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#fail-instance_method)

##### succeed <a id="succeed" />

`succeed(*args)`

Mark the `Deferrable` as succeeded and trigger all callbacks. See the [EventMachine succeed documentation](https://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#succeed-instance_method)

</If>

<If lang="csharp">

### IO.Ably.StatsRequestParams <a id="stats-request-params" />

`HistoryRequestParams` is a type that encapsulates the parameters for a history queries. For example usage see [`Channel#History`](/docs/api/realtime-sdk/history#channel-history).

#### Members

| Property | Description | Type |
|----------|-------------|------|
| Start | _null_ The start of the queried interval | `DateTimeOffset` |
| End | _null_ The end of the queried interval | `DateTimeOffset` |
| Limit | _null_ By default it is null. Limits the number of items returned by history or stats | `Integer` |
| Direction | _Backwards_ Enum which is either `Forwards` or `Backwards` | `Direction` enum |
| ExtraParameters | Optionally any extra query parameters that may be passed to the query. This is mainly used internally by the library to manage paging. | `Dictionary<string, string>` |

</If>

### <If lang="javascript,nodejs,flutter,go">TokenParams Object</If><If lang="objc,swift">ARTTokenParams</If><If lang="ruby">TokenParams Hash</If><If lang="java">io.ably.lib.rest.Auth.TokenParams</If><If lang="csharp">IO.Ably.TokenParams</If> <a id="token-params" />

<If lang="javascript,nodejs">

`TokenParams` is a plain JavaScript object and is used in the parameters of [token authentication](/docs/auth/token) requests, corresponding to the desired attributes of the [Ably Token](/docs/api/realtime-sdk/authentication#token-details). The following attributes can be defined on the object:

</If>

<If lang="ruby">

`TokenParams` is a Hash object and is used in the parameters of [token authentication](/docs/auth/token) requests, corresponding to the desired attributes of the [Ably Token](/docs/api/realtime-sdk/authentication#token-details). The following key symbol values can be added to the Hash:

</If>

<If lang="java,csharp">

`TokenParams` is used in the parameters of [token authentication](/docs/auth/token) requests, corresponding to the desired attributes of the [Ably Token](/docs/api/realtime-sdk/authentication#token-details).

</If>

<If lang="objc,swift">

`ARTTokenParams` is used in the parameters of [token authentication](/docs/auth/token) requests, corresponding to the desired attributes of the [Ably Token](/docs/api/realtime-sdk/authentication#token-details).

</If>

#### <If lang="javascript,nodejs,objc,swift,csharp,flutter">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If>

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,flutter">capability</If><If lang="csharp,go">Capability</If><If lang="ruby">:capability</If> | JSON stringified capability of the [Ably Token](/docs/api/realtime-sdk/authentication#token-details). If the [Ably Token](/docs/api/realtime-sdk/authentication#token-details) request is successful, the capability of the returned [Ably Token](/docs/api/realtime-sdk/authentication#token-details) will be the intersection of this capability with the capability of the issuing key. [Find our more about how to use capabilities to manage access privileges for clients](/docs/auth/capabilities). | <If lang="javascript,nodejs,java,objc,swift,ruby,flutter,go">`String`</If><If lang="csharp">`Capability`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">clientId</If><If lang="csharp,go">ClientId</If><If lang="ruby">:client_id</If> | A client ID, used for identifying this client when publishing messages or for presence purposes. The <If lang="javascript,nodejs,java,objc,swift,flutter">`clientId`</If><If lang="ruby">`:client_id`</If><If lang="csharp,go">`ClientId`</If> can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a <If lang="javascript,nodejs,java,objc,swift,flutter">`clientId`</If><If lang="ruby">`:client_id`</If><If lang="csharp,go">`ClientId`</If> may also be implicit in a token used to instantiate the library; an error will be raised if a <If lang="javascript,nodejs,java,objc,swift,flutter">`clientId`</If><If lang="ruby">`:client_id`</If><If lang="csharp,go">`ClientId`</If> specified here conflicts with the <If lang="javascript,nodejs,java,objc,swift,flutter">`clientId`</If><If lang="ruby">`:client_id`</If><If lang="csharp,go">`ClientId`</If> implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">nonce</If><If lang="csharp,go">Nonce</If><If lang="ruby">:nonce</If> | An optional opaque nonce string of at least 16 characters to ensure uniqueness of this request. Any subsequent request using the same nonce will be rejected. | `String` |
| <If lang="javascript,nodejs,java,objc,swift,flutter">timestamp</If><If lang="csharp,go">Timestamp</If><If lang="ruby">:timestamp</If> | <If lang="javascript,nodejs,java,flutter">The timestamp (in milliseconds since the epoch)</If><If lang="ruby,objc,swift,csharp">The timestamp</If> of this request. `timestamp`, in conjunction with the `nonce`, is used to prevent requests for [Ably Token](/docs/api/realtime-sdk/authentication#token-details) from being replayed. | <If lang="javascript,nodejs,flutter">`Integer`</If><If lang="java">`Long Integer`</If><If lang="ruby">`Time`</If><If lang="objc,swift">`NSDate`</If><If lang="csharp">`DateTimeOffset`</If> |
| <If lang="javascript,nodejs,java,objc,swift,flutter">ttl</If><If lang="csharp,go">Ttl</If><If lang="ruby">:ttl</If> | _1 hour_ Requested time to live for the [Ably Token](/docs/api/realtime-sdk/authentication#token-details) being created <If lang="javascript,nodejs,java,flutter">in milliseconds</If><If lang="ruby">in seconds</If><If lang="objc,swift">as a `NSTimeInterval`</If><If lang="csharp,go">as a `TimeSpan`</If>. When omitted, the Ably REST API default of 60 minutes is applied by Ably | <If lang="javascript,nodejs,flutter">`Integer` (milliseconds)</If><If lang="ruby">`Integer` (seconds)</If><If lang="objc,swift">`NSTimeInterval`</If><If lang="java">`Long Integer`</If><If lang="csharp">`TimeSpan`</If> |

<If lang="javascript,nodejs">

### TokenRevocationTargetSpecifier <a id="token-revocation-target-specifier" />

`TokenRevocationTargetSpecifier`

A `TokenRevocationTargetSpecifier` describes which tokens should be affected by a token revocation request.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| type | The type of token revocation target specifier. Valid values include `clientId`, `revocationKey` and `channel` | `String` |
| value | The value of the token revocation target specifier | `String` |

### TokenRevocationOptions <a id="token-revocation-options" />

`TokenRevocationOptions`

A `TokenRevocationOptions` describes the additional options accepted by revoke tokens request.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| issuedBefore | An optional Unix timestamp in milliseconds where only tokens issued before this time are revoked. The default is the current time. Requests with an `issuedBefore` in the future, or more than an hour in the past, will be rejected | `Number` |
| allowReauthMargin | _false_ If true, permits a token renewal cycle to take place without needing established connections to be dropped, by postponing enforcement to 30 seconds in the future, and sending any existing connections a hint to obtain (and upgrade the connection to use) a new token. The default is `false`, meaning that the effect is near-immediate. | `Boolean` |

</If>
