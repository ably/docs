---
title: "Error 91000 - Unable to enter presence channel (no clientId)"
meta_description: "Information and troubleshooting for Ably error code 91000 - Unable to enter presence channel without a configured clientId"
meta_keywords: "Ably, error, error codes, 91000, presence, clientId, authentication, missing client ID"
---

{/* Generated by: ably-os errors document-error-codes */}
{/* Repository: https://github.com/ably/ably-os */}
{/* Command: ./bin/ably-os errors document-error-codes 91000 */}
{/* Generated: 2025-11-07T08-36-41-586Z */}
{/* Sources:
     - Analysis: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
*/}
{/* Key Approach: Document the client validation error that occurs when attempting presence operations without a configured clientId */}
{/* Citations: Complete source attribution with line numbers available at bottom of document */}

This error occurs when attempting to enter, update, or leave a presence channel without having a configured `clientId`.

| Error code | HTTP status code | Category | Retryable |
| ---------- | ---------------- | -------- | --------- |
| 91000 | 400 | Client error (presence) | No |

## Error messages

The following error messages can be returned with error code 91000:

| Message | Description |
| ------- | ----------- |
| unable to enter presence channel (no clientId) | The client attempted a presence operation without a configured `clientId`. |
| Invalid attempt to enter with no clientId | Java SDK message when attempting to enter presence without `clientId`. |
| Unable to enter create presence message without a client_id | Ruby SDK message when creating a presence message without `clientId`. |

## Impact

This error prevents presence operations from completing. It has no impact on:

- Regular message publishing and subscribing on channels.
- Existing presence members in the channel.
- Other authenticated operations that don't require presence.

This is a configuration error that will not be automatically retried. You must set a `clientId` before presence operations will succeed.

## Quick fixes

Try the following quick fixes to resolve the error:

- Set a `clientId` in your client options when initializing the SDK.
- Configure `clientId` via token authentication if using tokens.
- Ensure your JWT token includes a `clientId` claim if using JWT authentication.

## Troubleshooting

The following are common causes and how to resolve them for error 91000:

### Missing clientId in client options

| Error messages |
| -------------- |
| unable to enter presence channel (no clientId) |

This occurs when:

- Initializing the SDK without setting a `clientId`.
- Attempting to enter presence on an anonymous connection.
- Not providing `clientId` in any authentication method.

To resolve this:

- Set the `clientId` in your client options during initialization.
- Ensure each user has a unique, meaningful identifier.

{/* Source: Analysis finding from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-analysis.md lines 29-57 */}
{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 22-35 */}

<Code>
```javascript
// Wrong: No clientId configured
const ably = new Ably.Realtime({ key: 'your-api-key' });
await channel.presence.enter(); // Will fail with error 91000

// Correct: ClientId set in options
const ably = new Ably.Realtime({
  key: 'your-api-key',
  clientId: 'unique-user-id'
});
await channel.presence.enter(); // Will succeed
```
</Code>

### Missing clientId in token authentication

| Error messages |
| -------------- |
| unable to enter presence channel (no clientId) |

This occurs when:

- Requesting a token without specifying `clientId` in token params.
- The token doesn't include client identity information.
- Server-side token generation doesn't set `clientId`.

To resolve this:

- Include `clientId` when requesting tokens.
- Ensure your server-side token generation includes the `clientId`.

{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 31-35 */}

<Code>
```javascript
// Wrong: Token request without clientId
const token = await ably.auth.requestToken();

// Correct: Token request with clientId
const tokenParams = {
  clientId: 'unique-user-id'
};
const token = await ably.auth.requestToken(tokenParams);
```
</Code>

### Attempting presence operations on all methods (enter, update, leave)

| Error messages |
| -------------- |
| unable to enter presence channel (no clientId) |

This occurs when:

- Calling `presence.enter()` without a configured `clientId`.
- Calling `presence.update()` without a configured `clientId`.
- Calling `presence.leave()` without a configured `clientId`.

{/* Source: Analysis finding from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-analysis.md lines 25-57 showing Go SDK validates all three operations */}

To resolve this:

- Always configure `clientId` before any presence operations.
- Set `clientId` during SDK initialization or via authentication.
- Don't attempt presence operations with anonymous connections.

## Prevention

To prevent this error:

- Always set a `clientId` when your application needs presence features.
- Use meaningful, unique identifiers for each client (e.g., user IDs, usernames).
- Maintain consistency of `clientId` across reconnections and sessions.
- Validate that `clientId` is set before attempting presence operations.
- Use token authentication for secure `clientId` assignment from your server.

{/* Source: Knowledge best practices from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 58-63 */}

## Security considerations

When setting `clientId`:

- Don't use sensitive personal data as the `clientId` (it may be visible to other users).
- Use token authentication instead of basic auth to prevent `clientId` spoofing.
- Have your server validate and assign `clientId` values for better security.
- Ensure `clientId` uniqueness to prevent identity conflicts.

{/* Source: Security considerations from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 65-69 */}

## Related errors

The following errors are related to error 91000:

| Error code | Description |
| ---------- | ----------- |
| [40012 - Invalid clientId](/docs/platform/errors/codes/40012) | Occurs when the provided `clientId` is invalid or conflicts with authentication. |
| [91001 - Invalid channel state](/docs/platform/errors/codes/91001) | Related presence error when channel is in invalid state for presence operations. |
| [91003 - Presence member limit](/docs/platform/errors/codes/91003) | Occurs when presence member limit is exceeded on a channel. |
| [91004 - Auto re-enter failed](/docs/platform/errors/codes/91004) | Related error when automatic presence re-entry fails after reconnection. |

{/* Source: Related errors from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 71-74 */}

## Need further help?

Contact [Ably support](https://ably.com/support) if you're still experiencing issues after trying the steps listed above.

You'll need to provide:

- Your account ID and app ID.
- The full error message including the error code.
- Steps to reproduce the issue.
- Any relevant code snippets (without any sensitive credentials).
- The SDK and version you're using.

### Resources

The following resources provide further context or assistance with this error:

- [Presence documentation](https://ably.com/docs/realtime/presence)
- [Authentication guide](https://ably.com/docs/auth)
- [Identified clients](https://ably.com/docs/auth/identified-clients)
- [Token authentication](https://ably.com/docs/auth/token)

{/* =============================================== */}
{/* INTERNAL DOCUMENTATION (NOT RENDERED) */}
{/* =============================================== */}

{/* SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md (specific guidance for error 91000 on line 118-122)
- Existing Documentation: None - first time documentation created
*/}

{/* CONTENT DECISIONS:
- FAQ Content Preserved: FAQ link mentioned in knowledge file lines 119-121, but actual FAQ content not available in research
- Content Excluded: SDK-specific implementation details from analysis file not directly relevant to customer resolution
- Recommendations Source:
  - ClientId configuration: Knowledge file lines 22-35 (setting clientId options)
  - Token authentication: Knowledge file lines 31-35 (token params approach)
  - Security considerations: Knowledge file lines 65-69
- Code Examples Rationale: Simple examples provided showing correct vs incorrect initialization patterns, based on knowledge file lines 23-35
*/}

{/* ATTRIBUTION BY SECTION:
- Common Causes:
  - Missing clientId: Based on analysis findings in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-analysis.md lines 29-57 (Go SDK validation)
  - Token authentication: From https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 31-35
- Resolution Steps:
  - Step 1 (Client options): Source from https://ably.com/docs/auth/identified-clients
  - Step 2 (Token auth): Knowledge file https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 31-35
  - Step 3 (All operations): Analysis file https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-analysis.md lines 25-57
- Prevention: Based on https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 58-63
- Security: Based on https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/91000-knowledge.md lines 65-69
*/}

{/* URL Validation Completed: 2025-11-07T08-36-41-586Z */}
{/* External URLs verified: 5 | Corrected: 0 | Exempted internal: 4 */}

{/* IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 91000
2. Regenerate: Run `./bin/ably-os errors document-error-codes 91000 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/b819713/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
*/}