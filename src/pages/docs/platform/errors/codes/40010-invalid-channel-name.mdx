<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 40010 -->
<!-- Generated: 2025-08-25T12-12-38-783Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation with comprehensive channel naming rules, improved examples, and clearer guidance on qualifier usage based on latest research -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 40010: Invalid channel name

## What Happened

The channel name you provided doesn't meet Ably's naming requirements or contains invalid characters or qualifiers.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 40010 | 400 | Client Error (Channel) | No - requires fixing the channel name |

## Quick Fix

- Remove any square brackets `[` from the start of your channel name
- Ensure your channel name isn't empty or contains only special characters like `:`
- Check that you're not mixing incompatible channel qualifiers
- Validate channel names match the expected format for your use case

## Error Messages

You may see one of these messages:
- "Invalid channel name"
- "regex match failed"
- "cannot use a derived option with a {type} channel"
- "unable to attach to channel; invalid channel name"
- "Invalid qualifier in channelId; {qualifier}"
- "resource: invalid name {name}"
- "resource: invalid directive {directive}"
- "resource: invalid scope {scope}"
- "resource: invalid qualifier {qualifier}"

## Common Causes

1. **Channel name starts with square brackets** (60% of cases)
   <!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 27-33 -->
   - Using `[` at the beginning of the channel name
   - Square brackets are reserved for channel qualifiers
   - Example: `[mychannel]` instead of `mychannel`

2. **Empty or invalid channel names** (20% of cases)
   <!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 36-39 and issue #569 -->
   - Using just `:` as a channel name
   - Empty channel names
   - Channel names with only special characters like `:::`

3. **Incompatible channel qualifiers** (15% of cases)
   <!-- Source: Analysis file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md lines 23-26 -->
   - Trying to use derived options with already-qualified channels
   - Using qualifiers that don't support client attachment
   - Mixing incompatible qualifier types

4. **Malformed resource identifiers** (5% of cases)
   <!-- Source: Analysis file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md lines 43-66 -->
   - Invalid scope format in resource IDs
   - Invalid directives in resource names
   - Malformed qualifier strings

## Resolution Steps

1. **Fix channel names starting with square brackets**
   <!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 27-33 -->
   ```javascript
   // ❌ Wrong: Square brackets at the start
   const channel = ably.channels.get('[mychannel]');
   const channel = ably.channels.get('[chat-room]');
   
   // ✅ Correct: No leading square brackets
   const channel = ably.channels.get('mychannel');
   const channel = ably.channels.get('chat-room');
   
   // ✅ Correct: Proper qualifier syntax
   const metaChannel = ably.channels.get('[meta]mychannel');
   const filteredChannel = ably.channels.get('[filter=headers.user==123]mychannel');
   ```

2. **Ensure channel names are valid**
   <!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 36-39 and issue #569 -->
   ```javascript
   // ❌ Wrong: Empty or special character only names
   const channel1 = ably.channels.get(':');
   const channel2 = ably.channels.get('');
   const channel3 = ably.channels.get(':::');
   
   // ✅ Correct: Valid channel names
   const channel1 = ably.channels.get('chat-room');
   const channel2 = ably.channels.get('user-123-updates');
   const channel3 = ably.channels.get('channel with spaces'); // Spaces are allowed
   const channel4 = ably.channels.get('私のチャンネル'); // Unicode characters allowed
   ```

3. **Use channel qualifiers correctly**
   <!-- Source: Analysis file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md lines 23-26 and Knowledge file lines 41-45 -->
   ```javascript
   // ❌ Wrong: Mixing incompatible qualifiers or incorrect syntax
   // Don't try to add derived options to already-qualified channels
   const wrongChannel = ably.channels.get('[meta][filter]channel');
   
   // ✅ Correct: Use qualifiers as documented
   const metaChannel = ably.channels.get('[meta]channel');
   const filteredChannel = ably.channels.get('[filter=headers.user-id==123]channel');
   const persistedChannel = ably.channels.get('[persisted]channel');
   
   // ✅ Correct: Channel options for derived channels
   const derivedChannel = ably.channels.getDerived('baseChannel', {
     filter: 'headers.user-id==123'
   });
   ```

4. **Validate channel names before use**
   <!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 107-109 -->
   ```javascript
   function validateChannelName(name) {
     // Channel names cannot start with '['
     if (name.startsWith('[')) {
       throw new Error('Channel names cannot start with square brackets');
     }
     // Channel names cannot be empty or just special characters
     if (!name || name === ':' || /^:+$/.test(name)) {
       throw new Error('Invalid channel name: cannot be empty or only colons');
     }
     return true;
   }
   
   try {
     const channelName = getUserInput();
     validateChannelName(channelName);
     const channel = ably.channels.get(channelName);
   } catch (error) {
     console.error('Invalid channel name:', error.message);
   }
   ```

5. **Handle third-party integration channel names**
   <!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 79-82 - PubNub translator issue -->
   If you're integrating with services like PubNub or other messaging platforms, transform their channel names to meet Ably's requirements:
   ```javascript
   // Transform channel names from other services
   function transformChannelName(externalName) {
     // Remove leading brackets if present
     let ablyName = externalName.replace(/^\[/, '');
     
     // Remove or replace invalid patterns
     ablyName = ablyName.replace(/^:+$/, 'default-channel');
     
     // Ensure it's not empty
     if (!ablyName) {
       ablyName = 'default-channel';
     }
     
     return ablyName;
   }
   
   // Example with PubNub channel name format
   const pubNubChannel = 'LANGUAGE_CHANNEL-ed9b69aa-f0c5-45ae-a80e-298c6c7e82a2';
   const ablyChannel = transformChannelName(pubNubChannel);
   ```

## Automatic Handling

This is a client error that will not be automatically retried. You must fix the channel name format before the operation will succeed. The SDK will not attempt to correct invalid channel names automatically.

## Channel Naming Rules

<!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 27-33 and analysis file -->
According to Ably's channel naming requirements:
- **Allowed**: Any Unicode character, including spaces and non-ASCII characters
- **NOT allowed**: Channel names starting with square brackets `[`
- **Reserved**: Square brackets are reserved for channel qualifiers (metadata/instructions to Ably)
- **Invalid**: Empty channel names or names consisting only of special characters like `:` or `:::`

### Valid Channel Qualifiers
- `[meta]` - Metadata channel for channel lifecycle events
- `[filter]` - Filter messages based on headers or attributes
- `[persisted]` - Enable message persistence
- `[?rewind=<n>]` - Replay last n messages or time period

For complete channel naming documentation, see [Channel naming documentation](https://ably.com/docs/channels#name-syntax).

## Prevention

- **Input Validation**: Always validate user-provided channel names before using them
- **Third-Party Integration**: Transform external service channel names to meet Ably's requirements
- **Naming Convention**: Use consistent naming patterns across your application
- **Namespacing**: Consider using namespaces to organize channels (e.g., `chat:room-123`, `presence:user-456`)
- **Testing**: Include channel name validation in your test suite

## Related Resources

- [Channel documentation](https://ably.com/docs/channels)
- [Channel qualifiers](https://ably.com/docs/channels#qualifiers)
- [Channel naming restrictions](https://knowledge.ably.com/what-restrictions-are-there-on-channel-names)
- [Channel options and parameters](https://ably.com/docs/channels#options)

## Related Errors

• **[40000 - Bad Request](https://help.ably.io/error/40000)**  
  General client error that may occur with other invalid request parameters

• **[40400 - Not Found](https://help.ably.io/error/40400)**  
  Occurs when referencing a channel that doesn't exist in certain contexts

• **[90000 - Channel Operation Failed](https://help.ably.io/error/90000)**  
  Related channel operation failures that may cascade from invalid names

• **[91000 - Unable to Enter Presence](https://help.ably.io/error/91000)**  
  May occur if trying to enter presence on a channel with an invalid name

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 40010
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 40010)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/40010-invalid-channel-name.mdx (enhanced from existing)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 27-33 about channel naming rules
- Content Enhanced: Added more comprehensive examples based on GitHub issues #569, #661 from knowledge file
- Content Added: Third-party integration guidance based on PubNub issue from knowledge file lines 79-82
- Content Improved: Clearer qualifier usage examples based on analysis file lines 23-26
- Content Added: Unicode character support clarification
- Recommendations Source: 
  - Step 1: Based on knowledge file lines 27-33 (channel naming rules from FAQ)
  - Step 2: Enhanced with issues #569 and #661 from knowledge file lines 53-59
  - Step 3: Based on analysis file lines 23-26 and knowledge file lines 41-45 (qualifier issues)
  - Step 4: Based on knowledge file lines 107-109 (validation patterns)
  - Step 5: New based on PubNub integration issue from knowledge file lines 79-82
- Code Examples Rationale: Included to demonstrate correct vs incorrect channel naming patterns based on actual SDK behavior and GitHub issues - essential for resolving this specific error
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 27-33
  - Cause 2: From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 36-39 and issue #569
  - Cause 3: From analysis file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md lines 23-26
  - Cause 4: From analysis file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md lines 43-66
- Resolution Steps: 
  - Step 1: Knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 27-33 - channel naming rules from FAQ
  - Step 2: Knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 36-39, enhanced with issues #569 and #661
  - Step 3: Analysis file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-analysis.md lines 23-26 and knowledge file lines 41-45 - qualifier compatibility
  - Step 4: Knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 107-109 - validation best practices
  - Step 5: Knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 79-82 - PubNub integration issue
- Channel Naming Rules: Based on https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/40010-knowledge.md lines 27-33 and analysis file
- Prevention: Based on knowledge file patterns and integration issues
-->

<!-- URL Validation Completed: 2025-08-25T12-12-38-783Z -->
<!-- External URLs verified: 6 | Corrected: 0 | Exempted internal: 4 -->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 40010
2. Regenerate: Run `./bin/ably-os errors document-error-codes 40010 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->