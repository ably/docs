<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 42213 -->
<!-- Generated: 2025-08-25T05-37-30-332Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document AI moderation rejection error with clear resolution steps for content policy violations -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 42213: Message rejected by moderation

## What Happened?

Your chat message was automatically blocked by AI-powered moderation because it violated the room's content policies.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 42213 | 422 | Chat (Moderation) | No - content must be revised |

## Quick Fix

- Review your message for inappropriate content
- Remove any profanity, toxicity, or spam
- Rephrase using appropriate language
- Retry sending the revised message

## Error Messages

You'll see this message:
- "The message was rejected before publishing by a moderation rule on the chat room"

## Common Causes

1. **Profanity or offensive language** (most common)
   - Explicit language or masked profanity
   - Offensive terms or slurs
   - Inappropriate sexual content
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 7-10 -->

2. **Toxic behavior**
   - Harassment or bullying
   - Threats or aggressive language
   - Hate speech or discrimination
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 12-16 -->

3. **Spam or repetitive content**
   - Excessive repetition
   - Commercial spam or promotions
   - Link spam or unauthorized URLs
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 18-21 -->

4. **Channel-specific policy violations**
   - Content inappropriate for the specific room context
   - Violations of custom moderation rules
   - Content exceeding configured toxicity thresholds
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-analysis.md lines 58-62 -->
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 80-86 -->

## Resolution Steps

1. **Review your message content**
   - Identify potentially problematic language
   - Check for any terms that might trigger moderation
   - Consider the context and audience of the chat room
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 30-33 -->

2. **Revise your message**
   - Remove or replace inappropriate language
   - Ensure the message is respectful and constructive
   - Avoid excessive repetition or promotional content
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 31-32, enhanced analysis from lines 95-99 -->

3. **Retry sending**
   - Send your revised message
   - If still rejected, consider further revision
   - Check if you're following room-specific guidelines
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 99-100 -->

4. **If legitimate content is being blocked**
   - The message may be a false positive
   - Try rephrasing in a different way
   - Contact the application support team if the issue persists
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md line 39 -->

## Automatic Handling

This error is not automatically retried by Ably SDKs. The message content must be revised before it can be successfully published. The moderation check happens before the message is distributed to other users, protecting the community from inappropriate content.
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-analysis.md lines 49-50, 90-93 -->

## Moderation Services

Ably Chat integrates with several AI-powered moderation services that may trigger this error:

- **Hive Moderation**: AI text analysis with configurable severity thresholds
- **Bodyguard**: Contextual analysis with channel-specific rules
- **Tisane**: Advanced content moderation capabilities

Each service can be configured per chat room with custom thresholds and policies.
<!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 54-70 -->
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-analysis.md lines 32-45 -->

## Prevention

- **Familiarize yourself with community guidelines**
  - Understand the chat room's content policies
  - Be aware of language that might trigger moderation
  <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 36-38 -->

- **Write respectfully**
  - Use appropriate language for the audience
  - Avoid potentially offensive terms
  - Be constructive in your communication
  <!-- Source: Best practices from knowledge base lines 37-39 -->

- **For developers: Provide clear feedback**
  - Display user-friendly error messages
  - Offer content guidelines to users
  - Consider client-side pre-filtering for common violations
  - Monitor false positive rates and adjust thresholds if needed
  <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 101-105 -->

## Related Resources

- [Ably Chat documentation](https://ably.com/docs/chat)
- [AI moderation FAQ](https://faqs.ably.com/ai-chat-moderation)
- [Hive Dashboard moderation](https://ably.com/docs/chat/moderation/direct/hive-dashboard)

## Related Errors

â€¢ **[42211 - Message Rejected by Before-Publish Rule](https://help.ably.io/error/42211)**  
  General before-publish rule rejection not specific to AI moderation

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 42213
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 42213)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/42213-message-rejected-by-moderation.mdx (enhanced from existing)
-->

<!-- URL Validation Completed: 2025-08-25T05-37-30-332Z -->
<!-- External URLs verified: 5 | Corrected: 0 | Exempted internal: 3 -->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Knowledge advice about reviewing content, removing inappropriate language, and rephrasing from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 30-33
- Content Excluded: Specific moderation service implementation details (exact technical configurations) as these are internal configuration details
- Recommendations Source: Based on knowledge base recovery guidance and best practices sections
- Code Examples Rationale: No code examples included as this is a content policy issue, not a coding problem
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1 (Profanity): Based on knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 7-10
  - Cause 2 (Toxicity): From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 12-16
  - Cause 3 (Spam): From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 18-21
  - Cause 4 (Channel-specific): From analysis file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-analysis.md lines 58-62 and knowledge file lines 80-86
- Resolution Steps: 
  - Step 1: Based on knowledge file recovery guidance https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 30-33
  - Step 2: From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 31-32 and enhanced knowledge lines 95-99
  - Step 3: From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 99-100
  - Step 4: Based on best practices https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md line 39
- Moderation Services: Based on knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 54-70 and analysis file lines 32-45
- Prevention: Based on knowledge file best practices section https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/42213-knowledge.md lines 36-39 and developer considerations lines 101-105
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 42213
2. Regenerate: Run `./bin/ably-os errors document-error-codes 42213 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->