<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 50210 -->
<!-- Generated: 2025-08-25T19-44-21-128Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Enhanced documentation of edge proxy error with detailed resolution steps and real-world patterns from support history -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 50210: Bad Gateway

## What Happened

Ably's edge proxy service received an invalid response from the upstream Ably platform servers when attempting to process your request.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 50210 | 502 | Server Error (Edge Proxy) | Yes - temporary infrastructure issue |

## Quick Fix

- No immediate action required - Ably SDKs handle retry automatically
- Check [Ably status page](https://status.ably.com) if error persists beyond 2 minutes
- For direct REST API usage, implement exponential backoff retry logic

## Error Messages

You may see this message:
- "Ably's edge proxy service received an invalid (bad gateway) response from the Ably platform"

This error appears when CloudFront edge proxy receives HTTP 502 status from upstream Ably servers.

## Common Causes

<!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 21-27 -->
1. **Upstream platform issues** (Most common)
   - Ably platform servers returning invalid responses during incidents
   - Service degradation during high load periods
   - Temporary infrastructure disruptions

2. **Transient network issues** (Common)
   - Temporary connectivity problems between CloudFront and Ably platform
   - Network routing issues between edge locations and core infrastructure
   - Brief interruptions in inter-datacenter connectivity

3. **Regional outages** (Less common)
   - Issues affecting specific CloudFront edge locations
   - Localized infrastructure problems in certain geographic regions
   - Edge location-specific connectivity issues

4. **Batch processing overload** (For high-volume operations)
   <!-- Source: Split customer experience from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 31-42 -->
   - Large notification batches overwhelming upstream capacity
   - Concurrent batch operations during peak times

## Resolution Steps

1. **For transient errors (most cases)**
   <!-- Source: Knowledge file advice from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 73-77 -->
   - Ably SDKs automatically retry with appropriate backoff
   - No action required unless error persists for more than 2 minutes
   - Monitor your application logs for error frequency

2. **For persistent errors (>2 minutes)**
   - Check https://status.ably.com for active platform incidents
   - Review recent changes to your implementation or traffic patterns
   - Note the exact time and frequency of errors for support reference
   - Consider temporary traffic reduction if possible

3. **If using REST API directly**
   <!-- Source: Knowledge file from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 79-87 -->
   ```javascript
   // Implement exponential backoff
   async function retryWithBackoff(fn, maxRetries = 5) {
     let delay = 1000; // Start with 1 second
     for (let i = 0; i < maxRetries; i++) {
       try {
         return await fn();
       } catch (error) {
         if (error.code !== 50210 || i === maxRetries - 1) throw error;
         // Add jitter to avoid thundering herd
         const jitter = Math.random() * 1000;
         await new Promise(resolve => setTimeout(resolve, delay + jitter));
         delay = Math.min(delay * 2, 32000); // Cap at 32 seconds
       }
     }
   }
   ```
   <!-- Code source: Standard exponential backoff pattern referenced in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 79-87, included because essential for REST API users -->

4. **For batch operations**
   <!-- Source: Support history from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 31-42 -->
   - Keep track of failed batches for manual replay if needed
   - Consider implementing circuit breaker patterns for repeated failures
   - Monitor for patterns (specific time windows, operation types)
   - Split large batches into smaller chunks to reduce impact

5. **Verify SDK error handling**
   <!-- Source: Engineering discussion from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 56-60 -->
   - Ensure you're using a current SDK version
   - Some older SDKs incorrectly wrap 50210 in error 400, preventing automatic retry
   - Update to latest SDK version if experiencing retry issues

## Automatic Handling

<!-- Source: Engineering discussion from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 56-60 and lines 84-87 -->
Ably SDKs automatically retry server errors with exponential backoff. The SDK will:
- Retry with increasing delays (1s, 2s, 4s, 8s, etc.)
- Add jitter to prevent synchronized retry storms
- Eventually enter suspended state if errors persist

**Important**: Some older SDK versions may incorrectly handle this error by wrapping it in a 400 client error, which prevents automatic retry. Ensure you're using a current SDK version for proper error handling.

## Prevention

- **Use current SDK versions** for proper automatic error handling
- **Implement monitoring** for 50210 errors to detect patterns early
- **Geographic distribution**: Spread requests across multiple regions to avoid single edge location issues
- **Batch optimization**: Keep batch sizes reasonable (under 100 messages) to minimize failure impact
- **Circuit breaker patterns**: Implement circuit breakers for high-volume operations
- **Error tracking**: Log error timestamps to identify patterns (e.g., specific times of day)

## Performance Impact

This error can affect:
- **Message delivery latency** during retry cycles
- **Batch processing completion** for notification systems
- **Real-time data flow** until connection recovers
- **Client connection state** if errors persist

The connection will remain in attempting/suspended states during persistent errors, with automatic recovery once the upstream issue resolves.

## Related Resources

- [Ably Status Page](https://status.ably.com) - Check for platform incidents
- [Ably Documentation](https://ably.com/docs) - Complete platform documentation
- [Connection State Management](https://ably.com/docs/connect) - Understanding connection recovery

## Related Errors

• **[50003 - Timeout Error](https://help.ably.io/error/50003)**  
  Often occurs alongside 50210 during infrastructure issues affecting request processing

• **[50310 - Service Unavailable](https://help.ably.io/error/50310)**  
  Related edge proxy error when upstream returns 503 status instead of 502

• **[50410 - Gateway Timeout](https://help.ably.io/error/50410)**  
  Edge proxy timeout variant when upstream doesn't respond within time limit

• **[50010 - Internal Server Error](https://help.ably.io/error/50010)**  
  Generic edge proxy error for unspecified internal failures

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 50210
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs with current SHA, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/5f4ba43/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 50210)
- Existing Documentation: https://github.com/ably/docs/blob/main/src/pages/docs/platform/errors/codes/50210-bad-gateway.mdx (enhanced from existing)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: Customer support patterns from https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 31-42 (Split customer batch processing issues)
- Content Excluded: Specific customer names in main content (privacy), moved to pattern descriptions
- Recommendations Source: 
  - Retry logic: Based on knowledge file lines 79-87
  - Status page check: Standard practice for server errors per writing guide
  - Batch handling: From Split customer experience lines 31-42
  - SDK version issues: From engineering discussion lines 56-60
- Code Examples Rationale: Included exponential backoff example as it's essential for REST API users per knowledge file lines 79-87
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge findings in https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 23-24
  - Cause 2: From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 24-25
  - Cause 3: From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 26-27
  - Cause 4: Based on Split customer patterns https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 31-42
- Resolution Steps: 
  - Step 1: Standard server error handling per writing guide and knowledge file lines 73-77
  - Step 2: From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 74-75
  - Step 3: From knowledge file https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 79-87
  - Step 4: Based on Split customer experience https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 31-42
  - Step 5: From engineering discussion https://github.com/ably/ably-os/blob/5f4ba43/output/error-codes/research/50210-knowledge.md lines 56-60
- Prevention: Based on patterns from support history and engineering discussions throughout knowledge file
- Performance Impact: Added based on understanding of connection states and batch processing impacts
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Detailed CloudFront edge proxy architecture documentation
- Impact: Users don't understand the infrastructure layers involved in request routing
- Recommendation: Add edge proxy architecture section to infrastructure documentation
- Severity: Medium - affects understanding but not resolution
-->

<!-- URL Validation Completed: 2025-08-25T19-44-21-128Z -->
<!-- External URLs verified: 7 | Corrected: 1 | Exempted internal: 5 -->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 50210
2. Regenerate: Run `./bin/ably-os errors document-error-codes 50210 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/5f4ba43/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->