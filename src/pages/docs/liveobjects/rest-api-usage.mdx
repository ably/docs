---
title: Using the REST API
meta_description: "Learn how to work with Ably LiveObjects using the REST API"
---

<Aside data-type='experimental'>
LiveObjects is currently Experimental. Its features are still in development and subject to rapid change.

**Building with LiveObjects?** Help shape its future by [sharing your use case](https://44qpp.share.hsforms.com/2fZobHQA1ToyRfB9xqZYQmQ).
</Aside>

LiveObjects provides a comprehensive REST API that enables you to directly work with objects without using a client SDK.

## Authentication <a id="authentication"/>

View the REST API [authentication](/docs/api/rest-api#authentication) documentation for details on how to authenticate your requests.

To use LiveObjects, an API key must have at least the `object-subscribe` capability. With only this capability, clients will have read-only access, preventing them from publishing operations.

In order to create or update objects, make sure your API key includes both `object-subscribe` and `object-publish` [capabilities](/docs/auth/capabilities) to allow full read and write access.

## Data values <a id="data-values"/>

When working with objects via the REST API, [primitive types](/docs/liveobjects/concepts/objects#primitive-types) and [object references](/docs/liveobjects/concepts/objects#composability) are included in request and response bodies under `data` fields.

The key in the `data` object indicates the type of the value:

<Code>
```json
{ "data": { "number": 42 } }
{ "data": { "string": "LiveObjects is awesome" } }
{ "data": { "boolean": true } }
{ "data": { "bytes": "TGl2ZU9iamVjdHMgaXMgYXdlc29tZQo=" } }
{ "data": { "objectId": "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669" } }
```
</Code>

<Aside data-type='note'>
`bytes` values use base64 string encoding in JSON request and response bodies.
</Aside>

## Fetch the channel object <a id="fetch-object"/>

### Get the entire object <a id="fetching-object-get"/>

The following request returns the entrie object tree.

<Code>
```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}}
```
</Code>

This endpoint by default returns the compact representation of the object tree.

<Code>
  ```json
  {
    "poll": {
      "name": "First Poll"
      "votes": {
        "down": 10,
        "up": 5,
      }
    }
  }
  ```
</Code>

#### Get the entire object with metatdata <a id="fetching-object"/>

By providing the `compact=false` query param the response will contain the full object representation including the
objectIds.

<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object?compact=false" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "objectId": "root",
    "map": {
      "semantics": "LWW",
      "entries": {
        "poll": {
          "data": {
            "objectId": "map:fNDMOPlPriqid9SUitqIuP_S-6u5YUYQzxjs39IM68k@1760448542413",
            "map": {
              "semantics": "LWW",
              "entries": {
                "title": {
                  "data": {
                    "string": "First Poll"
                  }
                },
                "votes": {
                  "data": {
                    "objectId": "map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692",
                    "map": {
                      "semantics": "LWW",
                      "entries": {
                        "down": {
                          "data": {
                            "objectId": "counter:Yj1F_aEX3T2rRkTkra7Aifmlr8PxUWSR3kO3MzxtQto@1760448653393",
                            "counter": {
                              "data": {
                                "number": 5
                              }
                            }
                          }
                        },
                        "up": {
                          "data": {
                            "objectId": "counter:ibxddWpDjH8R3cvXWWacfe4IVd3DxT_oqkAafhaS68s@1760448646413",
                            "counter": {
                              "data": {
                                "number": 10
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  ```
</Code>

Both these requests are billed per object returned.

#### Get a subset of the object <a id="fetch-object-with-path"/>

You can return a subset of the object tree by specifying the `path` query param. For example, to return just the `poll` `LiveMap` instance from the root object:

// example url
<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object?path=poll" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "title": "First Poll",
    "votes": {
      "down": 5,
      "up": 10
    }
  }
  ```
</Code>

Note you will be only billed for the objects contained within the path.

### Get an object by id <a id="fetch-object-get-by-id"/>

`GET main.realtime.ably.net/channels/<channelName>/object/<objectId>`

To fetch a single object on the channel you can specify the object ID in the URL path:

<Code>
```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object/map:fNDMOPlPriqid9SUitqIuP_S-6u5YUYQzxjs39IM68k@1760448542413" \
    -u {{API_KEY}}
```
</Code>

This endpoint works the same as the fetch channel object endpoint above and can also return a compact (default) and a
full object response.

<Code>
  ```json
  {
    "title": "first poll",
    "votes": {
      "down": 5,
      "up": 10
    }
  }
  ```
</Code>

The full object response can be retrieved by providing the `compact=false` query param.

<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object/map:fNDMOPlPriqid9SUitqIuP_S-6u5YUYQzxjs39IM68k@1760448542413?compact=false" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "objectId": "map:fNDMOPlPriqid9SUitqIuP_S-6u5YUYQzxjs39IM68k@1760448542413",
    "map": {
      "semantics": "LWW",
      "entries": {
        "title": {
          "data": {
            "string": "first poll"
          }
        },
        "votes": {
          "data": {
            "objectId": "map:qZXBk8xaGqf4kwLSlR7Tj0Eqhd48WDFfb3gTAbj194k@1760448597692",
            "map": {
              "semantics": "LWW",
              "entries": {
                "down": {
                  "data": {
                    "objectId": "counter:Yj1F_aEX3T2rRkTkra7Aifmlr8PxUWSR3kO3MzxtQto@1760448653393",
                    "counter": {
                      "data": {
                        "number": 5
                      }
                    }
                  }
                },
                "up": {
                  "data": {
                    "objectId": "counter:ibxddWpDjH8R3cvXWWacfe4IVd3DxT_oqkAafhaS68s@1760448646413",
                    "counter": {
                      "data": {
                        "number": 10
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  ```
</Code>


The `path` param can also be provided here to return a subset of the object tree starting from the specified object ID.

<Code>
  ```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object/map:fNDMOPlPriqid9SUitqIuP_S-6u5YUYQzxjs39IM68k@1760448542413?path=votes" \
  -u {{API_KEY}}
  ```
</Code>

<Code>
  ```json
  {
    "down": 5,
    "up": 10
  }
  ```

  This request is billed per object returned.

</Code>

### Cyclic references <a id="fetching-objects-get-cycles"/>

For both the full object and the compact response formats cyclic references in the object tree will be included as a
reference to the object ID rather than including the same object in the response more than once.

For example, if we created a cycle in the object tree by adding a reference to the root object in the `poll` `LiveMap` instance with the following operation:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_SET",
      "objectId": "map:fNDMOPlPriqid9SUitqIuP_S-6u5YUYQzxjs39IM68k@1760448542413",
      "data": {"key": "myRoot", "value": {"objectId": "root"}}
    }'
```
</Code>

The response will handle the cyclic reference by including the `myRoot` key in the response as a reference to the object ID of the root object:

<Code>
```shell
  curl "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}}
```
</Code>

<Code>
  ```json
  {
    "poll": {
      "myRoot": {
        "objectId": "root"
      },
      "title": "first poll",
      "votes": {
        "down": 5,
        "up": 10
      }
    }
  }
  ```
</Code>

## Publishing operations <a id="publishing-operations"/>

`POST main.realtime.ably.net/channels/<channelName>/object`

All operations are published to the same endpoint. The request body specifies:

* The type of operation to publish
* The object(s) to which the operation should be applied
* The operation payload

The request body is of the form:

<Code>
```json
{
  "operation": "<operationType>",
  "objectId": "<objectId>",
  "path": "<path>",
  "data": "<data>"
}
```
</Code>

The `operationType` is a string that specifies the type of operation to publish and must be one of:

| Operation | Description |
| --------- | ----------- |
| `MAP_CREATE` | Creates LiveMap object. |
| `MAP_SET` | Set the value of a key in a LiveMap object. |
| `MAP_REMOVE` | Tombstone a key in a LiveMap object. |
| `COUNTER_CREATE` | Creates a LiveCounter object. |
| `COUNTER_INC` | Increments or decrements the value of a LiveCounter object. |

<Aside data-type='note'>
There is no explicit `COUNTER_DEC` operation. To decrement a counter, use the `COUNTER_INC` operation with a negative number.
</Aside>

Either the `objectId` or `path` fields are used to specify the target object(s) for the operation.

The operation payload is provided in the `data` in accordance with the specified operation type.

Each published operation counts as one billable message.

### Update a specific object instance <a id="updating-objects-by-id"/>

To perform operations on a specific object instance, you need to provide its object ID in the request body:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
      "data": {"number":1}
    }'
```
</Code>

The response includes the ID of the published operation message, the channel and a list of object IDs that were affected by the operation:

<Code>
```json
{
  "messageId": "TJPWHhMTrF:0",
  "channel": "my-channel",
  "objectIds": ["counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269"]
}
```
</Code>

### Update an object by path <a id="updating-objects-by-path"/>

Path operations provide a convenient way to target objects based on their location in the object tree.

Paths are expressed relative to the structure of the object as defined by the [compact](#fetching-objects-compact) view of the object tree.

For example, given the following compact view of the object tree:

The following example increments the `LiveCounter` instance stored at the `up` key on the `votes` `LiveMap` instance on the root object:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "poll.votes.up",
      "data": { "number": 1 }
    }'
```
</Code>

<Aside data-type='important'>
When using path operations, the `objectId`s of the target objects are resolved by the server at the time the request is received.

The operation is applied to these specific object instances. If the object instances located at that specified path change before the operation is processed, due to concurrent updates from other clients, the operation will not be applied to the new object instances.
</Aside>

You can use wildcards in paths to target multiple objects at once. To increment all `LiveCounter` instances in the `votes` `LiveMap` instance:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "votes.*",
      "data": { "number": 1 }
    }'
```
</Code>

The response includes the IDs of each of the affected object instances:

<Code>
```json
{
  "messageId": "0Q1w-LpA11:0",
  "channel": "my-channel",
  "objectIds": [
    "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
    "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669"
  ]
}
```
</Code>

Wildcards can be included at the end or in the middle of paths and will match exactly one level in the object tree. For example, given the following compact view of the object tree:

<Code>
```json
{
  "posts": {
    "post1": {
      "votes": {
        "up": 5,
        "down": 10
      }
    },
    "post2": {
      "votes": {
        "up": 5,
        "down": 10
      }
    }
  }
}
```
</Code>

The following example increments the upvote `LiveCounter` instances for all posts in the `posts` `LiveMap` instance:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "posts.*.votes.up",
      "data": { "number": 1 }
    }'
```
</Code>

If your `LiveMap` keys contain periods, you can escape them with a backslash. The following example increments the upvote `LiveCounter` instance for a post with the key `post.123`:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "COUNTER_INC",
      "path": "posts.post\.123.votes.up",
      "data": { "number": 1 }
    }'
```
</Code>

### Creating objects <a id="creating-objects"/>

Use the `MAP_CREATE` and `COUNTER_CREATE` operations to create new objects. You can optionally specify an initial value for the object in the `data` field when creating it.

For `MAP_CREATE`, the `data` field should be a JSON object that contains the initial entries for the `LiveMap` instance:

<Code>
```json
{
  "operation": "MAP_CREATE",
  "data": {
    "title": {"string": "LiveObjects is awesome"},
    "createdAt": {"number": 1745835181122},
    "isPublished": {"boolean": true}
  }
}
```
</Code>

For `COUNTER_CREATE`, the `data` field should be a JSON object that contains the initial value for the `LiveCounter` instance:

<Code>
```json
{
  "operation": "COUNTER_CREATE",
  "data": { "number": 5 }
}
```
</Code>

When you create a new object it is important that the new object is assigned to the object tree so that it is [reachable](/docs/liveobjects/concepts/object#reachability) from the root object.

The simplest way to do this is to use the `path` field in the request body. The path is relative to the root object and specifies where in the object tree the new object should be created.

The following example creates a new `LiveMap` instance and assigns it to the `posts` `LiveMap` instance on the root object under the key `post1`:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_CREATE",
      "path": "posts.post1",
      "data": {
        "title": {"string": "LiveObjects is awesome"},
        "createdAt": {"number": 1745835181122},
        "isPublished": {"boolean": true}
      }
    }'
```
</Code>

The following example shows how to update a key and value in a `LiveMap`:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_SET",
      "path": "posts.post1",
      "data": {
        "key" : "title",
        "value": {"string": "LiveObjects is still awesome"}
      }
    }'
```
</Code>

Note in this example if the key `title` didn't exist it would have been created and set by this operation.

When using the `path` specifier with a `COUNTER_CREATE` or `MAP_CREATE` operation, the server constructs *two* operations which are published as a [batch](#batch-operations):

* A `MAP_CREATE` or `COUNTER_CREATE` operation used to create the new object
* A `MAP_SET` operation used to assign the new object to the `LiveMap` instance specified by the `path`

Therefore the response will include the object IDs of all objects affected by the resulting set of operations:

<Code>
```json
{
  "messageId": "mkfjWU2jju:0",
  "channel": "my-channel",
  "objectIds": [
    "map:cRCKx-eev7Tl66jGfl1SkZh_uEMo6F5jyV0B7mUn4Zs@1745835549101",
    "map:a_oQqPYUGxi95_Cn0pWcsoeBlHZZtVW5xKIw0hnJCZs@1745835547258"
  ]
}
```
</Code>

### Removing objects <a id="removing-objects"/>

There is no explicit delete operation for objects themselves. Objects that are not reachable from the root map will be eligible for garbage collection.

Remove a reference to a nested object in a `LiveMap` instance using the `MAP_REMOVE` operation:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "operation": "MAP_REMOVE",
      "objectId": "root",
      "data": {"key": "posts"}
    }'
```
</Code>

If no other references to the object exist, it will no longer be reachable from the root object and will be eligible for garbage collection.

<Aside data-type='note'>
Removing the nested object may also make any nested child objects unreachable from the root object. These objects will also be eligible for garbage collection.
</Aside>

### Batch operations <a id="batch-operations"/>

You can group several operations into a single request by sending an array of operations.

All operations inside the array form a [batch operation](/docs/liveobjects/concepts/operations#batch-operations) which is published as a single message. All operations in the batch are processed as a single atomic unit. Batch operations therefore count as one billable message.

The following example shows how to increment two distinct `LiveCounter` instances in a single batch operation:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '[
      {
        "operation": "COUNTER_INC",
        "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
        "data": {"number": 1}
      },
      {
        "operation": "COUNTER_INC",
        "objectId": "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669",
        "data": {"number": 1}
      }
    ]'
```
</Code>

### Idempotent operations <a id="idempotent-operations"/>

Publish operations idempotently in the same way as for [idempotent message publishing](/docs/api/rest-api#idempotent-publish) by specifying an `id` for the operation message:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '{
      "id": "my-idempotency-key",
      "operation": "COUNTER_INC",
      "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
      "data": {"number": 1}
    }'
```
</Code>

For batch operations, use the format `<baseId>:<index>` where the index is the zero-based index of the operation in the array:

<Code>
```shell
  curl -X POST "https://main.realtime.ably.net/channels/my-channel/object" \
    -u {{API_KEY}} \
    -H "Content-Type: application/json" \
    -d '[
      {
        "id": "my-idempotency-key:0",
        "operation": "COUNTER_INC",
        "objectId": "counter:iVji62_MW_j4dShuJbr2fmsP2D8MyCs6tFqON9-xAkc@1745828645269",
        "data": {"number": 1}
      },
      {
        "id": "my-idempotency-key:1",
        "operation": "COUNTER_INC",
        "objectId": "counter:JbZYiHnw0ORAyzzLSQahVik31iBDL_ehJNpTEF3qwg8@1745828651669",
        "data": {"number": 1}
      }
    ]'
```
</Code>
