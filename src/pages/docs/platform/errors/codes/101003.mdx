---
title: "Error code 101003: Lock is currently locked"
meta_description: "Understand and resolve Ably error code 101003, which occurs when attempting to acquire a lock that's already held by another user in Ably Spaces."
meta_keywords: "Ably error 101003, lock is locked, Spaces locking error, component locking, distributed locking, collaborative editing"
---

{/* Generated by: ably-os errors document-error-codes */}
{/* Repository: https://github.com/ably/ably-os */}
{/* Command: ./bin/ably-os errors document-error-codes 101003 */}
{/* Generated: 2025-11-07T08-36-41-586Z */}
{/* Sources:
     - Analysis: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
*/}
{/* Key Approach: Document as expected lock contention behavior in distributed systems, not an error */}
{/* Citations: Complete source attribution with line numbers available at bottom of document */}

This error indicates that a component lock in Ably Spaces is currently held by another user, and your lock request did not take priority.

| Error code | HTTP status code | Category | Retryable |
| ---------- | ---------------- | -------- | --------- |
| 101003 | 400 | Spaces Locking | Yes |

## Error messages

| Message | Description |
| ------- | ----------- |
| `lock is currently locked` | The component you're trying to lock is already locked by another user |

## Impact

This error affects only the current lock acquisition attempt. Your application remains connected and functional.

The Spaces SDK does not automatically retry lock acquisitions. Your application should implement appropriate retry logic based on your use case.

## Quick fixes

- Subscribe to lock update events to be notified when the lock becomes available
- Implement visual indicators showing who currently holds the lock
- Design your UI to gracefully handle lock contention scenarios

## Troubleshooting

This is an expected condition in collaborative applications when multiple users attempt to interact with the same component simultaneously.

### Lock held by another user

| Error message |
| ------------- |
| `lock is currently locked` |

This occurs when:
- Another user has already acquired the lock for the component
- Your lock request's timestamp or priority did not supersede the existing lock
- The distributed locking system resolved the conflict in favor of the existing lock holder

To handle this:
1. Subscribe to lock update events to detect when the lock becomes available:
   ```javascript
   const { status, member, acquire, release } = useLock('component-id');

   // Monitor lock status changes
   useEffect(() => {
     if (status === 'unlocked') {
       // Lock is now available - can attempt to acquire
     }
   }, [status]);
   ```
   {/* Source: Based on Spaces SDK patterns from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-knowledge.md lines 106-119 */}

2. Display who currently holds the lock to improve user experience:
   ```javascript
   if (status === 'locked' && member) {
     showMessage(`${member.clientId} is currently editing this component`);
   }
   ```
   {/* Source: Derived from lock state management pattern in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-analysis.md lines 41-43 */}

3. Implement retry logic with exponential backoff if immediate lock acquisition is critical:
   ```javascript
   async function acquireLockWithRetry(lockId, maxRetries = 3) {
     for (let attempt = 0; attempt < maxRetries; attempt++) {
       const lock = await acquire();
       if (lock) return lock;

       // Exponential backoff: 1s, 2s, 4s
       await new Promise(resolve =>
         setTimeout(resolve, Math.pow(2, attempt) * 1000)
       );
     }
     return null;
   }
   ```
   {/* Source: Recommendation from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-analysis.md lines 79-80 */}

## Prevention

To minimize lock contention in your collaborative application:

- **Design for collaboration**: Show visual indicators when components are being edited by others
- **Queue position display**: Let users know their position when waiting for a lock
- **Auto-save and release**: Release locks promptly when users finish editing
- **Conflict resolution UI**: Provide clear options when lock conflicts occur
- **Timeout inactive locks**: Consider implementing timeouts for locks held by inactive users

{/* Source: Prevention strategies from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-knowledge.md lines 99-104 */}

## Related errors

The following errors are related to error code 101003:

| Error code | Description |
| ---------- | ----------- |
| [101000 - Spaces not found](/docs/platform/errors/codes/101000) | Occurs when attempting operations on non-existent Spaces instances |
| [101001 - Lock invalidated](/docs/platform/errors/codes/101001) | Related lock error when a lock is invalidated by another request |
| [101002 - Lock released](/docs/platform/errors/codes/101002) | Occurs when attempting operations on already-released locks |

## Need further help?

Contact [Ably support](https://ably.com/support) if you're still experiencing issues after trying the steps listed above.

You'll need to provide:

- Your account ID and app ID.
- The full error message including the error code.
- Steps to reproduce the issue.
- Any relevant code snippets (without any sensitive credentials).
- The SDK and version you're using.

### Resources

- [Ably Spaces documentation](https://ably.com/docs/products/spaces)
- [Component locking guide](https://ably.com/docs/products/spaces#component-locking)
- [Collaborative features best practices](https://ably.com/blog/collaborative-features)

{/* =============================================== */}
{/* INTERNAL DOCUMENTATION (NOT RENDERED) */}
{/* =============================================== */}

{/* SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
- Existing Documentation: None (new documentation)
*/}

{/* CONTENT DECISIONS:
- FAQ Content Preserved: Lock description from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-knowledge.md lines 11-18
- Content Excluded: None - all relevant information included
- Recommendations Source:
  - Lock event subscription: Knowledge file lines 106-119
  - Retry logic: Analysis file lines 79-80
  - UI patterns: Knowledge file lines 98-104
- Code Examples Rationale: Included essential patterns for handling lock contention based on SDK usage patterns
*/}

{/* ATTRIBUTION BY SECTION:
- Common Causes:
  - Lock contention: Based on analysis findings in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-analysis.md lines 41-50
  - Priority system: From code analysis at https://github.com/ably/spaces/blob/main/src/Locks.ts#L448
- Resolution Steps:
  - Step 1: Lock monitoring pattern from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/101003-knowledge.md lines 106-119
  - Step 2: UI feedback from analysis file lines 41-43
  - Step 3: Retry logic from analysis file lines 79-80
- Prevention: Based on developer guidance in knowledge file lines 99-104
*/}

{/* URL Validation Completed: 2025-11-07T08-36-41-586Z */}
{/* External URLs verified: 1 | Corrected: 0 | Exempted internal: 3 */}

{/* IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 101003
2. Regenerate: Run `./bin/ably-os errors document-error-codes 101003 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/b819713/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
*/}