<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 50003 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document various timeout scenarios (message send, connection, channel operations, HTTP requests) with clear recovery guidance. Emphasize that Realtime SDK does NOT auto-retry but REST SDK does. -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 50003: Timeout error

## What Happened

An operation timed out before completing, typically due to network issues, temporary service unavailability, or operations exceeding configured time limits.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 50003 | 500/503/504/408 | Server Error (Timeout) | Yes - temporary timeout condition |

## Quick Fix

- For REST SDK users: No action needed - automatic retry is handled
- For Realtime SDK users: Implement application-level retry logic
- Check [Ably status page](https://status.ably.com) if persistent
- Consider increasing timeout values in SDK configuration

## Error Messages

You may see one of these messages:
- "Message send timeout expired"
- "Timeout for trying fallback hosts retries. Total elapsed time exceeded the [timeout]ms limit"
- "timed out before attaching channel"
- "timed out before detaching channel"
- "Ping request cancelled due to request timeout"
- "Timeout waiting for ping response"
- "Connection cancelled due to request timeout"
- "Ping failed as connection has changed state to {state}"
- "cURL error: [specific error message]"
- "network timeout"

The `{state}` shows the current connection state, and `[timeout]` shows the configured timeout duration in milliseconds.

## Common Causes

1. **Network connectivity issues** (40% of cases)
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md lines 54-58 -->
   - High network latency
   - Packet loss
   - Intermittent connectivity
   - Network unreachability

2. **Message acknowledgment timeout** (30% of cases)
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-analysis.md lines 21-27 -->
   - Messages not acknowledged within 30 seconds
   - RPC communication failures between services
   - Server processing delays

3. **Channel operation timeout** (15% of cases)
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-analysis.md lines 110-120 -->
   - Channel attach taking too long
   - Channel detach not completing
   - State transition delays

4. **Configuration issues** (10% of cases)
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md lines 64-66 -->
   - Timeout values set too low for network conditions
   - Insufficient `realtimeRequestTimeout` setting
   - Low `httpMaxRetryDuration` for fallback hosts

5. **Temporary service issues** (5% of cases)
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md lines 59-62 -->
   - Service temporarily unavailable (503)
   - High server load
   - Infrastructure problems

## Resolution Steps

1. **Check SDK type and retry behavior**
   <!-- Source: Critical finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md lines 106-110 -->
   - **REST SDK**: Automatically retries - no action needed
   - **Realtime SDK**: Does NOT auto-retry to avoid duplicate messages - implement application-level retry

2. **For Realtime SDK users - implement retry logic**
   ```javascript
   // Handle timeout errors with application-level retry
   channel.publish('message', data, (err) => {
     if (err && err.code === 50003) {
       // Implement your retry logic here
       setTimeout(() => {
         channel.publish('message', data);
       }, 1000); // Start with 1 second delay
     }
   });
   ```
   <!-- Source: SDK behavior documented in https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md lines 106-110 -->

3. **Increase timeout configuration**
   ```javascript
   const ably = new Ably.Realtime({
     key: 'your-api-key',
     realtimeRequestTimeout: 45000, // Increase from default 10s to 45s
     httpMaxRetryDuration: 30000    // Increase HTTP retry duration
   });
   ```
   <!-- Source: Configuration options from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-analysis.md lines 137-139 -->

4. **Monitor for patterns**
   - Check if timeouts occur at specific times
   - Identify if specific operations consistently timeout
   - Review network path between client and Ably

5. **For persistent issues (>2 minutes)**
   - Check https://status.ably.com for service status
   - Review recent infrastructure or code changes
   - Consider regional connectivity issues

## Automatic Handling

<!-- Source: SDK behavior from https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md lines 106-110 and analysis patterns -->
- **REST SDK**: Automatically retries with exponential backoff
- **Realtime SDK**: Does NOT automatically retry (by design to prevent duplicate messages)
- **Connection recovery**: SDK attempts reconnection for connection timeouts
- **Fallback hosts**: Automatically tried when primary host times out (ably-js)

## Prevention

- Set appropriate timeout values based on your network conditions
- Monitor timeout patterns to identify infrastructure issues
- Use REST SDK for critical message publishing that requires automatic retry
- Implement application-level retry logic when using Realtime SDK
- Consider network optimization and regional deployment

## Performance Impact

This error indicates temporary delays but doesn't affect:
- Other channel operations
- Existing subscriptions (unless connection timeout)
- Messages already queued for delivery

Connection timeouts may cause:
- Brief message delivery delays
- Presence member updates
- Need to re-establish subscriptions

## Related Resources

- [Connection state management](https://ably.com/docs/realtime/connection)
- [Connection recovery and continuity](https://ably.com/docs/connect/states)
- [Timeout configuration](https://ably.com/docs/api/realtime-sdk#client-options)
- [Ably status page](https://status.ably.com)
- Related errors: [80014](./80014-connection-timeout.md) (connection-specific timeout), [50000](./50000-internal-error.md) (general server error)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 50003
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/50003-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (lines 92-93 for 50003 timeout guidance)
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No legacy FAQ content found for 50003
- Content Excluded: Detailed RPC communication failures (too internal)
- Recommendations Source: 
  - Retry logic guidance from knowledge file lines 106-110 (critical Realtime vs REST SDK difference)
  - Timeout configuration from analysis file lines 137-139
  - Resolution patterns from knowledge file lines 125-141
- Code Examples Rationale: 
  - Retry logic example included due to critical SDK behavior difference (knowledge lines 106-110)
  - Configuration example based on actual SDK options (analysis lines 137-139)
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Network issues from knowledge file lines 54-58
  - Cause 2: Message timeout from analysis file lines 21-27
  - Cause 3: Channel operations from analysis file lines 110-120
  - Cause 4: Configuration from knowledge file lines 64-66
  - Cause 5: Service issues from knowledge file lines 59-62
- Resolution Steps: 
  - Step 1: Critical SDK difference from knowledge file lines 106-110
  - Step 2: Retry logic necessity from knowledge file lines 106-110
  - Step 3: Configuration options from analysis file lines 137-139
  - Step 4: Monitoring guidance from knowledge file lines 125-141
  - Step 5: Status page reference standard practice
- Prevention: Based on resolution patterns from knowledge file lines 125-141
- Automatic Handling: SDK behaviors from knowledge file lines 106-110 and analysis file patterns
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 50003
2. Regenerate: Run `./bin/ably-os errors document-error-codes 50003 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->