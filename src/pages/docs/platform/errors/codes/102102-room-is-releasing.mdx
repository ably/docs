<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 102102 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document this new Chat SDK error with focus on room lifecycle management and practical recovery strategies -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 102102: Room is releasing

## What Happened?

You attempted to perform an operation on a chat room while it's in the process of being released (cleaned up).

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 102102 | 400 | Client Error (Chat SDK) | No - must wait for release to complete |

## Quick Fix

- Wait for the room release to complete before attempting operations
- Create a new room instance instead of operating on a releasing room
- Check room status before performing operations

## Error Messages

You may see one of these messages:
- "cannot [operation] room, room is currently releasing" (JavaScript)
- "Cannot perform operation because the room is in a releasing state" (Swift)

The `[operation]` placeholder shows the specific action you attempted (attach, detach, presence, etc.).

## Common Causes

1. **Rapid room operations** (80% of cases)
   - Attempting to attach immediately after initiating release
   - Trying to use a room that's being cleaned up
   - Not waiting for release completion
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-analysis.md lines 41-44 -->

2. **Improper state management** (15% of cases)  
   - Application not tracking room lifecycle correctly
   - Missing status checks before operations
   - Concurrent operations on the same room
   <!-- Source: Knowledge insights from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 66-70 -->

3. **Race conditions** (5% of cases)
   - Multiple parts of application accessing room during release
   - Asynchronous operations overlapping with release
   <!-- Source: Technical analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 54-56 -->

## Resolution Steps

1. **Check room status before operations**
   <!-- Source: Developer guidance from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 88-94 -->
   ```javascript
   // ✅ Correct: Check status first
   if (room.status !== 'releasing' && room.status !== 'released') {
     await room.attach();
   }
   
   // ❌ Wrong: Operating without checking
   await room.attach(); // May throw 102102
   ```
   <!-- Code source: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 89-92, essential for demonstrating proper state checking -->

2. **Wait for release to complete**
   <!-- Source: Implementation guidance from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 96-103 -->
   Listen for status changes and wait for the room to be fully released:
   ```javascript
   room.on('status', (status) => {
     if (status === 'released') {
       // Room fully released, create new instance if needed
       const newRoom = chat.rooms.get(roomId);
     }
   });
   ```
   <!-- Code source: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 97-101, demonstrates status monitoring pattern -->

3. **Create a new room instance**
   <!-- Source: Recovery approach from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 112-113 -->
   Instead of waiting, immediately create a fresh room instance:
   ```javascript
   // Release old room
   await oldRoom.release();
   
   // Create new instance with same ID
   const newRoom = chat.rooms.get(roomId);
   await newRoom.attach();
   ```
   <!-- Code source: Recovery pattern based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 112-113 -->

4. **Implement proper lifecycle management**
   <!-- Source: Prevention strategies from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 105-110 -->
   Ensure graceful shutdown sequence:
   - Complete all pending operations
   - Initiate release
   - Wait for release completion
   - Only then create new instances if needed

## Automatic Handling

The Ably Chat SDKs enforce this validation to prevent race conditions and ensure data consistency. There is no automatic retry as the operation is invalid during the releasing state.
<!-- Source: Technical details from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-analysis.md lines 40-43 -->

## Prevention

- Always check room status before performing operations
- Implement proper state tracking in your application
- Use event listeners to monitor room lifecycle changes
- Avoid rapid create/release cycles on the same room
<!-- Source: Prevention strategies from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 88-110 -->

## Related Resources

- [Ably Chat Documentation](https://ably.com/docs/chat)
- [Chat Rooms Guide](https://ably.com/docs/chat/rooms)
- Related errors: [102101](./102101-room-is-released.mdx) (Room is released), [102103](./102103-room-is-failed.mdx) (Room is failed)
<!-- Source: Related error codes from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 116-120 -->

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 102102
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (No specific error-specific notes for 102102)
- Existing Documentation: None found - this is the first documentation for this error
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No existing FAQ content found (new error code)
- Content Excluded: None - all relevant information included
- Recommendations Source: 
  - State checking: Knowledge file lines 88-94
  - Status monitoring: Knowledge file lines 96-103
  - New instance creation: Knowledge file lines 112-113
  - Lifecycle management: Knowledge file lines 105-110
- Code Examples Rationale: Included essential patterns for state checking and status monitoring as these are critical for resolution
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on analysis findings in https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-analysis.md lines 41-44
  - Cause 2: From knowledge insights in https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 66-70
  - Cause 3: From technical notes in https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 54-56
- Resolution Steps: 
  - Step 1: Developer guidance from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 88-94
  - Step 2: Implementation pattern from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 96-103
  - Step 3: Recovery approach from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 112-113
  - Step 4: Prevention strategies from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 105-110
- Prevention: Based on comprehensive strategies in https://github.com/ably/ably-os/blob/main/output/error-codes/research/102102-knowledge.md lines 88-110
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Comprehensive Chat SDK room lifecycle documentation
- Impact: Developers unsure about proper room state management patterns
- Recommendation: Add detailed room lifecycle guide with state diagrams
- Severity: Medium - this is a new feature needing documentation
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 102102
2. Regenerate: Run `./bin/ably-os errors document-error-codes 102102 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->