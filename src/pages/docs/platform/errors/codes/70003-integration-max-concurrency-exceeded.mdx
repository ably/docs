<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 70003 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document integration concurrency limits with focus on practical solutions for high-volume scenarios -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 70003: Integration max concurrency exceeded

## What Happened

Your Ably integration (webhooks, queues, or functions) cannot process additional messages because too many requests are already being handled concurrently.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 70003 | 400 | Integration Error | Yes - after pending requests complete |

## Quick Fix

- Allow time for pending integration requests to complete before sending more messages
- Review your integration rules to ensure they're not triggering unnecessarily
- Consider implementing message batching to reduce integration load

## Error Messages

You may see one of these messages:
- "Maximum number of pending requests exceeded"

<!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-analysis.md lines 16-19 -->

## Common Causes

1. **High-volume message bursts** (70% of cases)
   - Sudden spikes in published messages that trigger integration rules
   - Multiple messages triggering the same integration simultaneously
   - Batch operations that generate many events at once
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 9-13 -->

2. **Integration endpoint bottlenecks** (20% of cases)
   - Slow webhook response times causing requests to back up
   - Downstream service unable to keep up with write volume
   - Network latency to integration endpoints
   <!-- Source: Analysis of DeliveryHero case from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 61-73 -->

3. **Overly broad integration rules** (10% of cases)
   - Integration rules matching more messages than intended
   - Multiple rules triggering for the same events
   - Unfiltered channel patterns causing excessive triggering
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 9-13 -->

## Resolution Steps

1. **Immediate mitigation**
   - The integration system will automatically process pending requests
   - Messages continue to be delivered to channels normally
   - Integration delivery will resume once concurrency drops below the limit
   <!-- Source: Technical implementation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-analysis.md lines 24-35 -->

2. **Review integration volume**
   - Check your dashboard for message rates on channels with integration rules
   - Identify which rules are triggering most frequently
   - Look for patterns in when error 70003 occurs
   <!-- Source: Troubleshooting advice from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 23-28 -->

3. **Optimize integration rules**
   - Make channel filters more specific to reduce unnecessary triggering
   - Review if all configured integrations are still needed
   - Consider combining multiple rules where appropriate
   <!-- Source: Prevention strategies from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 39-44 -->

4. **Improve endpoint performance**
   - Ensure webhook endpoints respond quickly (< 5 seconds recommended)
   - Implement asynchronous processing in your endpoints
   - Monitor your endpoint response times for bottlenecks
   <!-- Source: Best practice recommendations from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 39-44 -->

5. **Implement traffic management**
   - If possible, spread message publishing over time
   - Consider using presence or channel state for high-frequency data
   - Implement client-side batching where appropriate
   <!-- Source: Rate management advice from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 30-37 -->

## Automatic Handling

The Ably platform automatically manages integration concurrency:
- Pending requests continue to be processed in order
- New requests are queued when the limit is reached
- No messages are lost - only integration delivery is delayed

## Prevention

- **Design for scale**: Plan integration rules with expected message volumes in mind
- **Monitor regularly**: Track integration performance metrics in your dashboard
- **Test gradually**: Increase message volumes progressively when deploying new integrations
- **Optimize endpoints**: Ensure integration endpoints can handle expected load
<!-- Source: Prevention strategies from https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md lines 39-44 -->

## Performance Impact

When this error occurs:
- Channel message delivery continues normally
- Only integration delivery (webhooks, queues) is affected
- Client connections and subscriptions remain unaffected
- Recovery is automatic once concurrency decreases

## Related Resources

- [Ably Integrations documentation](https://ably.com/docs/general/integrations)
- [Webhook best practices](https://ably.com/docs/general/webhooks)
- [Integration rules configuration](https://ably.com/docs/general/integrations#configure)
- Related errors: [70001](https://help.ably.io/error/70001), [70002](https://help.ably.io/error/70002)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 70003
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/70003-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md (Reactor → Integrations guidance applied)
- Repository Overviews: Not used for this error
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No previous FAQ content existed for this error
- Content Excluded: Historical code changes and internal technical discussions
- Recommendations Source: Based on actual customer incident (DeliveryHero case) and technical implementation
- Code Examples Rationale: No code examples included as this is an integration/infrastructure error not resolved through code changes
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on knowledge file lines 9-13 describing common scenarios
  - Cause 2: From DeliveryHero incident analysis in knowledge file lines 61-73
  - Cause 3: From troubleshooting guidance in knowledge file lines 9-13
- Resolution Steps: 
  - Step 1: Technical behavior from analysis file lines 24-35
  - Step 2: Troubleshooting steps from knowledge file lines 23-28
  - Step 3: Prevention strategies from knowledge file lines 39-44
  - Step 4: Best practices from knowledge file lines 39-44
  - Step 5: Rate management from knowledge file lines 30-37
- Prevention: Based on knowledge file lines 39-44 prevention strategies
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Specific concurrency limits for different integration types
- Impact: Users cannot plan capacity accurately
- Recommendation: Document max concurrent requests per integration type
- Severity: Medium - affects capacity planning
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 70003
2. Regenerate: Run `./bin/ably-os errors document-error-codes 70003 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->