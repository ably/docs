---
title: Messages
meta_description: "API reference for the Messages interface in the Ably Chat JavaScript SDK."
meta_keywords: "Ably Chat SDK, JavaScript, Messages API, subscribe, send, history, get, update, delete, chat messages"
---

The `Messages` interface provides methods for sending, receiving, and managing chat messages in a room. Access it via `room.messages`.

<Code>
```javascript
const messages = room.messages;
```
</Code>

## Properties

The `Messages` interface has the following properties:

<Table id='MessagesProperties'>

| Property | Description | Type |
| --- | --- | --- |
| reactions | Access to message reactions functionality for adding, removing, and subscribing to reactions on specific messages. | [MessageReactions](/docs/chat/api/javascript/message-reactions) |

</Table>

## Subscribe to messages <a id="subscribe"/>

<MethodSignature>{`messages.subscribe(listener: MessageListener): MessageSubscriptionResponse`}</MethodSignature>

Subscribe to chat message events in the room. This method allows you to listen for new messages and provides access to historical messages that occurred before the subscription was established.

The room must be [attached](/docs/chat/api/javascript/room#attach) for the listener to receive new message events.

<Code>
```javascript
const { unsubscribe, historyBeforeSubscribe } = messages.subscribe((event) => {
  console.log('Received message:', event.message.text);
});

// Get messages sent before subscribing
const history = await historyBeforeSubscribe();

// To stop receiving messages
unsubscribe();
```
</Code>

### Parameters <a id="subscribe-params"/>

The `subscribe()` method takes the following parameters:

<Table id='SubscribeParameters'>

| Parameter | Required | Description | Type |
| --- | --- | --- | --- |
| listener | Required | A callback function invoked when chat message events occur. | <Table id='MessageListener'/> |

</Table>

<Table id='MessageListener' hidden>

| Parameter | Description | Type |
| --- | --- | --- |
| event | The message event that was received. | <Table id='ChatMessageEvent'/> |

</Table>

<Table id='ChatMessageEvent' hidden>

| Property | Description | Type |
| --- | --- | --- |
| type | The type of the message event. | <Table id='ChatMessageEventType'/> |
| message | The message that was received. | [Message](/docs/chat/api/javascript/message) |

</Table>

<Table id='ChatMessageEventType' hidden>

| Value | Description |
| --- | --- |
| Created | A new chat message was received. The value is `message.created`. |
| Updated | A chat message was updated. The value is `message.updated`. |
| Deleted | A chat message was deleted. The value is `message.deleted`. |

</Table>

### Returns <a id="subscribe-returns"/>

`MessageSubscriptionResponse`

Returns an object with the following methods:

#### Unsubscribe from messages <a id="unsubscribe"/>

<MethodSignature>unsubscribe(): void</MethodSignature>

Call `unsubscribe()` to stop listening for message events.

#### Get messages from before the subscription started <a id="historyBeforeSubscribe"/>

<MethodSignature>{`historyBeforeSubscribe(params?: HistoryBeforeSubscribeParams): Promise<PaginatedResult<Message>>`}</MethodSignature>

Get messages sent to the room from before the subscription was established.

##### Parameters <a id="historyBeforeSubscribe-params"/>

The `historyBeforeSubscribe()` method takes the following parameters:

<Table id='HistoryBeforeSubscribeParameters'>

| Parameter | Required | Description | Type |
| --- | --- | --- | --- |
| params | Optional | Query parameters to filter message retrieval. Messages are returned in order of most recent to oldest. | <Table id='HistoryBeforeSubscribeParams'/> |

</Table>

<Table id='HistoryBeforeSubscribeParams' hidden>

| Property | Required | Description | Type |
| --- | --- | --- | --- |
| limit | Optional | Maximum number of messages to retrieve. Default: `100`. | Number |
| start | Optional | Start of the time window to query, as a Unix timestamp in milliseconds. | Number |
| end | Optional | End of the time window to query, as a Unix timestamp in milliseconds. | Number |

</Table>

##### Returns <a id="historyBeforeSubscribe-returns"/>

`Promise<PaginatedResult<Message>>`

Returns a promise. The promise is fulfilled with a [`PaginatedResult`](#PaginatedResult) containing an array of [Message](/docs/chat/api/javascript/message) objects, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object.

## Send a message <a id="send"/>

<MethodSignature>{`messages.send(params: SendMessageParams): Promise<Message>`}</MethodSignature>

Send a message to the chat room. The message will be delivered to all subscribers in real-time.

This method uses the Ably Chat REST API and does not require the room to be attached.

<Code>
```javascript
const message = await messages.send({
  text: 'Hello, world!'
});

console.log('Message sent with serial:', message.serial);
```
</Code>

### Parameters <a id="send-params"/>

The `send()` method takes the following parameters:

<Table id='SendParameters'>

| Parameter | Required | Description | Type |
| --- | --- | --- | --- |
| params | Required | Message parameters containing the text and optional metadata/headers. | <Table id='SendMessageParams'/> |

</Table>

<Table id='SendMessageParams' hidden>

| Property | Required | Description | Type |
| --- | --- | --- | --- |
| text | Required | The text content of the message. | String |
| metadata | Optional | Extra information attached to the message for features like animations or linking to external resources. | <Table id='MessageMetadata'/> |
| headers | Optional | Additional information in Ably message extras, usable for features like livestream timestamping or message flagging. | <Table id='MessageHeaders'/> |

</Table>

<Table id='MessageMetadata' hidden>

| Property | Description | Type |
| --- | --- | --- |
| | Key-value pairs that can be attached to a message for features like animations, styling hints, or links to external resources. Keys must be non-empty strings. Values can be any JSON-serializable type. Always present on a message, defaults to an empty object if not provided. | `Record<string, any>` |

</Table>

<Table id='MessageHeaders' hidden>

| Property | Description | Type |
| --- | --- | --- |
| | Key-value pairs stored in Ably message extras, accessible to integrations such as webhooks, queues, or serverless functions. Keys must be non-empty strings. Always present on a message, defaults to an empty object if none provided. | `Record<string, number \| string \| boolean \| null \| undefined>` |

</Table>

### Returns <a id="send-returns"/>

`Promise<Message>`

Returns a promise. The promise is fulfilled with the sent [Message](/docs/chat/api/javascript/message) object, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object.

## Get message history <a id="history"/>

<MethodSignature>{`messages.history(params: HistoryParams): Promise<PaginatedResult<Message>>`}</MethodSignature>

Get messages that have been previously sent to the chat room. This method retrieves historical messages based on the provided query options, allowing you to paginate through message history, filter by time ranges, and control the order of results.

This method uses the Ably Chat REST API and does not require the room to be attached.

<Code>
```javascript
const history = await messages.history({
  limit: 50,
  orderBy: OrderBy.NewestFirst
});

console.log('Messages:', history.items);

// Get next page if available
if (history.hasNext()) {
  const nextPage = await history.next();
}
```
</Code>

### Parameters <a id="history-params"/>

The `history()` method takes the following parameters:

<Table id='HistoryParameters'>

| Parameter | Required | Description | Type |
| --- | --- | --- | --- |
| params | Required | Query parameters to filter and control message retrieval. | <Table id='HistoryParams'/> |

</Table>

<Table id='HistoryParams' hidden>

| Property | Required | Description | Type |
| --- | --- | --- | --- |
| limit | Optional | Maximum number of messages to retrieve. Default: `100`. | Number |
| orderBy | Optional | Order in which to return results: `'oldestFirst'` or `'newestFirst'`. Default: `'newestFirst'`. | <Table id='OrderBy'/> |
| start | Optional | Start of the time window to query, as a Unix timestamp in milliseconds. | Number |
| end | Optional | End of the time window to query, as a Unix timestamp in milliseconds. | Number |

</Table>

<Table id='OrderBy' hidden>

| Value | Description |
| --- | --- |
| OldestFirst | Return results starting with the oldest messages. The value is `oldestFirst`. |
| NewestFirst | Return results starting with the newest messages. The value is `newestFirst`. |

</Table>

### Returns <a id="history-returns"/>

`Promise<PaginatedResult<Message>>`

Returns a promise. The promise is fulfilled with a [`PaginatedResult`](#PaginatedResult) containing an array of [Message](/docs/chat/api/javascript/message) objects, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object.

## Get a specific message <a id="get"/>

<MethodSignature>{`messages.get(serial: string): Promise<Message>`}</MethodSignature>

Get a specific message by its unique serial identifier.

This method uses the Ably Chat REST API and does not require the room to be attached.

<Code>
```javascript
const message = await messages.get('01234567890@abcdefghij');
console.log('Message text:', message.text);
```
</Code>

### Parameters <a id="get-params"/>

The `get()` method takes the following parameters:

<Table id='GetParameters'>

| Parameter | Required | Description | Type |
| --- | --- | --- | --- |
| serial | Required | The unique serial identifier of the message to retrieve. | String |

</Table>

### Returns <a id="get-returns"/>

`Promise<Message>`

Returns a promise. The promise is fulfilled with the [Message](/docs/chat/api/javascript/message) object matching the given serial, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object.

## Update a message <a id="update"/>

<MethodSignature>{`messages.update(serial: string, updateParams: UpdateMessageParams, details?: OperationDetails): Promise<Message>`}</MethodSignature>

Update a message in the chat room. This method modifies an existing message's content, metadata, or headers. The update creates a new version of the message while preserving the original serial identifier. Subscribers will receive an update event in real-time.

This method uses the Ably Chat REST API and does not require the room to be attached.

<Code>
```javascript
const updatedMessage = await messages.update(
  message.serial,
  { text: 'Updated message text' },
  { description: 'Fixed typo' }
);

console.log('Message updated:', updatedMessage.version);
```
</Code>

### Parameters <a id="update-params"/>

The `update()` method takes the following parameters:

<Table id='UpdateParameters'>

| Parameter | Required | Description | Type |
| --- | --- | --- | --- |
| serial | Required | The unique identifier of the message to update. | String |
| updateParams | Required | The new message content and properties. | <Table id='UpdateMessageParams'/> |
| details | Optional | Details to record about the update action. | <Table id='OperationDetails'/> |

</Table>

<Table id='UpdateMessageParams' hidden>

| Property | Required | Description | Type |
| --- | --- | --- | --- |
| text | Required | The new text content of the message. | String |
| metadata | Optional | New metadata for the message. | <Table id='MessageMetadata'/> |
| headers | Optional | New headers for the message. | <Table id='MessageHeaders'/> |

</Table>

<Table id='OperationDetails' hidden>

| Property | Required | Description | Type |
| --- | --- | --- | --- |
| description | Optional | A human-readable description of why the operation was performed. | String |
| metadata | Optional | Additional metadata about the operation. | <Table id='OperationMetadata'/> |

</Table>

<Table id='OperationMetadata' hidden>

| Property | Description | Type |
| --- | --- | --- |
| | Metadata supplied to a message update or deletion request. Do not use metadata for authoritative information. There is no server-side validation. When reading the metadata, treat it like user input. | `Record<string, string>` |

</Table>

### Returns <a id="update-returns"/>

`Promise<Message>`

Returns a promise. The promise is fulfilled with the updated [Message](/docs/chat/api/javascript/message) object, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object. The returned message will have its `action` property set to `updated`.

## Delete a message <a id="delete"/>

<MethodSignature>{`messages.delete(serial: string, details?: OperationDetails): Promise<Message>`}</MethodSignature>

Delete a message in the chat room. This method performs a "soft delete" on a message, marking it as deleted rather than permanently removing it. The deleted message will still be visible in message history but will be flagged as deleted. Subscribers will receive a deletion event in real-time.

This method uses the Ably Chat REST API and does not require the room to be attached.

<Code>
```javascript
const deletedMessage = await messages.delete(
  message.serial,
  { description: 'Removed inappropriate content' }
);

console.log('Message deleted:', deletedMessage.action);
```
</Code>

### Parameters <a id="delete-params"/>

The `delete()` method takes the following parameters:

<Table id='DeleteParameters'>

| Parameter | Required | Description | Type |
| --- | --- | --- | --- |
| serial | Required | The unique identifier of the message to delete. | String |
| details | Optional | Details to record about the delete action. | <Table id='OperationDetails'/> |

</Table>

### Returns <a id="delete-returns"/>

`Promise<Message>`

Returns a promise. The promise is fulfilled with the deleted [Message](/docs/chat/api/javascript/message) object, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object. The returned message will have its `action` property set to `deleted`.

## PaginatedResult <a id="PaginatedResult"/>

A `PaginatedResult` represents a page of results from a paginated query such as [history()](#history) or [historyBeforeSubscribe()](#historyBeforeSubscribe).

### Properties

<Table id='PaginatedResultProperties'>

| Property | Description | Type |
| --- | --- | --- |
| items | The current page of results. | [`Message[]`](/docs/chat/api/javascript/message) |

</Table>

### Check for more pages <a id="PaginatedResult-hasNext"/>

<MethodSignature>hasNext(): boolean</MethodSignature>

Returns `true` if there are more pages available by calling `next()`.

### Check if last page <a id="PaginatedResult-isLast"/>

<MethodSignature>isLast(): boolean</MethodSignature>

Returns `true` if this is the last page of results.

### Get next page <a id="PaginatedResult-next"/>

<MethodSignature>{`next(): Promise<PaginatedResult<Message> | null>`}</MethodSignature>

Returns a promise. The promise is fulfilled with the next page of results, or `null` if there are no more pages, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object.

### Get first page <a id="PaginatedResult-first"/>

<MethodSignature>{`first(): Promise<PaginatedResult<Message>>`}</MethodSignature>

Returns a promise. The promise is fulfilled with the first page of results, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object.

### Get current page <a id="PaginatedResult-current"/>

<MethodSignature>{`current(): Promise<PaginatedResult<Message>>`}</MethodSignature>

Returns a promise. The promise is fulfilled with the current page of results, or rejected with an [`ErrorInfo`](/docs/chat/api/javascript/chat-client#errorinfo) object.

## Example

<Code>
```javascript
import { ChatMessageEventType, OrderBy } from '@ably/chat';

const room = await chatClient.rooms.get('my-room');
await room.attach();

// Subscribe to messages
const { unsubscribe, historyBeforeSubscribe } = room.messages.subscribe((event) => {
  const msg = event.message;

  switch (event.type) {
    case ChatMessageEventType.Created:
      console.log(`${msg.clientId}: ${msg.text}`);
      break;
    case ChatMessageEventType.Updated:
      console.log(`Message updated: ${msg.text}`);
      break;
    case ChatMessageEventType.Deleted:
      console.log(`Message deleted: ${msg.serial}`);
      break;
  }
});

// Get recent history
const history = await room.messages.history({ limit: 10 });
history.items.forEach(msg => {
  console.log(`[History] ${msg.clientId}: ${msg.text}`);
});

// Send a message
const sent = await room.messages.send({ text: 'Hello everyone!' });

// Update the message
await room.messages.update(sent.serial, { text: 'Hello everyone! (edited)' });

// Clean up
unsubscribe();
```
</Code>
