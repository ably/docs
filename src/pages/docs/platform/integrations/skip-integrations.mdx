---
title: Skip integrations
meta_description: "Learn how to skip integrations on a per-message basis, including examples for skipping all or specific integration rules."
meta_keywords: "Ably, skip integrations, skipRule, message extras, privileged headers, integration rules, Control API, channel messaging"
---

Privileged users can skip integrations on a per-message basis, providing greater control and flexibility when publishing messages to a channel. Skipping integration helps avoid infinite loops, for example, when an integration republishes a message to the same channel, potentially triggering itself again.

A strong use case for skipping integrations is in chat applications. For example, a moderation service publishes a command telling clients to edit or delete a message. That command should not trigger further moderation events by itself.

<Aside data-type='note'>
Clients must have the [privileged-headers](/docs/auth/capabilities#capability-operations) capability enabled in their Ably [API key](/docs/auth) or [token](/docs/auth/token) to skip integrations.
</Aside>

## Skip all integrations

To skip all integration rules for a specific message, set the `skipRule` field to `'*'` in the `privileged` section of the message [`extras`](/docs/api/rest-sdk/messages#extras).

The following example shows how to skip all integration rules when publishing a message to a channel:

<Code>
```javascript
const rest = new Ably.Rest('{{API_KEY}}');
const channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}');
await channel.publish({
  name: 'event_name',
  data: 'event_data',
  extras: {
    privileged: {
      skipRule: '*'
    }
  }
});
```

```nodejs
const rest = new Ably.Rest('{{API_KEY}}');
const channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}');
await channel.publish({
  name: 'event_name',
  data: 'event_data',
  extras: {
    privileged: {
      skipRule: '*'
    }
  }
});
```

```ruby
  rest = Ably::Rest.new('{{API_KEY}}')
  channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}')
  while true
    channel.publish 'event', 'data', extras: { { 'privileged' => { 'skipRule' => '*' } }
  end
```

```python
  rest = AblyRest('{{API_KEY}}')
  channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}')
  extras = {
    "privileged": {
      "skipRule": "*"
    }
  }

  await channel.publish(Message(name='message', data="abc", extras=extras))
```

```php
  $rest = new Ably\AblyRest('{{API_KEY}}');
  $channel = $rest->channels->get('{{RANDOM_CHANNEL_NAME}}');
  $channel->publish(
    'event_name',
    ['field' => 'value'],
    null,
    [
        'privileged' => [
            'skipRule' => '*',
        ],
    ]
  );
```

```java
  AblyRest rest = new AblyRest("{{API_KEY}}");
  Channel channel = rest.channels.get("{{RANDOM_CHANNEL_NAME}}");

  // Using Google gson for JSON
  String extrasJson = "{ \"privileged\": { \"skipRule\": \"*\" } }";
  JsonObject extras = JsonParser.parseString(extrasJson).getAsJsonObject();
  channel.publish(
      new Message(
          "event_name",
          "event_data",
          new MessageExtras(extras)
      )
  );
```

```csharp
  AblyRest rest = new AblyRest("{{API_KEY}}");
  var channel = rest.Channels.Get("{{RANDOM_CHANNEL_NAME}}");

  // Using Newtonsoft for JSON
  string extrasJson = @"{'privileged': { 'skipRule': '*' }}";
  MessageExtras extras = new MessageExtras(extrasJson);
  Message message = new Message("event", "data", null, extras);
  channel.Publish(message);
```

```objc
  ARTRest *rest = [[ARTRest alloc] initWithKey:@"{{API_KEY}}"];
  ARTRestChannel *channel = [rest.channels get:@"{{RANDOM_CHANNEL_NAME}}"];
  ARTJsonObject *extras = @{
      @"privileged": @{@"skipRule": @"*"}
  };
  [channel publish:@"event" data:@"data" extras:extras];
```

```swift
  let rest = ARTRest(key: "{{API_KEY}}")
  let channel = rest.channels.get("{{RANDOM_CHANNEL_NAME}}")
  let extras: NSDictionary = ["privileged": ["skipRule": "*"]]
  channel.publish("event", data: "data", extras: extras as ARTJsonCompatible)
```

```go
  rest, err := ably.NewREST(ably.WithKey("{{API_KEY}}"))
  channel := rest.Channels.Get("{{RANDOM_CHANNEL_NAME}}")
  privileged := make(map[string]string)
  privileged["skipRule"] = "*"
  extras := make(map[string]interface{})
  extras["privileged"] = privileged
  err := channel.PublishMultiple(context.Background(), []*ably.Message{
		{Name: "event", Data: "data", Extras: extras},
	})

```
</Code>

## Skip specific integration rules

You can also skip specific integration rules by including their ruleId in an array passed to skipRule. Rule IDs can be found in the Integrations tab of your Ably [dashboard](https://ably.com/dashboard/any), via the Control API, or in the message envelope.

The following example shows how to skip specific integration rules when publishing a message to a channel:


<Code>
```javascript
const rest = new Ably.Rest('{{API_KEY}}');
const channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}');
await channel.publish({
  name: 'event_name',
  data: 'event_data',
  extras: {
    privileged: { skipRule: ['rule_id_1'] }
  }
})
```

```nodejs
const rest = new Ably.Rest('{{API_KEY}}');
const channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}');
await channel.publish({
  name: 'event_name',
  data: 'event_data',
  extras: {
    privileged: { skipRule: ['rule_id_1'] }
  }
})
```

```ruby
  rest = Ably::Rest.new('{{API_KEY}}')
  channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}')
  while true
    channel.publish 'event', 'data', extras: { { 'privileged' => { 'skipRule' => ['rule_id_1'] } }
  end
```

```python
  rest = AblyRest('{{API_KEY}}')
  channel = rest.channels.get('{{RANDOM_CHANNEL_NAME}}')
  extras = {
    "privileged": {
      "skipRule": ["rule_id_1"]
    }
  }

  await channel.publish(Message(name='message', data="abc", extras=extras))
```

```php
  $rest = new Ably\AblyRest('{{API_KEY}}');
  $channel = $rest->channels->get('{{RANDOM_CHANNEL_NAME}}');
  $channel->publish(
    'event_name',
    ['field' => 'value'],
    null,
    [
        'privileged' => [
            'skipRule' => ['rule_id_1'],
        ],
    ]
  );
```

```java
  AblyRest rest = new AblyRest("{{API_KEY}}");
  Channel channel = rest.channels.get("{{RANDOM_CHANNEL_NAME}}");

  // Using Google gson for JSON
  String extrasJson = "{ \"privileged\": { \"skipRule\": [\"rule_id_1\"] } }";
  JsonObject extras = JsonParser.parseString(extrasJson).getAsJsonObject();
  channel.publish(
      new Message(
          "event_name",
          "event_data",
          new MessageExtras(extras)
      )
  );
```

```csharp
  AblyRest rest = new AblyRest("{{API_KEY}}");
  var channel = rest.Channels.Get("{{RANDOM_CHANNEL_NAME}}");

  // Using Newtonsoft for JSON
  string extrasJson = @"{'privileged': { 'skipRule': ['rule_id_1'] }}";
  MessageExtras extras = new MessageExtras(extrasJson);
  Message message = new Message("event", "data", null, extras);
  channel.Publish(message);
```

```objc
  ARTRest *rest = [[ARTRest alloc] initWithKey:@"{{API_KEY}}"];
  ARTRestChannel *channel = [rest.channels get:@"{{RANDOM_CHANNEL_NAME}}"];
  ARTJsonObject *extras = @{
      @"privileged": @{@"skipRule": @[@"rule_id_1"]}
  };
  [channel publish:@"event" data:@"data" extras:extras];
```

```swift
  let rest = ARTRest(key: "{{API_KEY}}")
  let channel = rest.channels.get("{{RANDOM_CHANNEL_NAME}}")
  let extras: NSDictionary = ["privileged": ["skipRule": ["rule_id_1"]]]
  channel.publish("event", data: "data", extras: extras as ARTJsonCompatible)
```

```go
  rest, err := ably.NewREST(ably.WithKey("{{API_KEY}}"))
  channel := rest.Channels.Get("{{RANDOM_CHANNEL_NAME}}")
	privileged := make(map[string][]string)
	privileged["skipRule"] = []string{"rule_id_1"}
	extras := make(map[string]interface{})
  extras["privileged"] = privileged
	err := channel.PublishMultiple(context.Background(), []*ably.Message{
		{Name: "event", Data: "data", Extras: extras},
	})

```
</Code>
