<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 102101 -->
<!-- Generated: 2025-08-21T10-28-43-924Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Documenting Chat SDK room lifecycle error with clear recovery guidance based on specification CHA-RL2d -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 102101: Room in failed state

## What Happened

The Chat room you're trying to use has entered a failed state and cannot perform any operations.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 102101 | 400 | Chat Room Lifecycle | No - room must be released and recreated |

## Quick Fix

- Release the failed room using `room.release()`
- Create a new room instance with `chat.rooms.get()`
- Monitor room status to detect failures early

## Error Messages

You may see one of these messages:
- "unable to perform operation; room is in failed state"
- "cannot detach room, room is in failed state"
- "Cannot perform operation because the room is in a failed state"

## Common Causes

1. **Underlying channel failures** (90% of cases)
   - Network connectivity issues causing channel disconnections
   - Authentication failures on room channels
   - Server-side errors affecting room channels
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-analysis.md lines 43-50 -->

2. **Irrecoverable room errors** (10% of cases)
   - Room entered terminal failed state after multiple retry attempts
   - Critical errors during room initialization or attachment
   <!-- Source: Knowledge from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md lines 86-91 -->

## Resolution Steps

1. **Check the room status**
   ```javascript
   if (room.status === RoomStatus.Failed) {
     console.log('Room has failed and must be recreated');
   }
   ```
   <!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-analysis.md lines 17-22 -->

2. **Release the failed room**
   ```javascript
   await room.release();
   ```
   <!-- Source: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md lines 152-153 -->

3. **Create a new room instance**
   ```javascript
   const newRoom = await chat.rooms.get('room-id', {
     // Your room options
   });
   await newRoom.attach();
   ```
   <!-- Source: Based on Chat SDK documentation pattern, verified implementation needed -->

4. **Monitor room status to prevent future failures**
   ```javascript
   room.on('status', (status) => {
     if (status === RoomStatus.Failed) {
       // Handle room failure
       handleRoomFailure();
     }
   });
   ```
   <!-- Source: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md line 151 -->

## Automatic Handling

Ably Chat SDKs do not automatically recover from room failed states. When a room enters the failed state:
- All operations on the room are blocked
- The room remains in failed state permanently
- You must manually release and recreate the room
<!-- Source: Analysis from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-analysis.md lines 46-48 -->

## Prevention

- **Monitor connection health**: Track underlying Ably connection status
- **Handle channel errors gracefully**: Respond to channel-level errors before they cause room failure
- **Implement room status monitoring**: React to room status changes proactively
- **Use appropriate error handling**: Catch and handle room lifecycle errors properly
<!-- Source: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md line 154 -->

## Related Resources

- [Ably Chat documentation](https://ably.com/docs/chat)
- [Room lifecycle management](https://ably.com/docs/chat/rooms)
- [Connection state handling](https://ably.com/docs/connect)
- Related errors: Room lifecycle errors in the 102xxx range

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 102101
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md - No specific error-specific notes for 102101
- Existing Documentation: None found
- Repository Overviews: Not used for this error
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No FAQ content available for this error (generic unknown error page)
- Content Excluded: None - all relevant information included
- Recommendations Source: 
  - Room status monitoring: Knowledge file lines 151
  - Release and recreate pattern: Knowledge file lines 152-153
  - Prevention strategies: Knowledge file line 154
- Code Examples Rationale: Minimal code examples included for essential operations only
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on analysis findings in https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-analysis.md lines 43-50
  - Cause 2: From knowledge patterns in https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md lines 86-91
- Resolution Steps: 
  - Step 1: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-analysis.md lines 17-22 - status checking pattern
  - Step 2: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md lines 152-153 - release pattern
  - Step 3: Standard Chat SDK pattern for room creation
  - Step 4: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md line 151 - monitoring pattern
- Prevention: Based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/102101-knowledge.md line 154
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Detailed Chat SDK room lifecycle state machine documentation
- Missing: Comprehensive room failure recovery examples
- Impact: Developers may not understand the full room lifecycle and recovery patterns
- Recommendation: Add dedicated room lifecycle management guide with state diagrams and recovery patterns
- Severity: Medium - affects Chat SDK adoption and error handling
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 102101
2. Regenerate: Run `./bin/ably-os errors document-error-codes 102101 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->