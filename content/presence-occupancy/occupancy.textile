---
title: Occupancy
meta_description: "The occupancy feature returns metrics relating to clients attached to a channel."
---

The occupancy feature returns metrics relating to clients attached to a channel. Occupancy events can be retrieved in real time, with REST requests, or integrated with webhooks and integrations.

h2(#occupancy-payload). Occupancy payload structure

When called, occupancy will return a JSON payload containing a @metrics@ payload inside of the @data@ payload. The metrics payload will contain all the metrics subscribed too, if subscribing to only a single category using "channel mode flags":/channels/options/LINK-ME, then only that member will be returned.

Example inband channel occupancy message:

```[json]
{
  name: '[meta]occupancy',
  id: 'V12G5ABc_M:0:0',
  timestamp: 1612286351217,
  clientId: undefined,
  connectionId: undefined,
  connectionKey: undefined,
  data: {
    metrics: {
      connections: 1,
      publishers: 1,
      subscribers: 1,
      presenceConnections: 1,
      presenceMembers: 0,
      presenceSubscribers: 1
    }
  },
  encoding: null,
  extras: undefined,
  size: undefined
}
```

Example response of a single category, @connections@, being subscribed to:

```[json]
{
  data: {
    metrics: {
      connections: 1,
    }
  },
}
```

h2(#occupancy-metrics). Occupancy metric categories

An occupancy request will provide the following categories:

- connections := the number of connections
- publishers := the number of connections that are authorised to publish
- subscribers := the number of connections that are authorised to subscribe to messages
- presenceSubscribers := the number of connections that are authorised to subscribe to presence messages
- presenceConnections := the number of connections that are authorised to enter members into the presence channel
- presenceMembers := the number of members currently entered into the presence channel

h2(#retrieve-occupancy). Retrieve channel occupancy

There are a number of ways to retrieve and update channel occupancy:

* In real time with "channel options":/channels/options/
* One time requests with a "@channelDetails@":/api/rest-sdk/channel-status REST request
* Configure a @channel.occupancy@ rule source with "integrations":/integrations 

CAVEAT-INPUT

  You may also receive incidental occupancy updates when a lifecycle metachannel updates. However, it's not recommended to rely on these updates to monitor occupancy.

h3(#realtime-occupancy). Realtime occupancy updates

The inband channel occupancy feature enables a client to subscribe to occupancy events related to a channel. Events are then delivered to that client as messages on the channel, enabling you to view the number of occupants attached to a channel and specific metrics about their connections.

Read more in our "channel options section":/channels/options/index.textile#occupancy.

h3(#one-off-requests). One off occupancy requests

To get a snapshot of a channel's current occupancy send a REST request querying a single channel, or enumerating through channels, for "@channelDetails@":/api/rest-sdk/channel-status to return a "@channelStatus@":/api/rest-sdk/channel-status#channel-status object with occupancy details within.

h3(#integrations). Integrations

You can also use an "integration rule":/integrations with **Channel Occupancy** set as the **Source** to export occupancy to a third party system or set triggers based on occupancy events. 

h2(#see-also). See also

Please refer to the following resources for more information:

* "Inband channel occupancy tutorial":/tutorials/channel-occupancy-events
* "Channel metadata":/LINK-ME
* "Metachannels":/LINK-ME
* "Channel parameters documentation":/LINK-ME
