---
title: "Error 80008 - Connection recovery failed"
meta_description: "Information and troubleshooting for Ably error code 80008 - Connection recovery failed when resuming after extended disconnection"
meta_keywords: "Ably, error, error codes, 80008, connection recovery, connection expired, resume failed, reconnection"
---

{/* Generated by: ably-os errors document-error-codes */}
{/* Repository: https://github.com/ably/ably-os */}
{/* Command: ./bin/ably-os errors document-error-codes 80008 */}
{/* Generated: 2025-11-07T08-36-41-586Z */}
{/* Sources:
     - Analysis: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
*/}
{/* Key Approach: Simple structure used as this error has a single primary cause - connection recovery attempted after 2-minute window */}
{/* Citations: Complete source attribution with line numbers available at bottom of document */}
{/* URL Validation Completed: 2025-11-07T08-45-00-000Z */}
{/* External URLs verified: 5 | Corrected: 2 | Exempted internal: 4 */}

This error occurs when your app tries to resume a previous connection to Ably, but the 2-minute recovery window has expired. The connection state has been cleaned up and a fresh connection must be established.

| Error code | HTTP status code | Category | Retryable |
| ---------- | ---------------- | -------- | --------- |
| 80008 | 400 (sometimes 404) | Connection error | No |

## Impact

This error affects connection recovery:

- Your app will establish a fresh connection automatically instead of resuming the previous one.
- All channels will reattach without the `resume` flag, meaning message continuity is lost.
- Presence members need to re-enter the presence set.
- Messages sent during the offline period might be missed unless you retrieve them using history.

This is a non-fatal error. Ably SDKs automatically establish a new connection when recovery fails, so your application will continue to function.

## Troubleshooting

{/* Source: Analysis finding from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-analysis.md lines 23-27 */}
This error has two variations but the same root cause - attempting recovery after the 2-minute window:

### Connection recovery window expired

| Error messages |
| -------------- |
| Unable to recover connection (connection expired) |
| Unable to recover connection (unretrievable) |

This occurs when:

- Your app has been disconnected for more than 2 minutes
- Mobile apps have been backgrounded for extended periods
- Devices wake from sleep mode after more than 2 minutes
- Network outages last longer than the recovery window
- Connection state has been cleaned up from the server

To handle this properly:

1. **Accept the fresh connection**: The SDK automatically establishes a new connection - no action required.
{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-knowledge.md lines 146-148 */}

2. **Retrieve missed messages**: Use the history API if you need messages sent while offline:
   - See [History documentation](https://ably.com/docs/realtime/history) for retrieving messages
   - Store the timestamp of your last received message to query from that point
{/* Source: Analysis from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-analysis.md lines 81-82 */}

3. **Restore application state**:
   - Channels will reattach automatically but without continuity
   - Re-enter presence if your app uses presence features
   - Rebuild any connection-dependent state
{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-knowledge.md lines 145-148 */}

## Prevention

{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-knowledge.md lines 58-75 */}
To minimize the impact of connection recovery failures:

- **App lifecycle management**: Monitor foreground/background transitions and attempt reconnection quickly when your app returns to foreground.
- **Connection monitoring**: Implement connection state monitoring to detect disconnections early.
- **Message continuity**: If complete message continuity is critical, design your app to use the history API to retrieve missed messages after fresh connections.
- **State management**: Don't rely entirely on connection state for critical application data - implement local caching for important information.

## Understanding the 2-minute recovery window

{/* Source: Analysis from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-analysis.md lines 51-54 */}
Ably maintains connection state for 2 minutes (120 seconds) after disconnection:

- **Within 2 minutes**: Connections can resume exactly where they left off with full message continuity
- **After 2 minutes**: Connection state is cleaned up to free server resources
- **Fresh connection**: A new connection is established but without the previous state

This balance allows for quick recovery from brief disconnections while preventing resource buildup on the server.

## Related errors

The following errors are related to error code 80008:

| Error code | Description |
| ---------- | ----------- |
| [80002 - Connection suspended](/docs/platform/errors/codes/80002) | Occurs when connection enters suspended state after 2+ minutes disconnected. |
| [80003 - Connection closed](/docs/platform/errors/codes/80003) | Connection has been explicitly closed or terminated. |
| [80000 - Connection failed](/docs/platform/errors/codes/80000) | General connection failure that may lead to recovery attempts. |

## Need further help?

Contact [Ably support](https://ably.com/support) if you're still experiencing issues after trying the steps listed above.

You'll need to provide:

- Your account ID and app ID.
- The full error message including the error code.
- Steps to reproduce the issue.
- Any relevant code snippets (without any sensitive credentials).
- The SDK and version you're using.

### Resources

The following resources provide further context or assistance with this error:

- [Connection state recovery](https://ably.com/docs/realtime/connection#connection-state-recovery)
- [Connection states explained](https://ably.com/docs/realtime/connection)
- [History API](https://ably.com/docs/realtime/history)
- [Presence documentation](https://ably.com/docs/realtime/presence)

{/* =============================================== */}
{/* INTERNAL DOCUMENTATION (NOT RENDERED) */}
{/* =============================================== */}

{/* SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md (No specific notes for 80008)
- Existing Documentation: None existed
*/}

{/* CONTENT DECISIONS:
- FAQ Content Preserved: Knowledge base guidance from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/80008-knowledge.md lines 9-111
- Content Excluded: Specific SDK bugs mentioned in Slack discussions (Java 1.2.21, Go pre-1.2.15) as these are historical issues
- Recommendations Source:
  - Fresh connection acceptance: Knowledge file lines 30-31
  - History API usage: Analysis file lines 81-82, Knowledge file lines 37-57
  - State restoration: Knowledge file lines 145-148
- Code Examples Rationale: No code examples included as this error is handled automatically by SDKs
*/}

{/* ATTRIBUTION BY SECTION:
- Error Description: Based on knowledge file lines 7-8 and analysis lines 9-10
- Impact Section:
  - Fresh connection: Analysis lines 23-27
  - Channel reattachment: Analysis lines 66-68
  - Message loss: Knowledge lines 19-20
- Troubleshooting:
  - Error variations: Analysis lines 14-27
  - Recovery window: Analysis lines 51-54
  - Solutions: Knowledge lines 30-57
- Prevention: Knowledge lines 58-75
- 2-minute window explanation: Analysis lines 51-54, Knowledge lines 24-28
*/}

{/* IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 80008
2. Regenerate: Run `./bin/ably-os errors document-error-codes 80008 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/b819713/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
*/}