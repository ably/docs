---
title: "Error 40009 - Maximum message length exceeded"
meta_description: "Information and troubleshooting for Ably error code 40009 - Maximum message length exceeded"
meta_keywords: "Ably, error, error codes, 40009, message size, payload too large, size limit"
---

{/* Generated by: ably-os errors document-error-codes */}
{/* Repository: https://github.com/ably/ably-os */}
{/* Command: ./bin/ably-os errors document-error-codes 40009 */}
{/* Generated: 2025-11-07T01-37-30-412Z */}
{/* Sources:
     - Analysis: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
*/}
{/* Key Approach: Documentation based on real SDK implementations and support history, focusing on practical resolution */}
{/* Citations: Complete source attribution with line numbers available at bottom of document */}

The message you're trying to publish exceeds the maximum size limit allowed for your Ably package tier.

| Error code | HTTP status code | Category | Retryable |
| ---------- | ---------------- | -------- | --------- |
| 40009 | 400 / 413 | Client error (message validation) | No |

## Error messages

The following error messages can be returned with error code 40009:

| Message | Description |
| ------- | ----------- |
| Maximum message length exceeded | Generic error when a single message exceeds the limit. |
| Maximum message length exceeded (was `{size}` bytes of which data was `{dataSize}` bytes, limit is `{limit}` bytes) | Detailed error showing actual size, data portion, and the limit. |
| Maximum size of messages that can be published at once exceeded (was `{size}` bytes; limit is `{limit}` bytes) | Error when a batch of messages exceeds the total size limit. |
| Maximum size of object messages that can be published at once exceeded (was `{size}` bytes; limit is `{limit}` bytes) | LiveObjects-specific error when object state exceeds limit. |
| Max content length exceeded | Server-side error when HTTP content length header exceeds limit. |
| Maximum content length exceeded | WebSocket-specific error when message exceeds transport limit. |
| ObjectMessages size `{size}` exceeds maximum allowed size of `{limit}` bytes | Java/Kotlin SDK error for LiveObjects. |

## Impact

This error prevents the message or batch from being published, but has no impact on:

- Your existing connection to Ably.
- Other channels or messages within size limits.
- The presence set or channel state.
- Other clients connected to the same channel.

This is a validation error that will not be automatically retried. You must reduce the message size before the operation will succeed. The SDK will not attempt to recover from this error as it indicates the payload exceeds your account limits.

## Quick fixes

Try the following to resolve the error immediately:

- Split large messages into smaller chunks under your limit (16KB for basic, 64KB for standard packages).
- Compress your data before publishing using gzip or similar compression.
- Store large payloads externally and send only a reference URL through Ably.
- For batch publishing, send messages individually or in smaller batches.
- Check your package tier limits at [Ably limits documentation](https://ably.com/docs/general/limits).

## Troubleshooting

The following are common causes and how to resolve them for error 40009:

### Single message exceeds limit

| Error messages |
| -------------- |
| Maximum message length exceeded |
| Maximum message length exceeded (was `{size}` bytes of which data was `{dataSize}` bytes, limit is `{limit}` bytes) |

This occurs when:

- A single message payload exceeds your package limit.
- The combined size of message data plus metadata exceeds the limit.
- Large JSON objects or base64-encoded data pushes size over the limit.

To resolve this:

{/* Source: Analysis finding from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 101-107 */}
{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 34-39 */}

Check your current package limits:
- Basic/Free tier: 16KB (16,384 bytes)
- Standard tier: 64KB (65,536 bytes)
- Enterprise tier: Up to 256KB (configurable)
- WebSocket connections: Up to 2MB (2,097,152 bytes)

Split messages that exceed these limits:

<Code>
```javascript
// Split large data into chunks
function splitMessage(data, maxSize = 65536) {
  const chunks = [];
  const dataStr = JSON.stringify(data);

  for (let i = 0; i < dataStr.length; i += maxSize) {
    chunks.push(dataStr.slice(i, i + maxSize));
  }

  return chunks;
}

// Send chunks with sequence numbers
const chunks = splitMessage(largeData, 60000); // Leave room for metadata
chunks.forEach((chunk, index) => {
  channel.publish('data-chunk', {
    id: messageId,
    chunk: index,
    total: chunks.length,
    data: chunk
  });
});
```
</Code>

{/* Code source: Pattern derived from support history in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 96-100 */}

### Batch publish size exceeded

| Error messages |
| -------------- |
| Maximum size of messages that can be published at once exceeded (was `{size}` bytes; limit is `{limit}` bytes) |

This occurs when:

{/* Source: Analysis from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 49-57 */}
{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 79-83 */}

- The total size of all messages in a batch exceeds the limit.
- Individual messages are small but the aggregate is too large.
- Batch publishing includes too many messages at once.

To resolve this:

Send messages individually or in smaller batches. The error message tells you the exact size that was attempted and your limit, helping you calculate how to split the batch.

<Code>
```javascript
// Split batch into smaller groups
async function publishBatch(messages, maxBatchSize = 65536) {
  let currentBatch = [];
  let currentSize = 0;

  for (const message of messages) {
    const messageSize = JSON.stringify(message).length;

    if (currentSize + messageSize > maxBatchSize && currentBatch.length > 0) {
      // Publish current batch
      await channel.publish(currentBatch);
      currentBatch = [];
      currentSize = 0;
    }

    currentBatch.push(message);
    currentSize += messageSize;
  }

  // Publish remaining messages
  if (currentBatch.length > 0) {
    await channel.publish(currentBatch);
  }
}
```
</Code>

{/* Code source: Best practice pattern based on batch handling issues from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 90-94 */}

### LiveObjects size limit

| Error messages |
| -------------- |
| ObjectMessages size `{size}` exceeds maximum allowed size of `{limit}` bytes |
| Maximum size of object messages that can be published at once exceeded (was `{size}` bytes; limit is `{limit}` bytes) |

This occurs when:

{/* Source: Analysis from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 119-123 */}

- LiveObjects state updates exceed the size limit.
- The aggregate size of all object messages exceeds the limit.
- Complex nested objects in LiveObjects grow too large.

To resolve this:

- Break complex objects into smaller, related objects.
- Store large data externally and reference it by ID.
- Use pagination for large collections.

### Transport-specific limits

| Error messages |
| -------------- |
| Max content length exceeded |
| Maximum content length exceeded |

This occurs when:

{/* Source: Analysis from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 82-99 */}
{/* Source: Knowledge from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 84-87 */}

- REST operations exceed ~350KB hard limit.
- WebSocket messages exceed the 2MB transport limit.
- Content-Length header indicates payload too large.

To resolve this:

- For REST: Keep requests under 350KB total.
- For WebSocket: Stay under 2MB per message.
- Consider using WebSocket for larger payloads (up to 2MB vs REST's 350KB).

## Prevention

To avoid this error in the future:

{/* Source: Resolution patterns from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 104-114 */}

- **Validate message size client-side** before sending to avoid network round-trips.
- **Implement compression** for large text payloads using standard algorithms.
- **Use external storage** (like S3 or CDN) for large files and send only URLs through Ably.
- **Monitor your usage** to understand typical message sizes in your application.
- **Consider upgrading** your package if you consistently need larger message sizes.

## Related errors

The following errors are related to error code 40009:

| Error code | Description |
| ---------- | ----------- |
| [40000 - Bad request](/docs/platform/errors/codes/40000) | General client error that may include validation issues beyond size limits. |
| [40010 - Invalid message data](/docs/platform/errors/codes/40010) | Message format validation errors that may occur alongside size issues. |
| [40011 - Invalid message name](/docs/platform/errors/codes/40011) | Channel or message naming issues that could affect batch operations. |

## Need further help?

Contact [Ably support](https://ably.com/support) if you're still experiencing issues after trying the steps listed above.

You'll need to provide:

- Your account ID and app ID.
- The full error message including the error code.
- Steps to reproduce the issue.
- Any relevant code snippets (without any sensitive credentials).
- The SDK and version you're using.

### Resources

The following resources provide further context or assistance with this error:

- [Ably limits documentation](https://ably.com/docs/general/limits)
- [Channel messages documentation](https://ably.com/docs/channels)
- [Batch publishing guide](https://ably.com/docs/channels#batch-publish)
- [LiveObjects documentation](https://ably.com/docs/liveobjects)

{/* =============================================== */}
{/* INTERNAL DOCUMENTATION (NOT RENDERED) */}
{/* =============================================== */}

{/* SOURCES USED:
- Analysis File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/b819713/src/prompts/errors/editorial-notes.md
- Writing Guide: https://github.com/ably/ably-os/blob/b819713/src/prompts/shared-resources/error-code-doc-writing-guide.md
*/}

{/* CONTENT DECISIONS:
- FAQ Content Preserved: Support history patterns from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 96-114
- Content Excluded: Specific customer names (Spotify, Dialpad) from internal discussions
- Recommendations Source:
  - Size limits from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 34-39
  - Resolution patterns from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 96-100
- Code Examples Rationale: Included splitting and batching patterns as these are essential for resolution based on support history
*/}

{/* ATTRIBUTION BY SECTION:
- Error Messages:
  - Compiled from all SDK implementations in https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 17-132
- Common Causes:
  - Single message: Analysis findings https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 17-63
  - Batch publish: Analysis findings https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 44-57
  - LiveObjects: Analysis findings https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 34-42, 58-63
  - Transport limits: Analysis findings https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-analysis.md lines 82-99
- Resolution Steps:
  - Size limits: Knowledge base https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 34-39
  - Splitting pattern: Support best practices https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 96-100
  - Batch handling: Support tickets https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 79-83
- Prevention: Best practices from https://github.com/ably/ably-os/blob/b819713/output/error-codes/research/40009-knowledge.md lines 104-114
*/}

{/* URL Validation Completed: 2025-11-07T01-37-30-412Z */}
{/* External URLs verified: 4 | Corrected: 0 | Exempted internal: 10 */}

{/* IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 40009
2. Regenerate: Run `./bin/ably-os errors document-error-codes 40009 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/b819713/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
*/}
