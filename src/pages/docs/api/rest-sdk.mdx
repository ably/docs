---
title: Constructor
intro: "The REST SDK constructor creates stateless clients for publishing messages and querying Ably services without persistent connections. This enables server-side message publishing, history retrieval, and administrative operations with minimal resource overhead."
meta_description: "Ably REST SDK constructor API reference. Create stateless clients for publishing, history retrieval, and admin operations without persistent connections."
meta_keywords: "Ably, Ably REST, REST SDK, constructor, stateless client, publishing, server-side operations"
redirect_from:
  - /docs/api/versions/v1.1/rest-sdk
  - /docs/api/versions/v1.0/rest-sdk
  - /docs/api/versions/v0.8/rest-sdk
---

## Constructor <a id="constructor" />

The Ably REST library constructor is overloaded allowing it to be instantiated using a [`ClientOptions`](#client-options) object, or more simply using a string containing an [API key](/docs/auth/basic) or [Token](/docs/auth/token).

<If lang="javascript,nodejs">

`new Ably.Rest(String keyOrTokenId)`

</If>

<If lang="ruby">

`Ably::Rest.new(String key_or_token_id)`

</If>

<If lang="php">

`new Ably\AblyRest(String key_or_token_id)`

</If>

<If lang="java">

`new io.ably.lib.AblyRest(String keyOrTokenIdString)`

</If>

<If lang="csharp">

`new IO.Ably.AblyRest(string key);`

</If>

<If lang="objc">

`- (instancetype)initWithKey:(NSString *)key(instancetype)initWithToken:(NSString *)token`

</If>

<If lang="swift">

`init(key: String)`

`init(token: String)`

</If>

<If lang="python">

`AblyRest(String api_key)`

</If>

<If lang="flutter">

`ably.Rest(key: keyOrTokenIdString)`

</If>

<If lang="go">

`ably.NewREST(ably.WithKey(key string)) (*RestClient, error)`

</If>

This will instantiate the REST library with the provided API key<If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go"> or Token ID string</If><If lang="csharp"></If>.

<If lang="javascript,nodejs">

`new Ably.Rest(`[`ClientOptions`](#client-options)` clientOptions)`

</If>

<If lang="ruby">

`Ably::Rest.new(`[`ClientOptions`](#client-options)` client_options)`

</If>

<If lang="php">

`new Ably\AblyRest(`[`ClientOptions`](#client-options)` client_options)`

</If>

<If lang="java">

`new io.ably.lib.AblyRest(`[`ClientOptions`](#client-options)` clientOptions)`

</If>

<If lang="csharp">

`new IO.Ably.AblyRest(`[`ClientOptions`](#client-options)` clientOptions)`

</If>

<If lang="objc">

`- (instancetype)initWithOptions:(`[`ARTClientOptions`](#client-options)` *)options;`

</If>

<If lang="swift">

`init(options: `[`ARTClientOptions`](#client-options)`)`

</If>

<If lang="python">

`AblyRest(`[`ClientOptions`](#client-options)` client_options)`

</If>

<If lang="flutter">

`ably.Rest(options: `[`ClientOptions`](#client-options)` clientOptions)`

</If>

<If lang="go">

`ably.NewREST(ably.WithKey(key string), ably.WithClientID(clientID string)) (*RestClient, error)`

</If>

<If lang="javascript,nodejs,csharp,flutter,java,objc,php,python,swift,go">

This will instantiate the library using the specified [`ClientOptions`](#client-options).

</If>

<If lang="ruby">

This will instantiate the library and create a new `Ably::Rest::Client` using the specified [`ClientOptions`](#client-options).

</If>


The REST constructor is used to instantiate the library. The REST library may be instantiated multiple times with the same or different [`ClientOptions`](#client-options) in any given context. Except where specified otherwise, instances operate independently of one another.

### Authentication <a id="authentication" />

The REST library needs to have credentials to be able to authenticate with the Ably service. Ably supports both Basic and Token based authentication schemes. Read more on [authentication](/docs/auth).

#### Basic Authentication

A private API key string for <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">[`ClientOptions#key`](#client-options)</If><If lang="csharp,go">[`ClientOptions#Key`](#client-options)</If> or the constructor, as obtained from the [application dashboard](https://ably.com/dashboard), is required for [Basic Authentication](/docs/auth/basic). Use this option if you wish to use [Basic authentication](/docs/auth/basic), or if you want to be able to [request Ably Tokens](/docs/auth/token) without needing to defer to a separate entity to sign Ably TokenRequests. Note that initializing the library with a <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">`key`</If><If lang="csharp,go">`Key`</If> does not necessarily mean that the library will use Basic auth; using the private key it is also able to create and sign Ably TokenRequests and use token authentication when necessary.

#### Token Authentication

The <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">[`ClientOptions#token`](#client-options)</If><If lang="csharp,go">[`ClientOptions#Token`](#client-options)</If> option takes a `token` string, and assumes that the Ably-compatible token has been obtained from some other instance that requested the token. Use the token option if you are provided with a token to use and you do not have a key (or do not have a key with the capabilities that you require).

Since tokens are short-lived, it is rarely sufficient to start with a token without the means for refreshing it. The <If lang="javascript,nodejs,flutter,java,objc,swift">[`authUrl` and `authCallback` options](#client-options)</If><If lang="ruby">[`:auth_url` and `:auth_callback` options](#client-options)</If><If lang="python">[`auth_url` and `auth_callback` options](#client-options)</If><If lang="csharp,go">[`AuthUrl` and `AuthCallback` options](#client-options)</If> are provided to allow a user of the library to provide new Ably-compatible tokens or Ably TokenRequests to the library as required; using these options allows the library to be instantiated without a <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">`key` or `token`</If><If lang="csharp,go">`Key` or `Token`</If>, and an initial token will be obtained automatically when required.

Read more on [authentication](/docs/auth).

<If lang="objc,swift">

### Thread safety <a id="thread-safety" />

The Cocoa SDK makes the following thread safety guarantees:

* All public methods and properties can be safely accessed from any thread, both for reading and writing operations.
* Objects like `ARTTokenDetails` and message data returned by the SDK can be safely read from multiple threads. However, you should not modify these objects after they're created.
* Objects you pass to the library must not be mutated afterwards. Once passed to the SDK, treat them as immutable. You can safely read from them or pass them again, and the library will never modify them.

All internal operations are dispatched to a single serial GCD queue to ensure thread safety within the SDK. You can specify a custom queue for this using `ARTClientOptions.internalDispatchQueue`, but it must be serial to maintain thread safety guarantees.

All callbacks provided by you are dispatched to the main queue by default, allowing you to update UI directly without additional thread switching. You can specify a different queue using `ARTClientOptions.dispatchQueue`. The callback queue must be different from `ARTClientOptions.internalDispatchQueue` to prevent deadlocks. Using the same queue creates circular dependencies where internal operations wait for callbacks, while callbacks wait for the internal queue.

</If>


## <If lang="csharp,go,php,python">AblyRest Properties</If><If lang="javascript,nodejs">Ably.Rest Properties</If><If lang="java">io.ably.lib.AblyRest Members</If><If lang="ruby">Ably::Rest::Client Attributes</If><If lang="objc,swift">ARTRest Properties</If><If lang="flutter">ably.Rest Properties</If> <a id="properties" />

The REST client exposes the following public <If lang="csharp,go,python,ruby,flutter">attributes</If><If lang="java">members</If><If lang="javascript,nodejs,objc,swift,php">properties</If>:

### <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">auth</If><If lang="csharp,go">Auth</If> <a id="auth" />

A reference to the [`Auth`](/docs/api/rest-sdk/authentication) authentication object configured for this client library.

### push <a id="push" />

A reference to the <If lang="javascript,nodejs,csharp,flutter,java,php,python,ruby,go">[`Push`](/docs/push)</If><If lang="objc,swift">[`ARTPush`](/docs/push)</If> object in this client library.

<If lang="java,swift,objc">

### device <a id="device" />

A reference to the <If lang="javascript,nodejs,csharp,flutter,java,php,python,ruby,go">[`LocalDevice`](/docs/push/configure/device)</If><If lang="objc,swift">[`ARTLocalDevice`](/docs/push/configure/device)</If> object.

</If>

### <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">channels</If><If lang="csharp,go">Channels</If> <a id="channels" />

[`Channels`](/docs/channels) is a reference to the [`Channel`](/docs/channels) collection instance for this library indexed by the channel name. You can use the [`Get`](/docs/api/rest-sdk/channels#get) method of this to get a `Channel` instance. See [channels](/docs/channels) and [messages](/docs/channels/messages/) for more information.

## <If lang="csharp,go,php,python">AblyRest Methods</If><If lang="javascript,nodejs">Ably.Rest Methods</If><If lang="java">io.ably.lib.AblyRest Methods</If><If lang="ruby">Ably::Rest::Client Methods</If><If lang="objc,swift">ARTRest Methods</If><If lang="flutter">ably.Rest Methods</If> <a id="methods" />

### <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">stats</If><If lang="csharp,go">Stats</If> <a id="stats" />

<If lang="javascript,nodejs">

`stats(Object params?): Promise<PaginatedResult<Stats>>`

</If>

<If lang="ruby">

`PaginatedResult<Stats> stats(Hash options)`

</If>

<If lang="python">

`PaginatedResult<Stats> stats(kwargs_options)`

</If>

<If lang="php">

`PaginatedResult<Stats> stats(Array options)`

</If>

<If lang="java">

`PaginatedResult<Stats> stats(Param[] options)`

</If>

<If lang="csharp">

`Task<PaginatedResult<Stats>> StatsAsync(StatsRequestParams query)`

</If>

<If lang="swift,objc">

`stats(query: ARTStatsQuery?, callback: (ARTPaginatedResult<ARTStats>?, ARTErrorInfo?) -> Void) throws`

</If>

<If lang="go">

`(c *RestClient) Stats(params *PaginateParams) (*PaginatedResult, error)`

</If>


This call queries the [REST `/stats` API](/docs/api/rest-api#stats) and retrieves your application's usage statistics. A [`PaginatedResult`](/docs/api/rest-sdk/types#paginated-result) is returned, containing an array of [`Stats`](#stats-type) for the first page of results. [`PaginatedResult`](/docs/api/rest-sdk/types#paginated-result) objects are iterable providing a means to page through historical statistics. [See an example set of raw stats returned via the REST API](/docs/metadata-stats/stats#metrics).

See [statistics](/docs/metadata-stats/stats) for more information.

#### Parameters

<If lang="ruby">

| Parameter | Description |
|-----------|-------------|
| options | An optional Hash containing the query parameters |
| &block | Yields a `PaginatedResult<Stats>` object |

</If>

<If lang="swift,objc">

| Parameter | Description |
|-----------|-------------|
| query | An optional `ARTStatsQuery` containing the query parameters |
| callback | Called with a [`ARTPaginatedResult`](#paginated-result)`&lt;`[`ARTStats`](/docs/api/rest-sdk/types#stats)`&gt;` object or an error |

</If>

<If lang="flutter,java,php,python,csharp,javascript,nodejs,go">

| Parameter | Description |
|-----------|-------------|
| <If lang="flutter,java,php,python,go">options</If><If lang="csharp">query</If><If lang="javascript,nodejs">params</If> | An optional <If lang="flutter,go,java,php,python">object</If><If lang="csharp">`StatsRequestParams`</If><If lang="java">[`Param[]`](#param) array</If><If lang="flutter,go,java,php,python"> containing the query parameters</If><If lang="javascript,nodejs"> set of parameters used to specify which statistics are retrieved. If not specified the default parameters will be used</If> |

</If>

#### <If lang="flutter,go,java,php,python,ruby">options parameters</If><If lang="objc,swift">ARTStatsQuery properties</If><If lang="csharp">StatsRequestParams properties</If><If lang="javascript,nodejs">params properties</If>

The following options, as defined in the [REST `/stats` API](/docs/api/rest-api#stats) endpoint, are permitted:

| Parameter | Description | Type | Default |
|-----------|-------------|------|---------|
| <If lang="flutter,go,java,objc,php,python,swift,javascript,nodejs">start</If><If lang="ruby">:start</If><If lang="csharp">Start</If> | Earliest <If lang="csharp">`DateTimeOffset` or </If><If lang="ruby">`Time` or </If>time in milliseconds since the epoch for any stats retrieved | <If lang="flutter,go,java,php,python">`Long`</If><If lang="ruby">`Int` or `Time`</If><If lang="csharp">`DateTimeOffset`</If><If lang="javascript,nodejs">`Number`</If> | beginning of time |
| <If lang="flutter,go,java,objc,php,python,swift,javascript,nodejs">end</If><If lang="ruby">:end</If><If lang="csharp">End</If> | Latest <If lang="csharp">`DateTimeOffset` or </If><If lang="ruby">`Time` or </If>time in milliseconds since the epoch for any stats retrieved | <If lang="flutter,go,java,php,python">`Long`</If><If lang="ruby">`Int` or `Time`</If><If lang="csharp">`DateTimeOffset`</If><If lang="javascript,nodejs">`Number`</If> | current time |
| <If lang="flutter,go,java,objc,php,python,swift,javascript,nodejs">direction</If><If lang="ruby">:direction</If><If lang="csharp">Direction</If> | <If lang="ruby">`:forwards` or `:backwards`</If><If lang="flutter,go,java,objc,php,python,swift,javascript,nodejs,csharp">`forwards` or `backwards`</If> | <If lang="flutter,go,java,objc,php,python,swift,javascript,nodejs">`String`</If><If lang="ruby">`Symbol`</If><If lang="csharp">`Direction` enum</If> | backwards |
| <If lang="flutter,go,java,objc,php,python,swift,javascript,nodejs">limit</If><If lang="ruby">:limit</If><If lang="csharp">Limit</If> | Maximum number of stats to retrieve up to 1,000 | <If lang="flutter,go,java,php,python,ruby,csharp">`Integer`</If><If lang="javascript,nodejs">`Number`</If> | 100 |
| <If lang="flutter,go,java,objc,php,python,swift,javascript,nodejs">unit</If><If lang="ruby">:unit</If><If lang="csharp">Unit</If> | <If lang="ruby">`:minute`, `:hour`, `:day` or `:month`.</If><If lang="flutter,go,java,objc,php,python,swift">`minute`, `hour`, `day` or `month`.</If> Based on the unit selected, the given start or end times are rounded down to the start of the relevant interval depending on the unit granularity of the query | <If lang="flutter,go,java,php,python,ruby">`String`</If><If lang="javascript,nodejs">[`StatsIntervalGranularity`](/docs/api/rest-sdk/types#stats-granularity)</If><If lang="objc,swift">[`ARTStatsGranularity`](#stats-granularity)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/rest-sdk/types#stats-granularity) enum</If> | minute |

<If lang="javascript,nodejs">

#### Returns

Returns a promise. On success, the promise is fulfilled with a [`PaginatedResult`](/docs/api/rest-sdk/types#paginated-result) object containing an array of [`Stats`](/docs/api/rest-sdk/types#stats) objects. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/rest-sdk/types#error-info) object.

</If>

<If lang="objc,swift">

#### Callback result

On success, `result` contains a [`PaginatedResult`](#paginated-result) encapsulating an array of [`Stats`](/docs/api/rest-sdk/types#stats) objects corresponding to the current page of results. [`PaginatedResult`](#paginated-result) supports pagination using [`next`](#paginated-result) and [`first`](#paginated-result) methods.

On failure to retrieve stats, `err` contains an [`ErrorInfo`](#error-info) object with an error response as defined in the [Ably REST API](/docs/api/rest-api#common) documentation.

</If>

<If lang="java,ruby,php">

#### Returns

On success, the returned [`PaginatedResult`](#paginated-result) encapsulates an array of [`Stats`](/docs/api/rest-sdk/types#stats) objects corresponding to the current page of results. [`PaginatedResult`](#paginated-result) supports pagination using [`next`](#paginated-result) and [`first`](#paginated-result) methods.

Failure to retrieve the stats will raise an [`AblyException`](/docs/api/rest-sdk/types#ably-exception)

</If>

<If lang="csharp">

#### Returns

The method is asynchronous and return Task which needs to be awaited.

On success, the returned [`PaginatedResult`](#paginated-result) encapsulates a list of [`Stats`](/docs/api/rest-sdk/types#stats) objects corresponding to the current page of results. [`PaginatedResult`](#paginated-result) supports pagination using [`NextAsync`](#paginated-result) and [`FirstAsync`](#paginated-result) methods.

Failure to retrieve the stats will raise an [`AblyException`](/docs/api/rest-sdk/types#ably-exception)

</If>


### <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">time</If><If lang="csharp">Time</If> <a id="time" />

<If lang="javascript,nodejs">

`time(): Promise<Number>`

</If>

<If lang="ruby">

`Time time`

</If>

<If lang="python">

`Int time()`

</If>

<If lang="php">

`Integer time()`

</If>

<If lang="java">

`long time()`

</If>

<If lang="csharp">

`Task<DateTimeOffset> TimeAsync()`

</If>

<If lang="objc,swift">

`time(callback: (NSDate?, NSError?) -> Void)`

</If>

<If lang="go">

`(c *RestClient) Time() (time.Time, error)`

</If>


Obtains the time from the Ably service as <If lang="ruby">a `Time` object</If><If lang="csharp">a `DateTimeOffset` object</If><If lang="javascript,nodejs,java,objc,php,python,swift,go">milliseconds since epoch</If>. (Clients that do not have access to a sufficiently well maintained time source and wish to issue Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request) with a more accurate timestamp should use the `queryTime` [`clientOptions`](#client-options) instead of this method).

<If lang="javascript,nodejs">

#### Returns

Returns a promise. On success, the promise is fulfilled with the time as milliseconds since the Unix epoch. On failure, the promise is rejected with an [`ErrorInfo`](#error-info) object.

</If>

<If lang="objc,swift">

#### Callback result

On success, `time` is a number containing the number of milliseconds since the epoch.

On failure to retrieve the Ably server time, `err` contains an [`ErrorInfo`](#error-info) object with an error response as defined in the [Ably REST API](/docs/api/rest-api#common) documentation.

</If>

<If lang="java,ruby,php,csharp">

#### Returns

On success, <If lang="java,php">milliseconds since epoch</If><If lang="ruby">the `Time`</If><If lang="csharp">the `DateTimeOffset`</If> is returned.

Failure to retrieve the Ably server time will raise an [`AblyException`](/docs/api/rest-sdk/types#ably-exception).

</If>

<If lang="go">

#### Returns

On success, milliseconds since epoch is returned.

On failure to retrieve the Ably server time, `error` contains an [`ErrorInfo`](#error-info) object with an error response as defined in the [Ably REST API](/docs/api/rest-api#common) documentation.

</If>


### <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift">request</If><If lang="go,csharp">Request</If> <a id="request" />

<If lang="javascript,nodejs">

`request(method, path, version, params?, body?, headers?): Promise<HttpPaginatedResponse>`

</If>

<If lang="ruby,php">

`HttpPaginatedResponse request(String method, String path, Object params, Object body, Object headers)`

</If>

<If lang="python">

`publish(method=String, path=String, params=Object, body=Object, headers=Object)`

</If>

<If lang="java">

`HttpPaginatedResponse request(String method, String path, Object params, Object body, Object headers)`

</If>

<If lang="csharp">

`Task<HttpPaginatedResponse> Request(string method, string path, Dictionary<string, string> requestParams, JToken body, Dictionary<string, string> headers)`

</If>

<If lang="objc,swift">

`request(method: String, path: String, params: Object?, body: Object?, headers: Object?, callback: (ARTHttpPaginatedResponse, ARTErrorInfo?) -> Void)`

</If>

<If lang="go">

`HTTPPaginatedResponse Request(method string, path string, params PaginateParams, body interface, headers http.Header)`

</If>

Makes a REST request to a provided path. This is provided as a convenience for developers who wish to use REST API functionality that is either not documented or is not yet included in the public API, without having to handle authentication, paging, fallback hosts, MsgPack and JSON support, etc. themselves.

#### Parameters

<If lang="javascript,nodejs">

| Parameter | Description | Type |
|-----------|-------------|------|
| method | either `get`, `post`, `put`, `patch` or `delete` | String |
| path | the path to query | String |
| version | version of the REST API to use | Number |
| params | (optional) any querystring parameters needed | Object |
| body | (optional; for `post`, `put` and `patch` methods) the body of the request, as anything that can be serialized into JSON, such as an `Object` or `Array` | Serializable |
| headers | (optional) any headers needed. If provided, these will be mixed in with the default library headers | Object |

</If>

<If lang="csharp,flutter,java,objc,swift,python,ruby,php,go">

| Parameter | Description | Type |
|-----------|-------------|------|
| method | either `get`, `post`, `put`, `patch` or `delete` | <If lang="csharp,go">`string`</If><If lang="flutter,python,objc,swift,java,ruby,php">`String`</If> |
| path | the path to query | <If lang="csharp,go">`string`</If><If lang="flutter,python,objc,swift,java,ruby,php">`String`</If> |
| params | (optional) any querystring parameters needed | <If lang="csharp">`Dictionary<string, string>`</If><If lang="flutter,python,objc,swift,java,ruby,php">`Object`</If><If lang="go">`PaginateParams`</If> |
| body | (optional; for `post`, `put` and `patch` methods) the body of the request, as anything that can be serialized into JSON, as a JToken. | <If lang="csharp">`Token`</If><If lang="flutter,python,objc,swift,java,ruby,php">`Serializable`</If><If lang="go">`interface`</If> |
| headers | (optional) any headers needed. If provided, these will be mixed in with the default library headers | <If lang="csharp">`Dictionary<string, string>`</If><If lang="flutter,python,objc,swift,java,ruby,php">`Object`</If><If lang="go">`http.Header`</If> |

</If>

<If lang="javascript,nodejs">

#### Returns

Returns a promise. On success, the promise is fulfilled with the [`HttpPaginatedResponse`](/docs/api/realtime-sdk/types#http-paginated-response) object returned by the HTTP request. The response object will contain an empty or JSON-encodable object. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) object.

</If>

<If lang="objc,swift">

#### Callback result

On successfully receiving a response from Ably, `results` contains an `ARTHttpPaginatedResponse` containing the `statusCode` of the response, a `success` boolean (equivalent to whether the status code is between 200 and 299), `headers`, and an `items` array containing the current page of results. It supports pagination using [`next`](#paginated-result) and [`first`](#paginated-result) methods, identically to [`PaginatedResult`](/docs/api/rest-sdk/types#paginated-result).

On failure to obtain a response, `err` contains an [`ErrorInfo`](/docs/api/rest-sdk/types#error-info) object with an error response as defined in the [Ably REST API](/docs/api/rest-api#common) documentation. (Note that if a response is obtained, any response, even with a non-2xx status code, will result in an HTTP Paginated Response, not an `err`).

</If>

<If lang="java,ruby,php,python">

#### Returns

On successfully receiving a response from Ably, the returned [`HttpPaginatedResponse`](/docs/api/rest-sdk/types#http-paginated-response) contains a <If lang="ruby,python">`status_code`</If><If lang="java,php">`statusCode`</If> and a `success` boolean, `headers`, and an `items` array containing the current page of results. It supports pagination using [`next`](#paginated-result) and [`first`](#paginated-result) methods, identically to [`PaginatedResult`](/docs/api/rest-sdk/types#paginated-result).

Failure to obtain a response will raise an [`AblyException`](/docs/api/realtime-sdk/types#ably-exception). (Note that if a response is obtained, any response, even with a non-2xx status code, will result in an HTTP Paginated Response, not an exception).

</If>

<If lang="csharp">

#### Returns

The method is asynchronous and return a Task that has to be awaited to get the result.

On successfully receiving a response from Ably, the returned [`HttpPaginatedResponse`](/docs/api/rest-sdk/types#http-paginated-response) containing the `StatusCode` and a `Success` boolean, `Headers`, and an `Items` array containing the current page of results. [`HttpPaginatedResponse`](/docs/api/rest-sdk/types#http-paginated-response) supports pagination using [`NextAsync`](#paginated-result) and [`FirstAsync`](#paginated-result) methods.

Failure to obtain a response will raise an [`AblyException`](/docs/api/realtime-sdk/types#ably-exception). (Note that if a response is obtained, any response, even with a non-2xx status code, will result in an HTTP Paginated Response, not an exception).

</If>


<If lang="javascript,nodejs">

#### Example

<If lang="javascript">

<Code>
```javascript
const response = await rest.request(
  'get',
  '/channels/someChannel/messages',
  3,
  { limit: 1, direction: 'forwards' },
);
console.log('Success! status code was ' + response.statusCode);
console.log(response.items.length + ' items returned');
if (response.hasNext()) {
  const nextPage = await response.next();
  console.log(nextPage.items.length + ' more items returned');
}
```
</Code>

</If>

<If lang="nodejs">

<Code>
```nodejs
const response = await rest.request(
  'get',
  '/channels/someChannel/messages',
  3,
  { limit: 1, direction: 'forwards' },
);
console.log('Success! status code was ' + response.statusCode);
console.log(response.items.length + ' items returned');
if (response.hasNext()) {
  const nextPage = await response.next();
  console.log(nextPage.items.length + ' more items returned');
}
```
</Code>

</If>

</If>

<If lang="javascript,nodejs">

### batchPublish <a id="batchPublish" />

There are two overloaded versions of this method:

`batchPublish(BatchPublishSpec spec): Promise<BatchResult<BatchPublishSuccessResult | BatchPublishFailureResult>>`

Publishes a [`BatchPublishSpec`](#batch-publish-spec) object to one or more channels, up to a maximum of 100 channels.

`batchPublish(BatchPublishSpec[] specs): Promise<BatchResult<BatchPublishSuccessResult | BatchPublishFailureResult>[]>`

Publishes one or more [`BatchPublishSpec`](#batch-publish-spec) objects to one or more channels, up to a maximum of 100 channels.

#### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| spec | An object describing the messages to be batch published and to which channels | [`BatchPublishSpec`](#batch-publish-spec) |
| specs | An array of objects describing the messages to be batch published and to which channels | [`BatchPublishSpec[]`](#batch-publish-spec) |

#### Returns

Returns a promise. On success, the promise is fulfilled with a [`BatchResult`](#batch-result) object, or an array of [`BatchResult`](#batch-result) objects, containing information about the result of the batch publish operation for each channel. The successful results of specific channels are returned as [`BatchPublishSuccessResult`](#batch-publish-success-result) objects, whilst failures are [`BatchPublishFailureResult`](#batch-publish-failure-result) objects. If an array of [`BatchResult`](#batch-result) objects are returned, they are in the same order as the provided [`BatchPublishSpec`](#batch-publish-spec). On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/rest-sdk/types#error-info) object.


### batchPresence <a id="batchPresence" />

`batchPresence(String[] channels): Promise<BatchResult<BatchPresenceSuccessResult | BatchPresenceFailureResult>[]>`

Retrieves the presence state for one or more channels, up to a maximum of 100 channels. Presence state includes the [`clientId`](#client-options) of members and their current [`PresenceAction`](/docs/api/rest-sdk/presence#presence-action).

#### Parameters

| Parameter | Description | Type |
|-----------|-------------|------|
| channels | An array of one or more channel names, up to a maximum of 100 channels | `String[]` |

#### Returns

Returns a promise. On success, the promise is fulfilled with a [`BatchResult`](#batch-result) object containing information about the result of the batch presence request for each channel. The successful results of specific channels are returned as [`BatchPresenceSuccessResult`](#batch-presence-success-result) objects, whilst failures are [`BatchPresenceFailureResult`](#batch-presence-failure-result) objects. On failure, the promise is rejected with an [`ErrorInfo`](/docs/api/rest-sdk/types#error-info) object.

</If>



## Related types <a id="related-types" />

### <If lang="javascript,nodejs,go,php,python,ruby">ClientOptions</If><If lang="swift,objc">ARTClientOptions</If><If lang="java">io.ably.types.ClientOptions</If><If lang="csharp">IO.Ably.ClientOptions</If><If lang="flutter">ably.ClientOptions</If> <a id="client-options" />

<If lang="javascript,nodejs">

`ClientOptions` is a plain JavaScript object and is used in the `Ably.Rest` constructor's `options` argument. The following attributes can be defined on the object:

</If>

<If lang="ruby">

`ClientOptions` is a Hash object and is used in the `Ably::Rest` constructor's `options` argument. The following key symbol values can be added to the Hash:

</If>

<If lang="php">

`ClientOptions` is a associative array and is used in the `Ably\AblyRest` constructor's `options` argument. The following named keys and values can be added to the associative array:

</If>

<If lang="java,objc,swift,csharp,go">

<If lang="objc,swift">`ART`</If>`ClientOptions` is used in the `AblyRest` constructor's `options` argument.

</If>

<If lang="flutter">

`ably.ClientOptions` is used in the `ably.Rest` constructor's `options` named argument

</If>

<If lang="javascript,nodejs">

#### <If lang="javascript,nodejs,go,objc,swift">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If><If lang="python">Keyword arguments</If>

| Parameter | Description | Type |
|-----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,php,python,swift">key</If><If lang="go">Key</If><If lang="ruby">:key</If> | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic) | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">token</If><If lang="go">Token</If><If lang="ruby">:token</If> | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the <If lang="javascript,nodejs,java,objc,php,python,swift">`token`</If><If lang="go">`Token`</If> property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,php,swift">`authUrl`</If><If lang="ruby">:auth_url</If><If lang="python">auth_url</If> or <If lang="javascript,nodejs,java,objc,php,swift">`authCallback`</If><If lang="go">`AuthCallback`</If><If lang="python">`auth_callback`</If><If lang="ruby">`:auth_callback`</If>. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |
| <If lang="javascript,nodejs,java,objc,php,swift">authCallback</If><If lang="go">AuthCallback</If><If lang="python">auth_callback</If><If lang="ruby">:auth_callback</If> | A <If lang="javascript,nodejs,flutter,java,objc,php,python,swift,go,ruby">function</If><If lang="javascript,nodejs">function with the form `function(tokenParams, callback(err, tokenOrTokenRequest))`</If><If lang="java">`TokenCallback` instance</If><If lang="python">callable (eg a lambda)</If><If lang="ruby">proc / lambda (called synchronously in REST and Realtime but does not block EventMachine in the latter)</If> which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Callable`</If><If lang="java">`TokenCallback`</If><If lang="ruby">`Proc`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authUrl</If><If lang="go">AuthUrl</If><If lang="ruby">:auth_url</If><If lang="python">auth_url</If> | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,go">`String`</If><If lang="swift,objc">`NSURL`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authMethod</If><If lang="go">AuthMethod</If><If lang="python">auth_method</If><If lang="ruby">:auth_method</If> | The HTTP verb to use for the request, either <If lang="javascript,nodejs,java,objc,php,python,swift,go">`GET`</If><If lang="ruby">`:get`</If> or <If lang="javascript,nodejs,java,objc,php,python,swift,go">`POST`</If><If lang="ruby">`:post`</If><br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">`GET`</If><If lang="ruby">`:get`</If>_ | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`String`</If><If lang="ruby">`Symbol`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authHeaders</If><If lang="go">AuthHeaders</If><If lang="python">auth_headers</If><If lang="ruby">:auth_headers</If> | A set of key value pair headers to be added to any request made to the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authUrl`</If>. Useful when an application requires these to be added to validate the request or implement the response. <If lang="javascript">If the `authHeaders` object contains an `authorization` key, then `withCredentials` will be set on the xhr request.</If> | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Object`</If><If lang="python">`Dict`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param []`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,,swift">authParams</If><If lang="go">AuthParams</If><If lang="ruby">:auth_params</If><If lang="python">auth_params</If> | A set of key value pair params to be added to any request made to the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authUrl`</If>. When the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authMethod`</If><If lang="go">`AuthMethod`</If> is `GET`, query params are added to the URL, whereas when <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authMethod`</If><If lang="go">`AuthMethod`</If> is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Object`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param[]`</If><If lang="objc">`NSArray<NSURLQueryItem *>`</If><If lang="swift">`[NSURLQueryItem]/Array<NSURLQueryItem>`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">tokenDetails</If><If lang="go">TokenDetails</If><If lang="python">token_details</If><If lang="ruby">:token_details</If> | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,php,python,swift">`authUrl`</If><If lang="go">`AuthUrl`</If><If lang="ruby">`:auth_url`</If><If lang="python">`auth_url`</If> or <If lang="javascript,nodejs,java,objc,php,python,swift">`authCallback`</If><If lang="go">AuthCallback</If><If lang="python">`auth_callback`</If><If lang="ruby">`:auth_callback`</If>. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">tls</If><If lang="go">Tls</If><If lang="ruby">:tls</If> | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />_default: true_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">clientId</If><If lang="go">ClientId</If><If lang="python">client_id</If><If lang="ruby">:client_id</If> | A client ID, used for identifying this client when publishing messages or for presence purposes. The <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> may also be implicit in a token used to instantiate the library; an error will be raised if a <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If> specified here conflicts with the <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| <If lang="javascript,nodejs,java,objc,php,swift">useTokenAuth</If><If lang="go">UseTokenAuth</If><If lang="python">use_token_auth</If><If lang="ruby">:use_token_auth</If> | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a <If lang="ruby,python">`client_id`</If><If lang="javascript,nodejs,java,objc,php,python,swift,go">`clientId`</If> is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients).<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">endpoint</If><If lang="go">Endpoint</If><If lang="ruby">:endpoint</If> | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">null</If><If lang="java">Null</If><If lang="python">None</If><If lang="ruby,objc,swift">nil</If>_ | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">environment</If><If lang="go">Environment</If><If lang="ruby">:environment</If> | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">null</If><If lang="java">Null</If><If lang="python">None</If><If lang="ruby,objc,swift">nil</If>_ | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">idempotentRestPublishing</If><If lang="go">IdempotentRestPublishing</If><If lang="ruby">:idempotent_rest_publishing</If> | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default.<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">fallbackHosts</If><If lang="go">FallbackHosts</If><If lang="python">fallback_hosts</If><If lang="ruby">:fallback_hosts</If> | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here.<br />_default: `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]`_ | `String []` |
| <If lang="javascript,nodejs,java,objc,php,swift">transportParams</If><If lang="python">transport_params</If><If lang="ruby">:transport_params</If> | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections) | <If lang="javascript,nodejs,java,objc,php,swift,go">`Object`</If><If lang="python">`Dict`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param []`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">logLevel</If><If lang="python">log_level</If> | A number controlling the verbosity of the log output of the library. Valid values are: 0 (no logs), 1 (errors only), 2 (errors plus connection and channel state changes), 3 (high-level debug output), and 4 (full debug output). | `Integer` |
| <If lang="javascript,nodejs,java,objc,php,swift">logHandler</If><If lang="python">log_handler</If> | A function to handle each line of the library's log output. If `logHandler` is not specified, `console.log` is used. | `Callable` |
| transports | An optional array of transports to use, in descending order of preference. In the browser environment the available transports are: `web_socket`, `xhr_polling`. | `String[]` |
| <If lang="javascript,nodejs,java,objc,php,swift">useBinaryProtocol</If><If lang="python">use_binary_protocol</If> | If set to true, will enable the binary protocol (MessagePack) if it is supported. It's disabled by default on browsers for performance considerations (browsers are optimized for decoding JSON). Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">queryTime</If><If lang="go">QueryTime</If><If lang="ruby">:query_time</If><If lang="python">query_time</If> | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request.<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">defaultTokenParams</If><If lang="python">default_token_params</If><If lang="ruby">:default_token_params</If><If lang="go">DefaultTokenParams</If> | When a [`TokenParams`](/docs/api/rest-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) or [Ably `TokenRequests`](/docs/api/rest-sdk/authentication#token-request) | [`TokenParams`](/docs/api/rest-sdk/types#token-params) |

</If>
<If lang="go">

#### Properties

| Parameter | Description | Type |
|-----------|-------------|------|
| Key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic) | `String` |
| Token | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `Token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `AuthUrl` or `AuthCallback`. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |
| AuthCallback | A function which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | `Callable` |
| AuthUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | `String` |
| AuthMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />_default: `GET`_ | `String` |
| AuthHeaders | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response. | `Object` |
| AuthParams | A set of key value pair params to be added to any request made to the `authUrl`. When the `AuthMethod` is `GET`, query params are added to the URL, whereas when `AuthMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | `Object` |
| TokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `AuthUrl` or `AuthCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| Tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />_default: true_ | `Boolean` |
| ClientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `ClientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `ClientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `ClientId` specified here conflicts with the `ClientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| UseTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `ClientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients).<br />_default: false_ | `Boolean` |
| Endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: null_ | `String` |
| Environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: null_ | `String` |
| IdempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default.<br />_default: false_ | `Boolean` |
| FallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here.<br />_default: `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]`_ | `String []` |
| transportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections) | `Object` |
| LogLevel | A number controlling the verbosity of the log output of the library. Valid values are: 0 (no logs), 1 (errors only), 2 (errors plus connection and channel state changes), 3 (high-level debug output), and 4 (full debug output). | `Integer` |
| UseBinaryProtocol | If set to true, will enable the binary protocol (MessagePack) if it is supported. It's disabled by default on browsers for performance considerations (browsers are optimized for decoding JSON). Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />_default: false_ | `Boolean` |
| QueryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request.<br />_default: false_ | `Boolean` |
| DefaultTokenParams | When a [`TokenParams`](/docs/api/rest-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) or [Ably `TokenRequests`](/docs/api/rest-sdk/authentication#token-request) | [`TokenParams`](/docs/api/rest-sdk/types#token-params) |

</If>

<If lang="ruby">

#### Attributes

| Parameter | Description | Type |
|-----------|-------------|------|
| :key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic) | `String` |
| :token | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `:auth_url` or `:auth_callback`. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |
| :auth_callback | A proc / lambda (called synchronously in REST and Realtime but does not block EventMachine in the latter) which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | `Proc` |
| :auth_url | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | `String` |
| :auth_method | The HTTP verb to use for the request, either `:get` or `:post`<br />_default: `:get`_ | `Symbol` |
| :auth_headers | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response. | `Hash` |
| :auth_params | A set of key value pair params to be added to any request made to the `authUrl`. When the `authMethod` is `GET`, query params are added to the URL, whereas when `authMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | `Hash` |
| :token_details | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `:auth_url` or `:auth_callback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| :tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />_default: true_ | `Boolean` |
| :client_id | A client ID, used for identifying this client when publishing messages or for presence purposes. The `client_id` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `client_id` may also be implicit in a token used to instantiate the library; an error will be raised if a `client_id` specified here conflicts with the `client_id` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| :use_token_auth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `client_id` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients).<br />_default: false_ | `Boolean` |
| :endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: nil_ | `String` |
| :environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: nil_ | `String` |
| :idempotent_rest_publishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default.<br />_default: false_ | `Boolean` |
| :fallback_hosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here.<br />_default: `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]`_ | `String []` |
| :transport_params | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections) | `Hash` |
| :log_level | A number controlling the verbosity of the log output of the library. Valid values are: 0 (no logs), 1 (errors only), 2 (errors plus connection and channel state changes), 3 (high-level debug output), and 4 (full debug output). | `Integer` |
| :logger | A Ruby [`Logger`](http://ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html) compatible object to handle each line of log output. If `logger` is not specified, `STDOUT` is used. | `STDOUT Logger` |
| :use_binary_protocol | If set to false, will forcibly disable the binary protocol (MessagePack). The binary protocol is used by default unless it is not supported. The default is true. Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />_default: true_ | `Boolean` |
| :query_time | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request.<br />_default: false_ | `Boolean` |
| :default_token_params | When a [`TokenParams`](/docs/api/rest-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) or [Ably `TokenRequests`](/docs/api/rest-sdk/authentication#token-request) | [`TokenParams`](/docs/api/rest-sdk/types#token-params) |


</If>
<If lang="python">

#### Keyword arguments

| Parameter | Description | Type |
|-----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,php,python,swift">key</If><If lang="go">Key</If><If lang="ruby">:key</If> | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic) | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">token</If><If lang="go">Token</If><If lang="ruby">:token</If> | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the <If lang="javascript,nodejs,java,objc,php,python,swift">`token`</If><If lang="go">`Token`</If> property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,php,swift">`authUrl`</If><If lang="ruby">:auth_url</If><If lang="python">auth_url</If> or <If lang="javascript,nodejs,java,objc,php,swift">`authCallback`</If><If lang="go">`AuthCallback`</If><If lang="python">`auth_callback`</If><If lang="ruby">`:auth_callback`</If>. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |
| <If lang="javascript,nodejs,java,objc,php,swift">authCallback</If><If lang="go">AuthCallback</If><If lang="python">auth_callback</If><If lang="ruby">:auth_callback</If> | A <If lang="javascript,nodejs,flutter,java,objc,php,python,swift,go,ruby">function</If><If lang="javascript,nodejs">function with the form `function(tokenParams, callback(err, tokenOrTokenRequest))`</If><If lang="java">`TokenCallback` instance</If><If lang="python">callable (eg a lambda)</If><If lang="ruby">proc / lambda (called synchronously in REST and Realtime but does not block EventMachine in the latter)</If> which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Callable`</If><If lang="java">`TokenCallback`</If><If lang="ruby">`Proc`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authUrl</If><If lang="go">AuthUrl</If><If lang="ruby">:auth_url</If><If lang="python">auth_url</If> | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,go">`String`</If><If lang="swift,objc">`NSURL`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authMethod</If><If lang="go">AuthMethod</If><If lang="python">auth_method</If><If lang="ruby">:auth_method</If> | The HTTP verb to use for the request, either <If lang="javascript,nodejs,java,objc,php,python,swift,go">`GET`</If><If lang="ruby">`:get`</If> or <If lang="javascript,nodejs,java,objc,php,python,swift,go">`POST`</If><If lang="ruby">`:post`</If><br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">`GET`</If><If lang="ruby">`:get`</If>_ | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`String`</If><If lang="ruby">`Symbol`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authHeaders</If><If lang="go">AuthHeaders</If><If lang="python">auth_headers</If><If lang="ruby">:auth_headers</If> | A set of key value pair headers to be added to any request made to the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authUrl`</If>. Useful when an application requires these to be added to validate the request or implement the response. <If lang="javascript">If the `authHeaders` object contains an `authorization` key, then `withCredentials` will be set on the xhr request.</If> | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Object`</If><If lang="python">`Dict`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param []`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,,swift">authParams</If><If lang="go">AuthParams</If><If lang="ruby">:auth_params</If><If lang="python">auth_params</If> | A set of key value pair params to be added to any request made to the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authUrl`</If>. When the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authMethod`</If><If lang="go">`AuthMethod`</If> is `GET`, query params are added to the URL, whereas when <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authMethod`</If><If lang="go">`AuthMethod`</If> is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Object`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param[]`</If><If lang="objc">`NSArray<NSURLQueryItem *>`</If><If lang="swift">`[NSURLQueryItem]/Array<NSURLQueryItem>`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">tokenDetails</If><If lang="go">TokenDetails</If><If lang="python">token_details</If><If lang="ruby">:token_details</If> | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,php,python,swift">`authUrl`</If><If lang="go">`AuthUrl`</If><If lang="ruby">`:auth_url`</If><If lang="python">`auth_url`</If> or <If lang="javascript,nodejs,java,objc,php,python,swift">`authCallback`</If><If lang="go">AuthCallback</If><If lang="python">`auth_callback`</If><If lang="ruby">`:auth_callback`</If>. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">tls</If><If lang="go">Tls</If><If lang="ruby">:tls</If> | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />_default: true_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">clientId</If><If lang="go">ClientId</If><If lang="python">client_id</If><If lang="ruby">:client_id</If> | A client ID, used for identifying this client when publishing messages or for presence purposes. The <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> may also be implicit in a token used to instantiate the library; an error will be raised if a <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If> specified here conflicts with the <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| <If lang="javascript,nodejs,java,objc,php,swift">useTokenAuth</If><If lang="go">UseTokenAuth</If><If lang="python">use_token_auth</If><If lang="ruby">:use_token_auth</If> | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a <If lang="ruby,python">`client_id`</If><If lang="javascript,nodejs,java,objc,php,python,swift,go">`clientId`</If> is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients).<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">endpoint</If><If lang="go">Endpoint</If><If lang="ruby">:endpoint</If> | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">null</If><If lang="java">Null</If><If lang="python">None</If><If lang="ruby,objc,swift">nil</If>_ | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">environment</If><If lang="go">Environment</If><If lang="ruby">:environment</If> | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">null</If><If lang="java">Null</If><If lang="python">None</If><If lang="ruby,objc,swift">nil</If>_ | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">idempotentRestPublishing</If><If lang="go">IdempotentRestPublishing</If><If lang="ruby">:idempotent_rest_publishing</If> | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default.<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">fallbackHosts</If><If lang="go">FallbackHosts</If><If lang="python">fallback_hosts</If><If lang="ruby">:fallback_hosts</If> | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here.<br />_default: `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]`_ | `String []` |
| <If lang="javascript,nodejs,java,objc,php,swift">transportParams</If><If lang="python">transport_params</If><If lang="ruby">:transport_params</If> | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections) | <If lang="javascript,nodejs,java,objc,php,swift,go">`Object`</If><If lang="python">`Dict`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param []`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">useBinaryProtocol</If><If lang="python">use_binary_protocol</If> | If set to true, will enable the binary protocol (MessagePack) if it is supported. It's disabled by default on browsers for performance considerations (browsers are optimized for decoding JSON). Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">queryTime</If><If lang="go">QueryTime</If><If lang="ruby">:query_time</If><If lang="python">query_time</If> | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request.<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">defaultTokenParams</If><If lang="python">default_token_params</If><If lang="ruby">:default_token_params</If><If lang="go">DefaultTokenParams</If> | When a [`TokenParams`](/docs/api/rest-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) or [Ably `TokenRequests`](/docs/api/rest-sdk/authentication#token-request) | [`TokenParams`](/docs/api/rest-sdk/types#token-params) |

</If>
<If lang="java,objc,swift,php">

#### <If lang="java">Members</If><If lang="php">Properties</If><If lang="objc,swift">Attributes</If>

| Parameter | Description | Type |
|-----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,php,python,swift">key</If><If lang="go">Key</If><If lang="ruby">:key</If> | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic) | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">token</If><If lang="go">Token</If><If lang="ruby">:token</If> | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the <If lang="javascript,nodejs,java,objc,php,python,swift">`token`</If><If lang="go">`Token`</If> property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,php,swift">`authUrl`</If><If lang="ruby">:auth_url</If><If lang="python">auth_url</If> or <If lang="javascript,nodejs,java,objc,php,swift">`authCallback`</If><If lang="go">`AuthCallback`</If><If lang="python">`auth_callback`</If><If lang="ruby">`:auth_callback`</If>. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |
| <If lang="javascript,nodejs,java,objc,php,swift">authCallback</If><If lang="go">AuthCallback</If><If lang="python">auth_callback</If><If lang="ruby">:auth_callback</If> | A <If lang="javascript,nodejs,flutter,java,objc,php,python,swift,go,ruby">function</If><If lang="javascript,nodejs">function with the form `function(tokenParams, callback(err, tokenOrTokenRequest))`</If><If lang="java">`TokenCallback` instance</If><If lang="python">callable (eg a lambda)</If><If lang="ruby">proc / lambda (called synchronously in REST and Realtime but does not block EventMachine in the latter)</If> which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Callable`</If><If lang="java">`TokenCallback`</If><If lang="ruby">`Proc`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authUrl</If><If lang="go">AuthUrl</If><If lang="ruby">:auth_url</If><If lang="python">auth_url</If> | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,go">`String`</If><If lang="swift,objc">`NSURL`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authMethod</If><If lang="go">AuthMethod</If><If lang="python">auth_method</If><If lang="ruby">:auth_method</If> | The HTTP verb to use for the request, either <If lang="javascript,nodejs,java,objc,php,python,swift,go">`GET`</If><If lang="ruby">`:get`</If> or <If lang="javascript,nodejs,java,objc,php,python,swift,go">`POST`</If><If lang="ruby">`:post`</If><br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">`GET`</If><If lang="ruby">`:get`</If>_ | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`String`</If><If lang="ruby">`Symbol`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">authHeaders</If><If lang="go">AuthHeaders</If><If lang="python">auth_headers</If><If lang="ruby">:auth_headers</If> | A set of key value pair headers to be added to any request made to the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authUrl`</If>. Useful when an application requires these to be added to validate the request or implement the response. <If lang="javascript">If the `authHeaders` object contains an `authorization` key, then `withCredentials` will be set on the xhr request.</If> | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Object`</If><If lang="python">`Dict`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param []`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,,swift">authParams</If><If lang="go">AuthParams</If><If lang="ruby">:auth_params</If><If lang="python">auth_params</If> | A set of key value pair params to be added to any request made to the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authUrl`</If>. When the <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authMethod`</If><If lang="go">`AuthMethod`</If> is `GET`, query params are added to the URL, whereas when <If lang="javascript,nodejs,flutter,java,objc,php,python,ruby,swift,go">`authMethod`</If><If lang="go">`AuthMethod`</If> is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | <If lang="javascript,nodejs,java,objc,php,python,swift,go">`Object`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param[]`</If><If lang="objc">`NSArray<NSURLQueryItem *>`</If><If lang="swift">`[NSURLQueryItem]/Array<NSURLQueryItem>`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,python,swift">tokenDetails</If><If lang="go">TokenDetails</If><If lang="python">token_details</If><If lang="ruby">:token_details</If> | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as <If lang="javascript,nodejs,java,objc,php,python,swift">`authUrl`</If><If lang="go">`AuthUrl`</If><If lang="ruby">`:auth_url`</If><If lang="python">`auth_url`</If> or <If lang="javascript,nodejs,java,objc,php,python,swift">`authCallback`</If><If lang="go">AuthCallback</If><If lang="python">`auth_callback`</If><If lang="ruby">`:auth_callback`</If>. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">tls</If><If lang="go">Tls</If><If lang="ruby">:tls</If> | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />_default: true_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">clientId</If><If lang="go">ClientId</If><If lang="python">client_id</If><If lang="ruby">:client_id</If> | A client ID, used for identifying this client when publishing messages or for presence purposes. The <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> may also be implicit in a token used to instantiate the library; an error will be raised if a <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If> specified here conflicts with the <If lang="javascript,nodejs,java,objc,php,python,swift">`clientId`</If><If lang="ruby,python">`client_id`</If><If lang="go">`ClientId`</If> implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">useTokenAuth</If><If lang="go">UseTokenAuth</If><If lang="python">use_token_auth</If><If lang="ruby">:use_token_auth</If> | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a <If lang="ruby,python">`client_id`</If><If lang="javascript,nodejs,java,objc,php,python,swift,go">`clientId`</If> is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients).<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">endpoint</If><If lang="go">Endpoint</If><If lang="ruby">:endpoint</If> | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">null</If><If lang="java">Null</If><If lang="python">None</If><If lang="ruby,objc,swift">nil</If>_ | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">environment</If><If lang="go">Environment</If><If lang="ruby">:environment</If> | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: <If lang="javascript,nodejs,java,objc,php,python,swift,go">null</If><If lang="java">Null</If><If lang="python">None</If><If lang="ruby,objc,swift">nil</If>_ | `String` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">idempotentRestPublishing</If><If lang="go">IdempotentRestPublishing</If><If lang="ruby">:idempotent_rest_publishing</If> | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default.<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">fallbackHosts</If><If lang="go">FallbackHosts</If><If lang="python">fallback_hosts</If><If lang="ruby">:fallback_hosts</If> | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here.<br />_default: `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]`_ | `String []` |
| <If lang="javascript,nodejs,java,objc,php,swift">transportParams</If><If lang="python">transport_params</If><If lang="ruby">:transport_params</If> | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections) | <If lang="javascript,nodejs,java,objc,php,swift,go">`Object`</If><If lang="python">`Dict`</If><If lang="ruby">`Hash`</If><If lang="php">`Associative Array`</If><If lang="java">`Param []`</If><If lang="flutter">`Map<String, String>`</If> |
| <If lang="javascript,nodejs,java,objc,php,swift">logLevel</If><If lang="python">log_level</If> | A number controlling the verbosity of the log output of the library. Valid values are: 0 (no logs), 1 (errors only), 2 (errors plus connection and channel state changes), 3 (high-level debug output), and 4 (full debug output). | `Integer` |
| <If lang="javascript,nodejs,java,objc,php,swift">logHandler</If><If lang="python">log_handler</If> | A function to handle each line of the library's log output. If `logHandler` is not specified, `console.log` is used. | `Callable` |
| <If lang="javascript,nodejs,java,objc,php,swift">useBinaryProtocol</If><If lang="python">use_binary_protocol</If> | If set to true, will enable the binary protocol (MessagePack) if it is supported. It's disabled by default on browsers for performance considerations (browsers are optimized for decoding JSON). Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,python,swift">queryTime</If><If lang="go">QueryTime</If><If lang="ruby">:query_time</If><If lang="python">query_time</If> | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request.<br />_default: false_ | `Boolean` |
| <If lang="javascript,nodejs,java,objc,php,swift">defaultTokenParams</If><If lang="python">default_token_params</If><If lang="ruby">:default_token_params</If><If lang="go">DefaultTokenParams</If> | When a [`TokenParams`](/docs/api/rest-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) or [Ably `TokenRequests`](/docs/api/rest-sdk/authentication#token-request) | [`TokenParams`](/docs/api/rest-sdk/types#token-params) |

</If>
<If lang="flutter">

#### Properties

| Parameter | Description | Type |
|-----------|-------------|------|
| key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic) | `String` |
| token | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |
| authCallback | A function which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | `Callable` |
| authUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | `String` |
| authMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />_default: `GET`_ | `String` |
| authHeaders | A set of key value pair headers to be added to any request made to the `authUrl`. Useful when an application requires these to be added to validate the request or implement the response. | `Map<String, String>` |
| authParams | A set of key value pair params to be added to any request made to the `authUrl`. When the `authMethod` is `GET`, query params are added to the URL, whereas when `authMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | `Map<String, String>` |
| tokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `authUrl` or `authCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />_default: true_ | `Boolean` |
| clientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `clientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `clientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `clientId` specified here conflicts with the `clientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| useTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients).<br />_default: false_ | `Boolean` |
| endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: null_ | `String` |
| environment | Deprecated, use `endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: null_ | `String` |
| idempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default.<br />_default: false_ | `Boolean` |
| fallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here.<br />_default: `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]`_ | `String []` |
| transportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections) | `Map<String, String>` |
| useBinaryProtocol | If set to true, will enable the binary protocol (MessagePack) if it is supported. It's disabled by default on browsers for performance considerations (browsers are optimized for decoding JSON). Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />_default: false_ | `Boolean` |
| queryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request.<br />_default: false_ | `Boolean` |
| defaultTokenParams | When a [`TokenParams`](/docs/api/rest-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) or [Ably `TokenRequests`](/docs/api/rest-sdk/authentication#token-request) | [`TokenParams`](/docs/api/rest-sdk/types#token-params) |

</If>


<If lang="csharp">

#### Properties

| Parameter | Description | Type |
|-----------|-------------|------|
| Key | The full key string, as obtained from the [application dashboard](https://ably.com/dashboard). Use this option if you wish to use Basic authentication, or wish to be able to issue Ably Tokens without needing to defer to a separate entity to sign Ably TokenRequests. Read more about [Basic authentication](/docs/auth/basic) | `String` |
| Token | An authenticated token. This can either be a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object, a [`TokenRequest`](/docs/api/realtime-sdk/types#token-request) object, or token string (obtained from the `Token` property of a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) component of an Ably TokenRequest response, or a [JSON Web Token](https://tools.ietf.org/html/rfc7519) satisfying [the Ably requirements for JWTs](/docs/auth/token#jwt)). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `AuthUrl` or `AuthCallback`. Read more about [Token authentication](/docs/auth/token) | `String`, `TokenDetails` or `TokenRequest` |
| AuthCallback | A function which is called when a new token is required. The role of the callback is to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). See [our authentication documentation](/docs/auth) for details of the Ably TokenRequest format and associated API calls. | `Func<TokenParams, Task<object>>` |
| AuthUrl | A URL that the library may use to obtain a fresh token, one of: an Ably Token string (in plain text format); a signed [`TokenRequest`](/docs/api/realtime-sdk/types#token-request); a [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) (in JSON format); an [Ably JWT](/docs/api/realtime-sdk/authentication#ably-jwt). For example, this can be used by a client to obtain signed Ably TokenRequests from an application server. | `Uri` |
| AuthMethod | The HTTP verb to use for the request, either `GET` or `POST`<br />_default: `GET`_ | `HttpMethod` |
| AuthHeaders | A set of key value pair headers to be added to any request made to the `AuthUrl`. Useful when an application requires these to be added to validate the request or implement the response. | `Dictionary<string, string>` |
| AuthParams | A set of key value pair params to be added to any request made to the `AuthUrl`. When the `AuthMethod` is `GET`, query params are added to the URL, whereas when `AuthMethod` is `POST`, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response. | `Dictionary<string, string>` |
| TokenDetails | An authenticated [`TokenDetails`](/docs/api/realtime-sdk/types#token-details) object (most commonly obtained from an Ably Token Request response). This option is mostly useful for testing: since tokens are short-lived, in production you almost always want to use an authentication method that allows the client library to renew the token automatically when the previous one expires, such as `AuthUrl` or `AuthCallback`. Use this option if you wish to use Token authentication. Read more about [Token authentication](/docs/auth/token) | `TokenDetails` |
| Tls | A boolean value, indicating whether or not a TLS ("SSL") secure connection should be used. An insecure connection cannot be used with Basic authentication as it would lead to a possible compromise of the private API key while in transit. [Find out more about TLS](https://faqs.ably.com/are-messages-sent-to-and-received-from-ably-securely-using-tls)<br />_default: true_ | `Boolean` |
| ClientId | A client ID, used for identifying this client when publishing messages or for presence purposes. The `ClientId` can be any non-empty string. This option is primarily intended to be used in situations where the library is instantiated with a key; note that a `ClientId` may also be implicit in a token used to instantiate the library; an error will be raised if a `ClientId` specified here conflicts with the `ClientId` implicit in the token. [Find out more about client identities](/docs/auth/identified-clients) | `String` |
| UseTokenAuth | When true, forces [Token authentication](/docs/auth/token) to be used by the library. Please note that if a `clientId` is not specified in the [`ClientOptions`](/docs/api/realtime-sdk/types#client-options) or [`TokenParams`](/docs/api/realtime-sdk/types#token-params), then the Ably Token issued will be [anonymous](https://faqs.ably.com/authenticated-and-identified-clients).<br />_default: false_ | `Boolean` |
| Endpoint | Enables [enterprise customers](https://ably.com/pricing) to use their own custom endpoints, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: null_ | `String` |
| Environment | Deprecated, use `Endpoint`. Enables [enterprise customers](https://ably.com/pricing) to use their own custom environments, which support dedicated, isolated clusters and regional message routing and storage constraints. See our [platform customization guide](/docs/platform/account/enterprise-customization) for more details.<br />_default: null_ | `String` |
| IdempotentRestPublishing | When true, enables idempotent publishing by assigning a unique message ID client-side, allowing the Ably servers to discard automatic publish retries following a failure such as a network fault. We recommend you enable this by default. In version 1.2 onwards, idempotent publishing for retries will be enabled by default.<br />_default: false_ | `Boolean` |
| FallbackHosts | An array of fallback hosts to be used in the case of an error necessitating the use of an alternative host. When a custom environment is specified, the [fallback host functionality](https://faqs.ably.com/routing-around-network-and-dns-issues) is disabled. If your customer success manager has provided you with a set of custom fallback hosts, please specify them here.<br />_default: `[a.ably-realtime.com, b.ably-realtime.com, c.ably-realtime.com, d.ably-realtime.com, e.ably-realtime.com]`_ | `String []` |
| TransportParams | Optional. Can be used to pass in arbitrary connection parameters, such as [`heartbeatInterval`](/docs/connect#heartbeats) and [`remainPresentFor`](/docs/presence-occupancy/presence#unstable-connections) | `Dictionary<string, object>` |
| LogLevel | A number controlling the verbosity of the log output of the library. Valid values are: 0 (no logs), 1 (errors only), 2 (errors plus connection and channel state changes), 3 (high-level debug output), and 4 (full debug output). | `Integer` |
| LoggerSink | The default ILoggerSink outputs messages to the debug console. This property allows the user to pipe the log messages to their own logging infrastructure.<br />_default: IO.Ably.DefaultLoggerSink_ | `ILoggerSink` |
| UseBinaryProtocol | If set to true, will enable the binary protocol (MessagePack) if it is supported. It's disabled by default on browsers for performance considerations (browsers are optimized for decoding JSON). Find out more about the [benefits of binary encoding](https://faqs.ably.com/do-you-binary-encode-your-messages-for-greater-efficiency)<br />_default: false_ | `Boolean` |
| QueryTime | If true, the library will query the Ably servers for the current time when [issuing TokenRequests](/docs/auth/token) instead of relying on a locally-available time of day. Knowing the time accurately is needed to create valid signed Ably [`TokenRequests`](/docs/api/rest-sdk/authentication#token-request), so this option is useful for library instances on auth servers where for some reason the server clock cannot be kept synchronized through normal means, such as an [NTP daemon](https://en.wikipedia.org/wiki/Ntpd). The server is queried for the current time once per client library instance (which stores the offset from the local clock), so if using this option you should avoid instancing a new version of the library for each request.<br />_default: false_ | `Boolean` |
| DefaultTokenParams | When a [`TokenParams`](/docs/api/rest-sdk/types#token-params) object is provided, it will override the client library defaults when issuing new [Ably Tokens](/docs/api/realtime-sdk/authentication#token-details) or [Ably `TokenRequests`](/docs/api/rest-sdk/authentication#token-request) | [`TokenParams`](/docs/api/rest-sdk/types#token-params) |

</If>

### <If lang="javascript,nodejs,flutter,go,python">Stats object</If> <If lang="swift,objc">ARTStats</If> <If lang="java">io.ably.lib.types.Stats</If> <If lang="ruby">Ably::Models::Stats</If> <If lang="php">Ably\Models\Stats</If> <If lang="csharp">IO.Ably.Stats</If> <a id="stats-type" />

A `Stats` object represents an application's statistics for the specified interval and time period. Ably aggregates statistics globally for all accounts and applications, and makes these available both through our [statistics API](/docs/metadata-stats/stats) as well as your [application dashboard](https://ably.com/dashboard).

<If lang="csharp,flutter,go,java,objc,php,python,ruby,swift">

Please note that most attributes of the `Stats` type below contain references to further stats types. This documentation is not exhaustive for all stats types, and as such, links to the stats types below will take you to the [Ruby library stats documentation](https://www.rubydoc.info/gems/ably/Ably/Models/Stats) which contains exhaustive stats documentation. Ruby and Python however uses `under_score` case instead of the default `camelCase` in most languages, so please bear that in mind.


#### <If lang="javascript,nodejs,csharp,flutter,go,objc,php,swift">Properties</If><If lang="java">Members</If><If lang="ruby">Attributes</If><If lang="python">Keyword arguments</If>

<If lang="csharp,python,ruby">

| Parameter | Description | Type |
|-----------|-------------|------|
| unit | The length of the interval that this statistic covers, such as <If lang="ruby">`:minute`, `:hour`, `:day`, `:month`</If><If lang="csharp">`Minute`, `Hour`, `Day`, `Month`</If><If lang="go">`StatGranularityDay`, `StatGranularityMonth`</If><If lang="flutter,java,objc,php,python,swift">`'minute'`, `'hour'`, `'day'`, `'month'`</If>. | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="flutter,java,php,python,go">`String`</If> |
| <If lang="ruby,python,objc,swift">interval_granularity</If><If lang="go,java,php,flutter">intervalGranularity</If><If lang="csharp">intervalGranularity</If> | Deprecated alias for `unit`; scheduled to be removed in version 2.x client library versions. | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="flutter,java,php,python,go">`String`</If> |
| <If lang="flutter,java,objc,php,swift">intervalId</If><If lang="ruby,python">interval_id</If><If lang="csharp,go">IntervalId</If> | The UTC time at which the time period covered by this `Stats` object starts. For example, an interval ID value of "2018-03-01:10" in a `Stats` object whose `unit` is `day` would indicate that the period covered is "2018-03-01:10 .. 2018-03-01:11". All `Stats` objects, except those whose `unit` is `minute`, have an interval ID with resolution of one hour and the time period covered will always begin and end at a UTC hour boundary. For this reason it is not possible to infer the `unit` by looking at the resolution of the `intervalId`. `Stats` objects covering an individual minute will have an interval ID indicating that time; for example "2018-03-01:10:02". | `String` |
| <If lang="ruby,python">interval_time</If><If lang="go,csharp">IntervalTime</If> | A <If lang="ruby">`Time`</If><If lang="python">`DateTime`</If><If lang="csharp,go">`DateTimeOffset`</If> object representing the parsed <If lang="flutter,java,objc,php,swift">`intervalId`</If><If lang="ruby,python">`interval_id`</If><If lang="csharp,go">`IntervalId`</If> (the UTC time at which the time period covered by this `Stats` object starts) | <If lang="ruby">`Time`</If><If lang="python">`DateTime`</If><If lang="csharp">`DateTimeOffset`</If> |
| <If lang="flutter,java,objc,php,python,ruby,swift">all</If><If lang="csharp,go">All</If> | Aggregate count of both `inbound` and `outbound` message stats | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="flutter,java,objc,php,swift">apiRequests</If><If lang="ruby,python">api_requests</If><If lang="csharp,go">ApiRequests</If> | Breakdown of API requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">channels</If><If lang="csharp,go">Channels</If> | Breakdown of channel related stats such as min, mean and peak channels | [`ResourceCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ResourceCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">connections</If><If lang="csharp,go">Connections</If> | Breakdown of connection related stats such as min, mean and peak connections for TLS and non-TLS connections | [`ConnectionTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ConnectionTypes) |
| <If lang="flutter,java,objc,php,python,ruby,swift">inbound</If><If lang="csharp,go">Inbound</If> | Statistics such as count and data for all inbound messages received over REST and Realtime connections, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="flutter,java,objc,php,python,ruby,swift">outbound</If><If lang="csharp,go">Outbound</If> | Statistics such as count and data for all outbound messages retrieved via REST history requests, received over Realtime connections, or pushed with Webhooks, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="flutter,java,objc,php,python,ruby,swift">persisted</If><If lang="csharp,go">Persisted</If> | Messages persisted and later retrieved via the [history API](/docs/storage-history/history) | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="flutter,java,objc,php,swift">tokenRequests</If><If lang="ruby,python">token_requests</If><If lang="csharp,go">TokenRequests</If> | Breakdown of Ably Token requests received via the Ably REST API. | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">push</If><If lang="csharp,go">Push</If> | Detailed stats on push notifications, see [our Push documentation](/docs/push) for more details | `PushStats` |

</If>
<If lang="objc,swift">

| Parameter | Description | Type |
|-----------|-------------|------|
| unit | The length of the interval that this statistic covers, such as <If lang="ruby">`:minute`, `:hour`, `:day`, `:month`</If><If lang="csharp">`Minute`, `Hour`, `Day`, `Month`</If><If lang="go">`StatGranularityDay`, `StatGranularityMonth`</If><If lang="flutter,java,objc,php,python,swift">`'minute'`, `'hour'`, `'day'`, `'month'`</If>. | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="flutter,java,php,python,go">`String`</If> |
| <If lang="ruby,python,objc,swift">intervalGranularity</If><If lang="go,java,php,flutter">intervalGranularity</If><If lang="csharp">intervalGranularity</If> | Deprecated alias for `unit`; scheduled to be removed in version 2.x client library versions. | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="flutter,java,php,python,go">`String`</If> |
| <If lang="flutter,java,objc,php,swift">intervalId</If><If lang="ruby,python">interval_id</If><If lang="csharp,go">IntervalId</If> | The UTC time at which the time period covered by this `Stats` object starts. For example, an interval ID value of "2018-03-01:10" in a `Stats` object whose `unit` is `day` would indicate that the period covered is "2018-03-01:10 .. 2018-03-01:11". All `Stats` objects, except those whose `unit` is `minute`, have an interval ID with resolution of one hour and the time period covered will always begin and end at a UTC hour boundary. For this reason it is not possible to infer the `unit` by looking at the resolution of the `intervalId`. `Stats` objects covering an individual minute will have an interval ID indicating that time; for example "2018-03-01:10:02". | `String` |
| <If lang="flutter,java,objc,php,python,ruby,swift">all</If><If lang="csharp,go">All</If> | Aggregate count of both `inbound` and `outbound` message stats | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="flutter,java,objc,php,swift">apiRequests</If><If lang="ruby,python">api_requests</If><If lang="csharp,go">ApiRequests</If> | Breakdown of API requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">channels</If><If lang="csharp,go">Channels</If> | Breakdown of channel related stats such as min, mean and peak channels | [`ResourceCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ResourceCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">connections</If><If lang="csharp,go">Connections</If> | Breakdown of connection related stats such as min, mean and peak connections for TLS and non-TLS connections | [`ConnectionTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ConnectionTypes) |
| <If lang="flutter,java,objc,php,python,ruby,swift">inbound</If><If lang="csharp,go">Inbound</If> | Statistics such as count and data for all inbound messages received over REST and Realtime connections, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="flutter,java,objc,php,python,ruby,swift">outbound</If><If lang="csharp,go">Outbound</If> | Statistics such as count and data for all outbound messages retrieved via REST history requests, received over Realtime connections, or pushed with Webhooks, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="flutter,java,objc,php,python,ruby,swift">persisted</If><If lang="csharp,go">Persisted</If> | Messages persisted and later retrieved via the [history API](/docs/storage-history/history) | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="flutter,java,objc,php,python,ruby,swift">tokenRequests</If><If lang="ruby,python">token_requests</If><If lang="csharp,go">TokenRequests</If> | Breakdown of Ably Token requests received via the Ably REST API. | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">push</If><If lang="csharp,go">Push</If> | Detailed stats on push notifications, see [our Push documentation](/docs/push) for more details | `PushStats` |

</If>
<If lang="flutter,java,php,go">

| Parameter | Description | Type |
|-----------|-------------|------|
| unit | The length of the interval that this statistic covers, such as <If lang="ruby">`:minute`, `:hour`, `:day`, `:month`</If><If lang="csharp">`Minute`, `Hour`, `Day`, `Month`</If><If lang="go">`StatGranularityDay`, `StatGranularityMonth`</If><If lang="flutter,java,objc,php,python,swift">`'minute'`, `'hour'`, `'day'`, `'month'`</If>. | <If lang="ruby">[`Stats::GRANULARITY`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant)</If><If lang="csharp">[`StatsIntervalGranularity`](/docs/api/realtime-sdk/types#stats-granularity) enum</If><If lang="objc,swift">`ARTStatsGranularity`</If><If lang="flutter,java,php,python,go">`String`</If> |
| <If lang="flutter,java,objc,php,swift">intervalId</If><If lang="ruby,python">interval_id</If><If lang="csharp,go">IntervalId</If> | The UTC time at which the time period covered by this `Stats` object starts. For example, an interval ID value of "2018-03-01:10" in a `Stats` object whose `unit` is `day` would indicate that the period covered is "2018-03-01:10 .. 2018-03-01:11". All `Stats` objects, except those whose `unit` is `minute`, have an interval ID with resolution of one hour and the time period covered will always begin and end at a UTC hour boundary. For this reason it is not possible to infer the `unit` by looking at the resolution of the `intervalId`. `Stats` objects covering an individual minute will have an interval ID indicating that time; for example "2018-03-01:10:02". | `String` |
| <If lang="flutter,java,objc,php,python,ruby,swift">all</If><If lang="csharp,go">All</If> | Aggregate count of both `inbound` and `outbound` message stats | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="flutter,java,objc,php,swift">apiRequests</If><If lang="ruby,python">api_requests</If><If lang="csharp,go">ApiRequests</If> | Breakdown of API requests received via the Ably REST API | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">channels</If><If lang="csharp,go">Channels</If> | Breakdown of channel related stats such as min, mean and peak channels | [`ResourceCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ResourceCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">connections</If><If lang="csharp,go">Connections</If> | Breakdown of connection related stats such as min, mean and peak connections for TLS and non-TLS connections | [`ConnectionTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/ConnectionTypes) |
| <If lang="flutter,java,objc,php,python,ruby,swift">inbound</If><If lang="csharp,go">Inbound</If> | Statistics such as count and data for all inbound messages received over REST and Realtime connections, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="flutter,java,objc,php,python,ruby,swift">outbound</If><If lang="csharp,go">Outbound</If> | Statistics such as count and data for all outbound messages retrieved via REST history requests, received over Realtime connections, or pushed with Webhooks, organized into normal channel messages or presence messages | [`MessageTraffic`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic) |
| <If lang="flutter,java,objc,php,python,ruby,swift">persisted</If><If lang="csharp,go">Persisted</If> | Messages persisted and later retrieved via the [history API](/docs/storage-history/history) | [`MessageTypes`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes) |
| <If lang="flutter,java,objc,php,python,ruby,swift">tokenRequests</If><If lang="ruby,python">token_requests</If><If lang="csharp,go">TokenRequests</If> | Breakdown of Ably Token requests received via the Ably REST API. | [`RequestCount`](https://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount) |
| <If lang="flutter,java,objc,php,python,ruby,swift">push</If><If lang="csharp,go">Push</If> | Detailed stats on push notifications, see [our Push documentation](/docs/push) for more details | `PushStats` |

</If>
</If>

<If lang="javascript,nodejs">

| Parameter | Description | Type |
|-----------|-------------|------|
| appId | The ID of the Ably application the statistics relate to. | `String` |
| entries | The statistics for the requested time interval and time period. The `schema` property provides further information | `Partial<Record<String, Number>>` |
| inProgress | Optional. For entires that are still in progress, such as the current month, the last sub-interval included in the stats entry. In the format `yyyy-mm-dd:hh:mm:ss` | `String` |
| intervalId | The UTC time period that the stats coverage begins at. If `unit` was requested as `minute` this will be in the format `YYYY-mm-dd:HH:MM`, if `hour` it will be `YYYY-mm-dd:HH`, if `day` it will be `YYYY-mm-dd:00` and if `month` it will be `YYYY-mm-01:00` | `String` |
| schema | The URL of a JSON schema describing the structure of the `Stats` object | `String` |

</If>

<If lang="javascript,nodejs,objc,swift,csharp">

### <If lang="objc,swift">ARTStatsGranularity</If><If lang="javascript,nodejs">StatsIntervalGranularity</If><If lang="csharp">StatsIntervalGranularity</If> <a id="stats-granularity" />

<If lang="javascript,nodejs">

`StatsIntervalGranularity` is an enum specifying the granularity of a [Stats interval](/docs/api/rest-sdk/statistics#stats-type).

<If lang="javascript">

<Code>
```javascript
const StatsIntervalGranularity = [
    'minute',
    'hour',
    'day',
    'month'
]
```
</Code>

</If>
<If lang="nodejs">

<Code>
```nodejs
const StatsIntervalGranularity = [
    'minute',
    'hour',
    'day',
    'month'
]
```
</Code>

</If>
</If>

<If lang="objc,swift">

`ARTStatsGranularity` is an enum specifying the granularity of a [ARTStats interval](/docs/api/rest-sdk/statistics#stats-type).

<If lang="objc">

<Code>
```objc
typedef NS_ENUM(NSUInteger, ARTStatsGranularity) {
    ARTStatsGranularityMinute,
    ARTStatsGranularityHour,
    ARTStatsGranularityDay,
    ARTStatsGranularityMonth
};
```
</Code>

</If>
<If lang="swift">

<Code>
```swift
enum ARTStatsGranularity : UInt {
    case Minute
    case Hour
    case Day
    case Month
}
```
</Code>

</If>
</If>

<If lang="csharp">

`StatsIntervalGranularity` is an enum specifying the granularity of a [Stats interval](/docs/api/rest-sdk/statistics#stats-type).

<Code>
```csharp
public enum StatsIntervalGranularity
{
    Minute,
    Hour,
    Day,
    Month
}
```
</Code>

</If>

</If>

### HttpPaginatedResponse <a id="http-paginated-response" />

An `HttpPaginatedResponse` is a superset of [PaginatedResult](/docs/api/rest-sdk/types#paginated-result), which is a type that represents a page of results plus metadata indicating the relative queries available to it. `HttpPaginatedResponse` additionally carries information about the response to an HTTP request. It is used when [making custom HTTP requests](/docs/api/rest-sdk#request).

#### <If lang="javascript,nodejs,objc,swift,csharp,go,php">Properties</If><If lang="java">Members</If><If lang="ruby,python">Attributes</If>

<If lang="objc,swift,csharp,go,python">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,ruby,php">items</If><If lang="csharp,go">Items</If><If lang="python">items</If> | Contains a page of results; for example, an array of [Message](#message) or [PresenceMessage](#presence-message) objects for a channel history request | <If lang="javascript,nodejs,java,objc,swift,ruby,php,csharp,go">`Array<>`</If><If lang="python">`List<>`</If> |
| <If lang="javascript,nodejs,java,objc,swift,php">statusCode</If><If lang="ruby">status_code</If><If lang="csharp,go,python">StatusCode</If> | The HTTP status code of the response | `Number` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,php">success</If><If lang="csharp,go,python">Success</If> | Whether the HTTP status code indicates success. This is equivalent to <If lang="javascript,nodejs,java,objc,swift,php,python">`200 <= statusCode < 300`</If><If lang="ruby">`200 <= status_code < 300`</If><If lang="csharp,go">`200 <= StatusCode < 300`</If> | `Boolean` |
| <If lang="javascript,nodejs,java,objc,swift,php">headers</If><If lang="csharp,go,python">Headers</If> | The headers of the response | `Object` |
| <If lang="javascript,nodejs,java,objc,swift,php">errorCode</If><If lang="ruby">error_code</If><If lang="csharp,go,python">ErrorCode</If> | The error code if the `X-Ably-Errorcode` HTTP header is sent in the response | <If lang="javascript,nodejs">`Number`</If><If lang="java,objc,swift,ruby,php,csharp,go,python">`Int`</If> |
| <If lang="javascript,nodejs,java,objc,swift,php">errorMessage</If><If lang="ruby">error_message</If><If lang="csharp,go,python">ErrorMessage</If> | The error message if the `X-Ably-Errormessage` HTTP header is sent in the response | `String` |

</If>
<If lang="ruby">

| Property | Description | Type |
|----------|-------------|------|
| status_code | The HTTP status code of the response | `Number` |
| success | Whether the HTTP status code indicates success. This is equivalent to `200 <= status_code < 300` | `Boolean` |
| headers | The headers of the response | `Object` |
| error_code | The error code if the `X-Ably-Errorcode` HTTP header is sent in the response | `Int` |
| error_message | The error message if the `X-Ably-Errormessage` HTTP header is sent in the response | `String` |

</If>
<If lang="javascript,nodejs,php,flutter,java">

| Property | Description | Type |
|----------|-------------|------|
| <If lang="javascript,nodejs,java,objc,swift,php,flutter">statusCode</If><If lang="ruby">status_code</If><If lang="csharp,go,python">StatusCode</If> | The HTTP status code of the response | `Number` |
| <If lang="javascript,nodejs,java,objc,swift,ruby,php,flutter">success</If><If lang="csharp,go,python">Success</If> | Whether the HTTP status code indicates success. This is equivalent to <If lang="javascript,nodejs,java,objc,swift,php,python">`200 <= statusCode < 300`</If><If lang="ruby">`200 <= status_code < 300`</If><If lang="csharp,go">`200 <= StatusCode < 300`</If> | `Boolean` |
| <If lang="javascript,nodejs,java,objc,swift,php,flutter">headers</If><If lang="csharp,go,python">Headers</If> | The headers of the response | `Object` |
| <If lang="javascript,nodejs,java,objc,swift,php,flutter">errorCode</If><If lang="ruby">error_code</If><If lang="csharp,go,python">ErrorCode</If> | The error code if the `X-Ably-Errorcode` HTTP header is sent in the response | <If lang="javascript,nodejs">`Number`</If><If lang="java,objc,swift,ruby,php,csharp,go,python">`Int`</If> |
| <If lang="javascript,nodejs,java,objc,swift,php,flutter">errorMessage</If><If lang="ruby">error_message</If><If lang="csharp,go,python">ErrorMessage</If> | The error message if the `X-Ably-Errormessage` HTTP header is sent in the response | `String` |

</If>

#### Methods

##### <If lang="javascript,nodejs,java,objc,swift,ruby,php,python,go,flutter">first</If><If lang="csharp">First</If>

<If lang="javascript,nodejs">

`first(): Promise<HttpPaginatedResponse>`

Returns a promise. On success, the promise is fulfilled with a new `HttpPaginatedResponse` for the first page of results. On failure, the promise is rejected with an [ErrorInfo](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

<If lang="ruby">

`HttpPaginatedResponse first`

Returns a new `HttpPaginatedResponse` for the first page of results. When using the Realtime library, the `first` method returns a [Deferrable](/docs/api/realtime-sdk/types#deferrable) and yields an [HttpPaginatedResponse](/docs/api/realtime-sdk/types#http-paginated-response).

</If>

<If lang="php">

`HttpPaginatedResponse first()`

Returns a new `HttpPaginatedResponse` for the first page of results.

</If>

<If lang="python">

`HttpPaginatedResponse first()`

Returns a new `HttpPaginatedResponse` for the first page of results.

</If>

<If lang="csharp">

`Task<HttpPaginatedResponse<T>> FirstAsync()`

Returns a new `HttpPaginatedResponse` for the first page of results. The method is asynchronous and returns a Task which needs to be awaited to get the [HttpPaginatedResponse](/docs/api/realtime-sdk/types#http-paginated-response).

</If>

<If lang="java">

`HttpPaginatedResponse first()`

Returns a new `HttpPaginatedResponse` for the first page of results.

</If>

<If lang="objc,swift">

`first(callback: (ARTHttpPaginatedResponse?, ARTErrorInfo?) -> Void)`

Returns a new `HttpPaginatedResponse` for the first page of results.

</If>

<If lang="go">

`First() (HttpPaginatedResponse, error)`

Returns a new `HttpPaginatedResponse` for the first page of results.

</If>


##### <If lang="javascript,nodejs,java,objc,swift,php">hasNext</If><If lang="csharp,go">HasNext</If><If lang="ruby">has_next?</If><If lang="python">has_next</If>

<If lang="javascript,nodejs,java">

`Boolean hasNext()`

</If>

<If lang="ruby">

`Boolean has_next?`

</If>

<If lang="php">

`Boolean hasNext()`

</If>

<If lang="python">

`Boolean has_next()`

</If>

<If lang="csharp">

`Boolean HasNext()`

</If>

<If lang="java">

`Boolean hasNext()`

</If>

<If lang="objc,swift">

`Boolean hasNext()`

</If>

<If lang="go">

`HasNext() (bool)`

</If>

Returns `true` if there are more pages available by calling <If lang="javascript,nodejs,java,objc,swift,ruby,php,python">`next`</If><If lang="csharp,go">`Next`</If> and returns `false` if this page is the last page available.

##### <If lang="javascript,nodejs,java,objc,swift,php">isLast</If><If lang="csharp,go">IsLast</If><If lang="ruby">last?</If><If lang="python">is_last</If>

<If lang="javascript,nodejs,java">

`Boolean isLast()`

</If>

<If lang="ruby">

`Boolean last?`

</If>

<If lang="php">

`Boolean isLast()`

</If>

<If lang="python">

`Boolean is_last()`

</If>

<If lang="csharp">

`Boolean IsLast()`

</If>

<If lang="java">

`Boolean isLast()`

</If>

<If lang="objc,swift">

`Boolean isLast()`

</If>

<If lang="go">

`IsLast() (bool)`

</If>

Returns `true` if this page is the last page and returns `false` if there are more pages available by calling <If lang="javascript,nodejs,java,objc,swift,ruby,php,python">`next`</If><If lang="csharp,go">`Next`</If> available.

##### <If lang="javascript,nodejs,java,objc,swift,ruby,php,python,go">next</If><If lang="csharp">Next</If>

<If lang="javascript,nodejs">

`next(callback(err, resultPage))`

</If>

<If lang="javascript,nodejs">

`next(): Promise<HttpPaginatedResponse>`

Returns a promise. On success, the promise is fulfilled with a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `null` is returned. On failure, the promise is rejected with an [ErrorInfo](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

<If lang="ruby">

`HttpPaginatedResponse next`

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `null` is returned. When using the Realtime library, the `first` method returns a [Deferrable](/docs/api/realtime-sdk/types#deferrable) and yields an [HttpPaginatedResponse](/docs/api/realtime-sdk/types#http-paginated-response).

</If>

<If lang="php">

`HttpPaginatedResponse next()`

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `null` is returned.

</If>

<If lang="python">

`HttpPaginatedResponse next()`

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `None` is returned.

</If>

<If lang="csharp">

`Task<HttpPaginatedResponse<T>> NextAsync()`

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then a blank HttpPaginatedResponse will be returned. The method is asynchronous and return a Task which needs to be awaited to get the `HttpPaginatedResponse`.

</If>

<If lang="java">

`HttpPaginatedResponse next()`

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `Null` is returned.

</If>

<If lang="objc,swift">

`next(callback: (ARTHttpPaginatedResponse?, ARTErrorInfo?) -> Void)`

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `nil` is returned.

</If>

<If lang="go">

`Next() (HttpPaginatedResponse, error)`

Returns a new `HttpPaginatedResponse` loaded with the next page of results. If there are no further pages, then `nil` is returned.

</If>

<If lang="javascript,nodejs">

##### current <a id="current" />

<If lang="javascript">

`current(): Promise<HttpPaginatedResponse>`

</If>

<If lang="nodejs">

`current(): Promise<HttpPaginatedResponse>`

</If>

Returns a promise. On success, the promise is fulfilled with a new `HttpPaginatedResponse` loaded with the current page of results. On failure, the promise is rejected with an [ErrorInfo](/docs/api/realtime-sdk/types#error-info) object that details the reason why it was rejected.

</If>

#### Example

The `HttpPaginatedResponse` interface is a superset of `PaginatedResult`, see the [PaginatedResult example](/docs/api/rest-sdk/types/#paginated-result-example)

<If lang="java">

### io.ably.lib.types.Param <a id="param"></a>

`Param` is a type encapsulating a key/value pair. This type is used frequently in method parameters allowing key/value pairs to be used more flexible, see [Channel#history](/docs/api/realtime-sdk/history#channel-history) for an example.

Please note that `key` and `value` attributes are always strings. If an `Integer` or other value type is expected, then you must coerce that type into a `String`.

#### Members

| Property | Description | Type |
|----------|-------------|------|
| key | The key value | `String` |
| value | The value associated with the `key` | `String` |

</If>

<If lang="javascript,nodejs">

### BatchPublishSpec <a id="batch-publish-spec" />

A `BatchPublishSpec` describes the messages that should be published by a batch publish operation, and the channels to which they should be published.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channels | The names of the channels to publish the `messages` to | `String[]` |
| messages | An array of [Message](/docs/api/realtime-sdk/types#message) objects | [`Message[]`](/docs/api/realtime-sdk/types#message) |

### BatchResult <a id="batch-result" />

A `BatchResult` contains information about the results of a batch operation.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| successCount | The number of successful operations in the request | `Number` |
| failureCount | The number of unsuccessful operations in the request | `Number` |
| messages | An array of results for the batch operation (for example, an array of [BatchPublishSuccessResult](/docs/api/realtime-sdk/types#batch-publish-success-result) or [BatchPublishFailureResult](/docs/api/realtime-sdk/types#batch-publish-failure-result) for a channel batch publish request) | `Object[]` |

### BatchPublishSuccessResult <a id="batch-publish-success-result" />

A `BatchPublishSuccessResult` contains information about the result of successful publishes to a channel requested by a single [BatchPublishSpec](/docs/api/realtime-sdk/types#batch-publish-spec).

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The name of the channel the message(s) was published to | `String` |
| messageId | A unique ID prefixed to the `Message.id` of each published message | `String` |

### BatchPublishFailureResult <a id="batch-publish-failure-result" />

A `BatchPublishFailureResult` contains information about the result of unsuccessful publishes to a channel requested by a single [BatchPublishSpec](/docs/api/realtime-sdk/types#batch-publish-spec).

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The name of the channel the message(s) failed to be published to | `String` |
| error | Describes the reason for which the message(s) failed to publish to the channel as an [ErrorInfo](/docs/api/realtime-sdk/types#error-info) object | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) |

### BatchPresenceSuccessResult <a id="batch-presence-success-result" />

A `BatchPresenceSuccessResult` contains information about the result of a successful batch presence request for a single channel.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The channel name the presence state was retrieved for | `String` |
| presence | An array of [PresenceMessage](/docs/api/realtime-sdk/types#presence-message) describing members present on the channel | [`PresenceMessage[]`](/docs/api/realtime-sdk/types#presence-message) |

### BatchPresenceFailureResult <a id="batch-presence-failure-result" />

A `BatchPresenceFailureResult` contains information about the result of an unsuccessful batch presence request for a single channel.

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| channel | The channel name the presence state failed to be retrieved for | `String` |
| error | Describes the reason for which presence state could not be retrieved for the channel as an [ErrorInfo](/docs/api/realtime-sdk/types#error-info) object | [`ErrorInfo`](/docs/api/realtime-sdk/types#error-info) |

</If>
