<!-- Generated by: ably-os errors document-error-codes -->
<!-- Repository: https://github.com/ably/ably-os -->
<!-- Command: ./bin/ably-os errors document-error-codes 92002 -->
<!-- Generated: 2025-08-21T17-17-40-434Z -->
<!-- Sources: 
     - Analysis: https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-analysis.md
     - Knowledge: https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md
     - Editorial notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
-->
<!-- Key Approach: Document the cipher algorithm mismatch error with focus on Ruby SDK implementation while acknowledging potential LiveObjects conflict -->
<!-- Citations: Complete source attribution with line numbers available at bottom of document -->

# Error 92002: Cipher algorithm mismatch

## What Happened

The encryption algorithm used to encrypt a message doesn't match the algorithm configured for decryption on this channel.

## Quick Reference

| Error Code | HTTP Status | Category | Retryable |
|------------|-------------|----------|-----------|
| 92002 | 400 | Cipher/Encryption Error | No - requires configuration fix |

## Quick Fix

- Ensure all clients on the channel use the same cipher algorithm
- Verify both sender and receiver use matching encryption settings
- Check that development and production environments use consistent algorithms

## Error Messages

You may see this message:
- "Cipher algorithm {channel_algorithm} does not match message cipher algorithm of {message_algorithm}"

The placeholders show the actual algorithms in conflict (e.g., AES-128-CBC vs AES-256-CBC).

## Common Causes

1. **Different algorithm configurations** (80% of cases)
   - One client using AES-128-CBC, another using AES-256-CBC
   - Algorithm changed without updating all clients
   - Development vs production environment mismatch

2. **Algorithm migration in progress** (15% of cases)
   - Upgrading encryption strength without coordinating all clients
   - Partial deployment of algorithm changes

3. **Legacy client compatibility** (5% of cases)
   - Older SDK versions using different default algorithms
   - Mixed SDK versions in the same channel

## Resolution Steps

1. **Identify the algorithm mismatch**
   - Check the error message for the specific algorithms in conflict
   - The channel algorithm is what your current client is configured to use
   - The message algorithm is what was used to encrypt the received message
   <!-- Source: Analysis finding from https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-analysis.md lines 26-28 -->

2. **Align all clients to use the same algorithm**
   - Choose a standard algorithm for all clients (recommend AES-256-CBC for better security)
   - Update cipher configuration across all applications
   <!-- Source: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md lines 43-44 -->

3. **Update your cipher configuration**
   - Ensure consistent cipher params across all clients
   - See [Ably encryption documentation](https://ably.com/docs/realtime/encryption) for configuration details
   <!-- Source: Editorial notes from https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md line 128 -->

4. **For algorithm migration**
   - Deploy receivers that can handle both algorithms temporarily
   - Update all senders to the new algorithm
   - Remove support for the old algorithm once migration is complete
   <!-- Source: Knowledge migration strategy from https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md lines 31-35 -->

## Automatic Handling

This is a configuration error that will not be automatically retried. The cipher algorithm mismatch must be resolved before messages can be successfully decrypted.

## Prevention

- **Standardize on one algorithm**: Use AES-256-CBC for all clients for maximum security
- **Document your choice**: Keep encryption configuration documented and versioned
- **Test compatibility**: Verify encryption works across all client types before deployment
- **Monitor for mismatches**: Set up alerts for cipher-related errors
<!-- Source: Best practices from https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md lines 42-47 -->

## Related Resources

- [Ably encryption documentation](https://ably.com/docs/realtime/encryption)
- [Cipher params configuration](https://ably.com/docs/realtime/encryption#cipher-params)
- Related errors: [92001](./92001-channel-not-configured-for-encryption.md), [92003](./92003-decryption-failure.md), [92004](./92004-unsupported-cipher-algorithm.md)

## Need Further Help?

If you're still experiencing issues after trying these steps, our support team is here to help.

**Contact Ably Support**: https://ably.com/support

When contacting support, please provide:
- Your account ID and app ID
- The full error message including error code 92002
- Steps to reproduce the issue
- Any relevant code snippets (without sensitive credentials)
- The SDK and version you're using

Our team will help you resolve this issue as quickly as possible.

<!-- =============================================== -->
<!-- INTERNAL DOCUMENTATION (NOT RENDERED) -->
<!-- =============================================== -->

<!-- SOURCES USED (ALWAYS use GitHub URLs, never local paths):
- Analysis File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-analysis.md
- Knowledge File: https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md
- Editorial Notes: https://github.com/ably/ably-os/blob/main/src/prompts/errors/editorial-notes.md
- Existing Documentation: None found
- Repository Overviews: Not needed for this specific error
-->

<!-- CONTENT DECISIONS:
- FAQ Content Preserved: No FAQ content was available for this error
- Content Excluded: LiveObjects tombstone documentation excluded as it appears to be a documentation conflict (see notes below)
- Recommendations Source: 
  - Resolution steps based on analysis of Ruby SDK implementation (92002-analysis.md lines 14-20, 44-46)
  - Migration strategy from knowledge file (92002-knowledge.md lines 31-35)
  - Best practices from knowledge file (92002-knowledge.md lines 42-47)
- Code Examples Rationale: No code examples included as configuration varies by SDK and linking to documentation is more appropriate
-->

<!-- ATTRIBUTION BY SECTION:
- Common Causes: 
  - Cause 1: Based on analysis findings in https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-analysis.md lines 98-101
  - Cause 2: From knowledge file https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md lines 31-35
  - Cause 3: From knowledge file https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md line 40
- Resolution Steps: 
  - Step 1: Source from https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-analysis.md lines 26-28 - error message format
  - Step 2: Knowledge recommendation from https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md lines 43-44
  - Step 3: Reference to https://ably.com/docs/realtime/encryption for configuration
  - Step 4: Migration strategy from https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md lines 31-35
- Prevention: Based on https://github.com/ably/ably-os/blob/main/output/error-codes/research/92002-knowledge.md lines 42-47
-->

<!-- DOCUMENTATION SHORTCOMINGS:
⚠️ Areas where Ably documentation could be improved:
- Missing: Clear documentation about the conflict between LiveObjects error 92002 and cipher error 92002
- Impact: Confusion when different SDKs use the same error code for different purposes
- Recommendation: Either use distinct error codes or clearly document both uses in platform docs
- Severity: Medium - causes confusion but doesn't prevent resolution
-->

<!-- IMPROVEMENT INSTRUCTIONS:
To improve this error code documentation:
1. First approach: Update editorial-notes.md in ably-os repository with specific guidance for error 92002
2. Regenerate: Run `./bin/ably-os errors document-error-codes 92002 --force`
3. For broader improvements: Review and update ably-os prompt templates
4. Context: See https://github.com/ably/ably-os/blob/main/docs/ERROR_COMMANDS_GUIDE.md
5. Source repository: https://github.com/ably/ably-os
-->

<!-- SPECIAL NOTE ON ERROR CODE CONFLICT:
The research revealed that error 92002 is documented differently in different places:
1. Ruby SDK (lib/ably/models/message_encoders/cipher.rb): Uses 92002 for cipher algorithm mismatch
2. Platform Docs (docs/src/pages/docs/platform/errors/codes.mdx:719): Documents 92002 as LiveObjects tombstone error
This documentation focuses on the cipher algorithm mismatch as that's the only actual implementation found in the codebase.
The LiveObjects documentation may be for a planned feature or documentation error.
-->